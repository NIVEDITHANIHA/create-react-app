/*! For license information please see main.bb7201c5.js.LICENSE.txt */
!function(){"use strict";var e={463:function(e,t,n){var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),x=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var j=!1;function V(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function B(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case x:return"Portal";case S:return"Profiler";case I:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function G(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=G(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function J(e,t){X(e,t);var n=G(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,G(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+G(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:G(n)}}function ae(e,t){var n=G(t.value),r=G(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,_e=null,Ie=null;function Se(e){if(e=ki(e)){if("function"!==typeof xe)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),xe(e.stateNode,e.type,t))}}function Ee(e){_e?Ie?Ie.push(e):Ie=[e]:_e=e}function Te(){if(_e){var e=_e,t=Ie;if(Ie=_e=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var Ae=!1;function Re(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==_e||null!==Ie)&&(Ne(),Te())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Pe=!1;if(l)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(le){Pe=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,Ue=!1,je=null,Ve={onError:function(e){Me=!0,Fe=e}};function Be(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(Ve,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ge(e){if(ze(e)!==e)throw Error(a(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ge(i),e;if(o===r)return Ge(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var We=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,$e=i.unstable_requestPaint,Xe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,xt,_t,It,St,Et=!1,Tt=[],Ct=null,Nt=null,At=null,Rt=new Map,Dt=new Map,Pt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void St(e.priority,(function(){_t(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function jt(e,t,n){Ut(e)&&n.delete(t)}function Vt(){Et=!1,null!==Ct&&Ut(Ct)&&(Ct=null),null!==Nt&&Ut(Nt)&&(Nt=null),null!==At&&Ut(At)&&(At=null),Rt.forEach(jt),Dt.forEach(jt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function zt(e){function t(t){return Bt(t,e)}if(0<Tt.length){Bt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Bt(Ct,e),null!==Nt&&Bt(Nt,e),null!==At&&Bt(At,e),Rt.forEach(t),Dt.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Pt.shift()}var qt=b.ReactCurrentBatchConfig,Gt=!0;function Kt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=1,Wt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Ht(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=4,Wt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Wt(e,t,n,r){if(Gt){var i=Yt(e,t,n,r);if(null===i)Gr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Rt.set(a,Mt(Rt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Dt.set(a,Mt(Dt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=Yt(e,t,n,r))&&Gr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Gr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=gi(e=we(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),mn=an(F({},fn,{relatedTarget:0})),yn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),bn=an(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function Sn(){return In}var En=F({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(En),Cn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),An=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=an(Rn),Pn=[9,13,27,32],On=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!On||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),jn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Kn(e,t,n,r){Ee(r),0<(t=Hr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Wn=null;function Qn(e){Ur(e,0)}function Yn(e){if(W(bi(e)))return e}function $n(e,t){if("change"===e)return t}var Xn=!1;if(l){var Jn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Wn=Hn=null)}function nr(e){if("value"===e.propertyName&&Yn(Wn)){var t=[];Kn(t,Wn,e,we(e)),Re(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Wn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Wn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,gr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Hr(yr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},_r={},Ir={};function Sr(e){if(_r[e])return _r[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ir)return _r[e]=n[t];return e}l&&(Ir=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Er=Sr("animationend"),Tr=Sr("animationiteration"),Cr=Sr("animationstart"),Nr=Sr("transitionend"),Ar=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){Ar.set(e,t),s(t,[e])}for(var Pr=0;Pr<Rr.length;Pr++){var Or=Rr[Pr];Dr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Dr(Er,"onAnimationEnd"),Dr(Tr,"onAnimationIteration"),Dr(Cr,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(Be.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,Ue||(Ue=!0,je=l)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(Ue)throw e=je,Ue=!1,je=null,e}function jr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Br]){e[Br]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch($t(t)){case 1:var i=Kt;break;case 4:i=Ht;break;default:i=Wt}n=i.bind(null,t,n,e),i=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Gr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Re((function(){var r=a,i=we(n),o=[];e:{var u=Ar.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Tn;break;case"focusin":c="focus",s=mn;break;case"focusout":c="blur",s=mn;break;case"beforeblur":case"afterblur":s=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Nn;break;case Er:case Tr:case Cr:s=yn;break;case Nr:s=An;break;case"scroll":s=hn;break;case"wheel":s=Dn;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=De(p,h))&&l.push(Kr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:bi(s),d=null==c?u:bi(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Wr(d))p++;for(d=0,v=h;v;v=Wr(v))d++;for(;0<p-d;)l=Wr(l),p--;for(;0<d-p;)h=Wr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Wr(l),h=Wr(h)}l=null}else l=null;null!==s&&Qr(o,u,s,l,!1),null!==c&&null!==f&&Qr(o,f,c,l,!0)}if("select"===(s=(u=r?bi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var m=$n;else if(Gn(u))if(Xn)m=or;else{m=ir;var y=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(m=ar);switch(m&&(m=m(e,r))?Kn(o,m,n,i):(y&&y(e,u,r),"focusout"===e&&(y=u._wrapperState)&&y.controlled&&"number"===u.type&&ee(u,"number",u.value)),y=r?bi(r):window,e){case"focusin":(Gn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,gr=null);break;case"focusout":gr=yr=mr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(o,n,i)}var g;if(On)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else zn?Vn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==k?"onCompositionEnd"===k&&zn&&(g=en()):(Jt="value"in(Xt=i)?Xt.value:Xt.textContent,zn=!0)),0<(y=Hr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:y}),g?k.data=g:null!==(g=Bn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(jn=!0,Un);case"textInput":return(e=t.data)===Un&&jn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!On&&Vn(e,t)?(e=en(),Zt=Jt=Xt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Ur(o,t)}))}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=De(e,n))&&r.unshift(Kr(e,a,i)),null!=(a=De(e,t))&&r.push(Kr(e,a,i))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=De(n,a))&&o.unshift(Kr(n,s,u)):i||null!=(s=De(n,a))&&o.push(Kr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace($r,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,mi="__reactListeners$"+fi,yi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var xi=[],_i=-1;function Ii(e){return{current:e}}function Si(e){0>_i||(e.current=xi[_i],xi[_i]=null,_i--)}function Ei(e,t){_i++,xi[_i]=e.current,e.current=t}var Ti={},Ci=Ii(Ti),Ni=Ii(!1),Ai=Ti;function Ri(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Di(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pi(){Si(Ni),Si(Ci)}function Oi(e,t,n){if(Ci.current!==Ti)throw Error(a(168));Ei(Ci,t),Ei(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ai=Ci.current,Ei(Ci,e),Ei(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Si(Ni),Si(Ci),Ei(Ci,e)):Si(Ni),Ei(Ni,n)}var Ui=null,ji=!1,Vi=!1;function Bi(e){null===Ui?Ui=[e]:Ui.push(e)}function zi(){if(!Vi&&null!==Ui){Vi=!0;var e=0,t=kt;try{var n=Ui;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,ji=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),We(Ze,zi),i}finally{kt=t,Vi=!1}}return null}var qi=[],Gi=0,Ki=null,Hi=0,Wi=[],Qi=0,Yi=null,$i=1,Xi="";function Ji(e,t){qi[Gi++]=Hi,qi[Gi++]=Ki,Ki=e,Hi=t}function Zi(e,t,n){Wi[Qi++]=$i,Wi[Qi++]=Xi,Wi[Qi++]=Yi,Yi=e;var r=$i;e=Xi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$i=1<<32-ot(t)+i|n<<i|r,Xi=a+e}else $i=1<<a|n<<i|r,Xi=e}function ea(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ta(e){for(;e===Ki;)Ki=qi[--Gi],qi[Gi]=null,Hi=qi[--Gi],qi[Gi]=null;for(;e===Yi;)Yi=Wi[--Qi],Wi[Qi]=null,Xi=Wi[--Qi],Wi[Qi]=null,$i=Wi[--Qi],Wi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:$i,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=b.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ya=Ii(null),ga=null,ka=null,ba=null;function wa(){ba=ka=ga=null}function xa(e){var t=ya.current;Si(ya),e._currentValue=t}function _a(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ia(e,t){ga=e,ba=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bu=!0),e.firstContext=null)}function Sa(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ea=null;function Ta(e){null===Ea?Ea=[e]:Ea.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Na(e,r)}function Na(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Aa=!1;function Ra(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Da(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Pa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cs)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Na(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Na(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Aa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=F({},f,h);break e;case 2:Aa=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Ms|=o,e.lanes=o,e.memoizedState=f}}function Ua(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var ja=(new r.Component).refs;function Va(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Ba={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Pa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Pa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Pa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Oa(e,i,r))&&(nc(t,e,r,n),La(t,e,r))}};function za(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function qa(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Sa(a):(i=Di(t)?Ai:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ri(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ba,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ga(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ba.enqueueReplaceState(t,t.state,null)}function Ka(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ja,Ra(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Sa(a):(a=Di(t)?Ai:Ci.current,i.context=Ri(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Va(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Ba.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ha(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===ja&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Wa(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Pc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===_?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===D&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ha(e,t,n),r.return=e,r):((r=Oc(n.type,n.key,n.props,null,e.mode,r)).ref=Ha(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Oc(t.type,t.key,t.props,null,e.mode,n)).ref=Ha(e,null,t),n.return=e,n;case x:return(t=Uc(t,e.mode,n)).return=e,t;case D:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;Wa(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case x:return n.key===i?l(e,t,n,r):null;case D:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);Wa(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case D:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);Wa(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,m=null;null!==f&&v<u.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var y=d(i,f,u[v],s);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y,f=m}if(v===u.length)return n(i,f),ia&&Ji(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return ia&&Ji(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(m=p(f,i,v,u[v],s))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),ia&&Ji(i,v),c}function m(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,m=u=0,y=null,g=s.next();null!==v&&!g.done;m++,g=s.next()){v.index>m?(y=v,v=null):y=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=y);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,m),null===f?l=k:f.sibling=k,f=k,v=y}if(g.done)return n(i,v),ia&&Ji(i,m),l;if(null===v){for(;!g.done;m++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return ia&&Ji(i,m),l}for(v=r(i,v);!g.done;m++,g=s.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Ji(i,m),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===_&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===_){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ha(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===_?((a=Lc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Oc(o.type,o.key,o.props,null,r.mode,s)).ref=Ha(r,a,o),s.return=r,r=s)}return u(r);case x:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Uc(o,r.mode,s)).return=r,r=a}return u(r);case D:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return m(r,a,o,s);Wa(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Fc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var $a=Ya(!0),Xa=Ya(!1),Ja={},Za=Ii(Ja),eo=Ii(Ja),to=Ii(Ja);function no(e){if(e===Ja)throw Error(a(174));return e}function ro(e,t){switch(Ei(to,t),Ei(eo,e),Ei(Za,Ja),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Si(Za),Ei(Za,t)}function io(){Si(Za),Si(eo),Si(to)}function ao(e){no(to.current);var t=no(Za.current),n=se(t,e.type);t!==n&&(Ei(eo,e),Ei(Za,n))}function oo(e){eo.current===e&&(Si(Za),Si(eo))}var uo=Ii(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=b.ReactCurrentDispatcher,ho=b.ReactCurrentBatchConfig,po=0,vo=null,mo=null,yo=null,go=!1,ko=!1,bo=0,wo=0;function xo(){throw Error(a(321))}function _o(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function Io(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,bo=0,25<=o)throw Error(a(301));o+=1,yo=mo=null,t.updateQueue=null,fo.current=cu,e=n(r,i)}while(ko)}if(fo.current=ou,t=null!==mo&&null!==mo.next,po=0,yo=mo=vo=null,go=!1,t)throw Error(a(300));return e}function So(){var e=0!==bo;return bo=0,e}function Eo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?vo.memoizedState=yo=e:yo=yo.next=e,yo}function To(){if(null===mo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===yo?vo.memoizedState:yo.next;if(null!==t)yo=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===yo?vo.memoizedState=yo=e:yo=yo.next=e}return yo}function Co(e,t){return"function"===typeof t?t(e):t}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((po&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,vo.lanes|=f,Ms|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(bu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Ms|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ao(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(bu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ro(){}function Do(e,t){var n=vo,r=To(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,bu=!0),r=r.queue,Go(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,jo(9,Oo.bind(null,n,r,i,t),void 0,null),null===Ns)throw Error(a(349));0!==(30&po)||Po(n,t,i)}return i}function Po(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Fo(e){var t=Na(e,1);null!==t&&nc(t,e,1,-1)}function Uo(e){var t=Eo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,vo,e),[t.memoizedState,e]}function jo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return To().memoizedState}function Bo(e,t,n,r){var i=Eo();vo.flags|=e,i.memoizedState=jo(1|t,n,void 0,void 0===r?null:r)}function zo(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==r&&_o(r,o.deps))return void(i.memoizedState=jo(t,n,a,r))}vo.flags|=e,i.memoizedState=jo(1|t,n,a,r)}function qo(e,t){return Bo(8390656,8,e,t)}function Go(e,t){return zo(2048,8,e,t)}function Ko(e,t){return zo(4,2,e,t)}function Ho(e,t){return zo(4,4,e,t)}function Wo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4,4,Wo.bind(null,t,e),n)}function Yo(){}function $o(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,bu=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),vo.lanes|=n,Ms|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function eu(){return To().memoizedState}function tu(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ca(e,t,n,r))){nc(n,e,r,ec()),au(n,t,r)}}function nu(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Ta(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(nc(n,e,r,i=ec()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function iu(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Sa,useCallback:xo,useContext:xo,useEffect:xo,useImperativeHandle:xo,useInsertionEffect:xo,useLayoutEffect:xo,useMemo:xo,useReducer:xo,useRef:xo,useState:xo,useDebugValue:xo,useDeferredValue:xo,useTransition:xo,useMutableSource:xo,useSyncExternalStore:xo,useId:xo,unstable_isNewReconciler:!1},uu={readContext:Sa,useCallback:function(e,t){return Eo().memoizedState=[e,void 0===t?null:t],e},useContext:Sa,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4194308,4,Wo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bo(4,2,e,t)},useMemo:function(e,t){var n=Eo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Eo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Eo().memoizedState=e},useState:Uo,useDebugValue:Yo,useDeferredValue:function(e){return Eo().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=Zo.bind(null,e[1]),Eo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=Eo();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ns)throw Error(a(349));0!==(30&po)||Po(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,jo(9,Oo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Eo(),t=Ns.identifierPrefix;if(ia){var n=Xi;t=":"+t+"R"+(n=($i&~(1<<32-ot($i)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Sa,useCallback:$o,useContext:Sa,useEffect:Go,useImperativeHandle:Qo,useInsertionEffect:Ko,useLayoutEffect:Ho,useMemo:Xo,useReducer:No,useRef:Vo,useState:function(){return No(Co)},useDebugValue:Yo,useDeferredValue:function(e){return Jo(To(),mo.memoizedState,e)},useTransition:function(){return[No(Co)[0],To().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Do,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Sa,useCallback:$o,useContext:Sa,useEffect:Go,useImperativeHandle:Qo,useInsertionEffect:Ko,useLayoutEffect:Ho,useMemo:Xo,useReducer:Ao,useRef:Vo,useState:function(){return Ao(Co)},useDebugValue:Yo,useDeferredValue:function(e){var t=To();return null===mo?t.memoizedState=e:Jo(t,mo.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],To().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Do,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function pu(e,t,n){(n=Pa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Gs||(Gs=!0,Ks=r),hu(0,t)},n}function vu(e,t,n){(n=Pa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hu(0,t),"function"!==typeof r&&(null===Hs?Hs=new Set([this]):Hs.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function yu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Pa(-1,1)).tag=2,Oa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=b.ReactCurrentOwner,bu=!1;function wu(e,t,n,r){t.child=null===e?Xa(t,null,n,r):$a(t,e.child,n,r)}function xu(e,t,n,r,i){n=n.render;var a=t.ref;return Ia(t,i),r=Io(e,t,n,r,a,i),n=So(),null===e||bu?(ia&&n&&ea(t),t.flags|=1,wu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gu(e,t,i))}function _u(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Dc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Oc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Iu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Gu(e,t,i)}return t.flags|=1,(e=Pc(a,r)).ref=t.ref,e.return=t,t.child=e}function Iu(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(bu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Gu(e,t,i);0!==(131072&e.flags)&&(bu=!0)}}return Tu(e,t,n,r,i)}function Su(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ei(Ps,Ds),Ds|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ei(Ps,Ds),Ds|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ei(Ps,Ds),Ds|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ei(Ps,Ds),Ds|=r;return wu(e,t,i,n),t.child}function Eu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Tu(e,t,n,r,i){var a=Di(n)?Ai:Ci.current;return a=Ri(t,a),Ia(t,i),n=Io(e,t,n,r,a,i),r=So(),null===e||bu?(ia&&r&&ea(t),t.flags|=1,wu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gu(e,t,i))}function Cu(e,t,n,r,i){if(Di(n)){var a=!0;Mi(t)}else a=!1;if(Ia(t,i),null===t.stateNode)qu(e,t),qa(t,n,r),Ka(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Sa(c):c=Ri(t,c=Di(n)?Ai:Ci.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Ga(t,o,r,c),Aa=!1;var h=t.memoizedState;o.state=h,Fa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ni.current||Aa?("function"===typeof l&&(Va(t,n,l,r),s=t.memoizedState),(u=Aa||za(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Da(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ma(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Sa(s):s=Ri(t,s=Di(n)?Ai:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&Ga(t,o,r,s),Aa=!1,h=t.memoizedState,o.state=h,Fa(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Ni.current||Aa?("function"===typeof d&&(Va(t,n,d,r),p=t.memoizedState),(c=Aa||za(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Nu(e,t,n,r,a,i)}function Nu(e,t,n,r,i,a){Eu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Gu(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=$a(t,e.child,null,a),t.child=$a(t,null,u,a)):wu(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Au(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),ro(e,t.containerInfo)}function Ru(e,t,n,r,i){return da(),pa(i),t.flags|=256,wu(e,t,n,r),t.child}var Du,Pu,Ou,Lu={dehydrated:null,treeContext:null,retryLane:0};function Mu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fu(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ei(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Mc(s,i,0,null),e=Lc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Mu(n),t.memoizedState=Lu,e):Uu(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,ju(e,t,u,r=fu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Mc({mode:"visible",children:r.children},i,0,null),(o=Lc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&$a(t,e.child,null,u),t.child.memoizedState=Mu(u),t.memoizedState=Lu,o);if(0===(1&t.mode))return ju(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,ju(e,t,u,r=fu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),bu||s){if(null!==(r=Ns)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Na(e,i),nc(r,e,i,-1))}return vc(),ju(e,t,u,r=fu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Wi[Qi++]=$i,Wi[Qi++]=Xi,Wi[Qi++]=Yi,$i=e.id,Xi=e.overflow,Yi=t),(t=Uu(t,r.children)).flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Pc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Pc(r,u):(u=Lc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Mu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Lu,i}return e=(u=e.child).sibling,i=Pc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Uu(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function ju(e,t,n,r){return null!==r&&pa(r),$a(t,e.child,null,n),(e=Uu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Vu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),_a(e.return,t,n)}function Bu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function zu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(wu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Vu(e,n,t);else if(19===e.tag)Vu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ei(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Bu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Bu(t,!0,n,null,a);break;case"together":Bu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qu(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Gu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ms|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Pc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Pc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ku(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Hu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Wu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hu(t),null;case 1:case 17:return Di(t.type)&&Pi(),Hu(t),null;case 3:return r=t.stateNode,io(),Si(Ni),Si(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(oc(aa),aa=null))),Hu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Pu(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Hu(t),null}if(e=no(Za.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":$(r,o),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},jr("invalid",r);break;case"textarea":ie(r,o),jr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&jr("scroll",r)}switch(n){case"input":H(r),Z(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,Du(e,t),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":jr("cancel",e),jr("close",e),i=r;break;case"iframe":case"object":case"embed":jr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],e);i=r;break;case"source":jr("error",e),i=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),i=r;break;case"details":jr("toggle",e),i=r;break;case"input":$(e,r),i=Y(e,r),jr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),jr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),jr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&jr("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":H(e),Z(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+G(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Hu(t),null;case 6:if(e&&null!=t.stateNode)Ou(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Hu(t),null;case 13:if(Si(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Hu(t),o=!1}else null!==aa&&(oc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Os&&(Os=3):vc())),null!==t.updateQueue&&(t.flags|=4),Hu(t),null);case 4:return io(),null===e&&zr(t.stateNode.containerInfo),Hu(t),null;case 10:return xa(t.type._context),Hu(t),null;case 19:if(Si(uo),null===(o=t.memoizedState))return Hu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Ku(o,!1);else{if(0!==Os||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Ku(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ei(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>zs&&(t.flags|=128,r=!0,Ku(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ku(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Hu(t),null}else 2*Xe()-o.renderingStartTime>zs&&1073741824!==n&&(t.flags|=128,r=!0,Ku(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=uo.current,Ei(uo,r?1&n|2:1&n),t):(Hu(t),null);case 22:case 23:return fc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ds)&&(Hu(t),6&t.subtreeFlags&&(t.flags|=8192)):Hu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Qu(e,t){switch(ta(t),t.tag){case 1:return Di(t.type)&&Pi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Si(Ni),Si(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Si(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Si(uo),null;case 4:return io(),null;case 10:return xa(t.type._context),null;case 22:case 23:return fc(),null;default:return null}}Du=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Pu=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&jr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Ou=function(e,t,n,r){n!==r&&(t.flags|=4)};var Yu=!1,$u=!1,Xu="function"===typeof WeakSet?WeakSet:Set,Ju=null;function Zu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ic(e,t,r)}else n.current=null}function es(e,t,n){try{n()}catch(r){Ic(e,t,r)}}var ts=!1;function ns(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&es(t,n,a)}i=i.next}while(i!==r)}}function rs(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function is(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function as(e){var t=e.alternate;null!==t&&(e.alternate=null,as(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function os(e){return 5===e.tag||3===e.tag||4===e.tag}function us(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||os(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ss(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ss(e,t,n),e=e.sibling;null!==e;)ss(e,t,n),e=e.sibling}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}var ls=null,fs=!1;function hs(e,t,n){for(n=n.child;null!==n;)ds(e,t,n),n=n.sibling}function ds(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:$u||Zu(n,t);case 6:var r=ls,i=fs;ls=null,hs(e,t,n),fs=i,null!==(ls=r)&&(fs?(e=ls,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ls.removeChild(n.stateNode));break;case 18:null!==ls&&(fs?(e=ls,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),zt(e)):si(ls,n.stateNode));break;case 4:r=ls,i=fs,ls=n.stateNode.containerInfo,fs=!0,hs(e,t,n),ls=r,fs=i;break;case 0:case 11:case 14:case 15:if(!$u&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&es(n,t,o),i=i.next}while(i!==r)}hs(e,t,n);break;case 1:if(!$u&&(Zu(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ic(n,t,u)}hs(e,t,n);break;case 21:hs(e,t,n);break;case 22:1&n.mode?($u=(r=$u)||null!==n.memoizedState,hs(e,t,n),$u=r):hs(e,t,n);break;default:hs(e,t,n)}}function ps(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xu),t.forEach((function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function vs(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:ls=s.stateNode,fs=!1;break e;case 3:case 4:ls=s.stateNode.containerInfo,fs=!0;break e}s=s.return}if(null===ls)throw Error(a(160));ds(o,u,i),ls=null,fs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Ic(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ms(t,e),t=t.sibling}function ms(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vs(t,e),ys(e),4&r){try{ns(3,e,e.return),rs(3,e)}catch(m){Ic(e,e.return,m)}try{ns(5,e,e.return)}catch(m){Ic(e,e.return,m)}}break;case 1:vs(t,e),ys(e),512&r&&null!==n&&Zu(n,n.return);break;case 5:if(vs(t,e),ys(e),512&r&&null!==n&&Zu(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(m){Ic(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&X(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?me(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(s){case"input":J(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(m){Ic(e,e.return,m)}}break;case 6:if(vs(t,e),ys(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Ic(e,e.return,m)}}break;case 3:if(vs(t,e),ys(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(m){Ic(e,e.return,m)}break;case 4:default:vs(t,e),ys(e);break;case 13:vs(t,e),ys(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Bs=Xe())),4&r&&ps(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?($u=(l=$u)||f,vs(t,e),$u=l):vs(t,e),ys(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Ju=e,f=e.child;null!==f;){for(h=Ju=f;null!==Ju;){switch(p=(d=Ju).child,d.tag){case 0:case 11:case 14:case 15:ns(4,d,d.return);break;case 1:Zu(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){Ic(r,n,m)}}break;case 5:Zu(d,d.return);break;case 22:if(null!==d.memoizedState){ws(h);continue}}null!==p?(p.return=d,Ju=p):ws(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=h.stateNode,u=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(m){Ic(e,e.return,m)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(m){Ic(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:vs(t,e),ys(e),4&r&&ps(e);case 21:}}function ys(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(os(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cs(e,us(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ss(e,us(e),o);break;default:throw Error(a(161))}}catch(u){Ic(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function gs(e,t,n){Ju=e,ks(e,t,n)}function ks(e,t,n){for(var r=0!==(1&e.mode);null!==Ju;){var i=Ju,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Yu;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||$u;u=Yu;var c=$u;if(Yu=o,($u=s)&&!c)for(Ju=i;null!==Ju;)s=(o=Ju).child,22===o.tag&&null!==o.memoizedState?xs(i):null!==s?(s.return=o,Ju=s):xs(i);for(;null!==a;)Ju=a,ks(a,t,n),a=a.sibling;Ju=i,Yu=u,$u=c}bs(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Ju=a):bs(e)}}function bs(e){for(;null!==Ju;){var t=Ju;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$u||rs(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!$u)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ua(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ua(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(a(163))}$u||512&t.flags&&is(t)}catch(d){Ic(t,t.return,d)}}if(t===e){Ju=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ju=n;break}Ju=t.return}}function ws(e){for(;null!==Ju;){var t=Ju;if(t===e){Ju=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ju=n;break}Ju=t.return}}function xs(e){for(;null!==Ju;){var t=Ju;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rs(4,t)}catch(s){Ic(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Ic(t,i,s)}}var a=t.return;try{is(t)}catch(s){Ic(t,a,s)}break;case 5:var o=t.return;try{is(t)}catch(s){Ic(t,o,s)}}}catch(s){Ic(t,t.return,s)}if(t===e){Ju=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Ju=u;break}Ju=t.return}}var _s,Is=Math.ceil,Ss=b.ReactCurrentDispatcher,Es=b.ReactCurrentOwner,Ts=b.ReactCurrentBatchConfig,Cs=0,Ns=null,As=null,Rs=0,Ds=0,Ps=Ii(0),Os=0,Ls=null,Ms=0,Fs=0,Us=0,js=null,Vs=null,Bs=0,zs=1/0,qs=null,Gs=!1,Ks=null,Hs=null,Ws=!1,Qs=null,Ys=0,$s=0,Xs=null,Js=-1,Zs=0;function ec(){return 0!==(6&Cs)?Xe():-1!==Js?Js:Js=Xe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Cs)&&0!==Rs?Rs&-Rs:null!==va.transition?(0===Zs&&(Zs=vt()),Zs):0!==(e=kt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function nc(e,t,n,r){if(50<$s)throw $s=0,Xs=null,Error(a(185));yt(e,n,r),0!==(2&Cs)&&e===Ns||(e===Ns&&(0===(2&Cs)&&(Fs|=n),4===Os&&uc(e,Rs)),rc(e,r),1===n&&0===Cs&&0===(1&t.mode)&&(zs=Xe()+500,ji&&zi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===Ns?Rs:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){ji=!0,Bi(e)}(sc.bind(null,e)):Bi(sc.bind(null,e)),oi((function(){0===(6&Cs)&&zi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Js=-1,Zs=0,0!==(6&Cs))throw Error(a(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=ht(e,e===Ns?Rs:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var i=Cs;Cs|=2;var o=pc();for(Ns===e&&Rs===t||(qs=null,zs=Xe()+500,hc(e,t));;)try{gc();break}catch(s){dc(e,s)}wa(),Ss.current=o,Cs=i,null!==As?t=0:(Ns=null,Rs=0,t=Os)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ac(e,i))),1===t)throw n=Ls,hc(e,0),uc(e,r),rc(e,Xe()),n;if(6===t)uc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mc(e,r))&&(0!==(o=pt(e))&&(r=o,t=ac(e,o))),1===t))throw n=Ls,hc(e,0),uc(e,r),rc(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:wc(e,Vs,qs);break;case 3:if(uc(e,r),(130023424&r)===r&&10<(t=Bs+500-Xe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wc.bind(null,e,Vs,qs),t);break}wc(e,Vs,qs);break;case 4:if(uc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Is(r/1960))-r)){e.timeoutHandle=ri(wc.bind(null,e,Vs,qs),r);break}wc(e,Vs,qs);break;default:throw Error(a(329))}}}return rc(e,Xe()),e.callbackNode===n?ic.bind(null,e):null}function ac(e,t){var n=js;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=Vs,Vs=n,null!==t&&oc(t)),e}function oc(e){null===Vs?Vs=e:Vs.push.apply(Vs,e)}function uc(e,t){for(t&=~Us,t&=~Fs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function sc(e){if(0!==(6&Cs))throw Error(a(327));xc();var t=ht(e,0);if(0===(1&t))return rc(e,Xe()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Ls,hc(e,0),uc(e,t),rc(e,Xe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Vs,qs),rc(e,Xe()),null}function cc(e,t){var n=Cs;Cs|=1;try{return e(t)}finally{0===(Cs=n)&&(zs=Xe()+500,ji&&zi())}}function lc(e){null!==Qs&&0===Qs.tag&&0===(6&Cs)&&xc();var t=Cs;Cs|=1;var n=Ts.transition,r=kt;try{if(Ts.transition=null,kt=1,e)return e()}finally{kt=r,Ts.transition=n,0===(6&(Cs=t))&&zi()}}function fc(){Ds=Ps.current,Si(Ps)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==As)for(n=As.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Pi();break;case 3:io(),Si(Ni),Si(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Si(uo);break;case 10:xa(r.type._context);break;case 22:case 23:fc()}n=n.return}if(Ns=e,As=e=Pc(e.current,null),Rs=Ds=t,Os=0,Ls=null,Us=Fs=Ms=0,Vs=js=null,null!==Ea){for(t=0;t<Ea.length;t++)if(null!==(r=(n=Ea[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ea=null}return e}function dc(e,t){for(;;){var n=As;try{if(wa(),fo.current=ou,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,yo=mo=vo=null,ko=!1,bo=0,Es.current=null,null===n||null===n.return){Os=1,Ls=t,As=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Rs,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=yu(u);if(null!==p){p.flags&=-257,gu(p,u,s,0,t),1&p.mode&&mu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}if(0===(1&t)){mu(o,l,t),vc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var y=yu(u);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),gu(y,u,s,0,t),pa(lu(c,s));break e}}o=c=lu(c,s),4!==Os&&(Os=2),null===js?js=[o]:js.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,pu(0,c,t));break e;case 1:s=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Hs||!Hs.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vu(o,s,t));break e}}o=o.return}while(null!==o)}bc(n)}catch(b){t=b,As===n&&null!==n&&(As=n=n.return);continue}break}}function pc(){var e=Ss.current;return Ss.current=ou,null===e?ou:e}function vc(){0!==Os&&3!==Os&&2!==Os||(Os=4),null===Ns||0===(268435455&Ms)&&0===(268435455&Fs)||uc(Ns,Rs)}function mc(e,t){var n=Cs;Cs|=2;var r=pc();for(Ns===e&&Rs===t||(qs=null,hc(e,t));;)try{yc();break}catch(i){dc(e,i)}if(wa(),Cs=n,Ss.current=r,null!==As)throw Error(a(261));return Ns=null,Rs=0,Os}function yc(){for(;null!==As;)kc(As)}function gc(){for(;null!==As&&!Ye();)kc(As)}function kc(e){var t=_s(e.alternate,e,Ds);e.memoizedProps=e.pendingProps,null===t?bc(e):As=t,Es.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Wu(n,t,Ds)))return void(As=n)}else{if(null!==(n=Qu(n,t)))return n.flags&=32767,void(As=n);if(null===e)return Os=6,void(As=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(As=t);As=t=e}while(null!==t);0===Os&&(Os=5)}function wc(e,t,n){var r=kt,i=Ts.transition;try{Ts.transition=null,kt=1,function(e,t,n,r){do{xc()}while(null!==Qs);if(0!==(6&Cs))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Ns&&(As=Ns=null,Rs=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ws||(Ws=!0,Nc(tt,(function(){return xc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Ts.transition,Ts.transition=null;var u=kt;kt=1;var s=Cs;Cs|=4,Es.current=null,function(e,t){if(ei=Gt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Gt=!1,Ju=t;null!==Ju;)if(e=(t=Ju).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ju=e;else for(;null!==Ju;){t=Ju;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,y=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){Ic(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Ju=e;break}Ju=t.return}v=ts,ts=!1}(e,n),ms(n,e),pr(ti),Gt=!!ei,ti=ei=null,e.current=n,gs(n,e,i),$e(),Cs=s,kt=u,Ts.transition=o}else e.current=n;if(Ws&&(Ws=!1,Qs=e,Ys=i),0===(o=e.pendingLanes)&&(Hs=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((i=t[n]).value,{componentStack:i.stack,digest:i.digest});if(Gs)throw Gs=!1,e=Ks,Ks=null,e;0!==(1&Ys)&&0!==e.tag&&xc(),0!==(1&(o=e.pendingLanes))?e===Xs?$s++:($s=0,Xs=e):$s=0,zi()}(e,t,n,r)}finally{Ts.transition=i,kt=r}return null}function xc(){if(null!==Qs){var e=bt(Ys),t=Ts.transition,n=kt;try{if(Ts.transition=null,kt=16>e?16:e,null===Qs)var r=!1;else{if(e=Qs,Qs=null,Ys=0,0!==(6&Cs))throw Error(a(331));var i=Cs;for(Cs|=4,Ju=e.current;null!==Ju;){var o=Ju,u=o.child;if(0!==(16&Ju.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Ju=l;null!==Ju;){var f=Ju;switch(f.tag){case 0:case 11:case 15:ns(8,f,o)}var h=f.child;if(null!==h)h.return=f,Ju=h;else for(;null!==Ju;){var d=(f=Ju).sibling,p=f.return;if(as(f),f===l){Ju=null;break}if(null!==d){d.return=p,Ju=d;break}Ju=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Ju=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Ju=u;else e:for(;null!==Ju;){if(0!==(2048&(o=Ju).flags))switch(o.tag){case 0:case 11:case 15:ns(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Ju=g;break e}Ju=o.return}}var k=e.current;for(Ju=k;null!==Ju;){var b=(u=Ju).child;if(0!==(2064&u.subtreeFlags)&&null!==b)b.return=u,Ju=b;else e:for(u=k;null!==Ju;){if(0!==(2048&(s=Ju).flags))try{switch(s.tag){case 0:case 11:case 15:rs(9,s)}}catch(x){Ic(s,s.return,x)}if(s===u){Ju=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Ju=w;break e}Ju=s.return}}if(Cs=i,zi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(x){}r=!0}return r}finally{kt=n,Ts.transition=t}}return!1}function _c(e,t,n){e=Oa(e,t=pu(0,t=lu(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),rc(e,t))}function Ic(e,t,n){if(3===e.tag)_c(e,e,n);else for(;null!==t;){if(3===t.tag){_c(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hs||!Hs.has(r))){t=Oa(t,e=vu(t,e=lu(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function Sc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Ns===e&&(Rs&n)===n&&(4===Os||3===Os&&(130023424&Rs)===Rs&&500>Xe()-Bs?hc(e,0):Us|=n),rc(e,t)}function Ec(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=ec();null!==(e=Na(e,t))&&(yt(e,t,n),rc(e,n))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ec(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Ec(e,n)}function Nc(e,t){return We(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,r){return new Ac(e,t,n,r)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pc(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Oc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Dc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case _:return Lc(n.children,i,o,t);case I:u=8,i|=8;break;case S:return(e=Rc(12,n,t,2|i)).elementType=S,e.lanes=o,e;case N:return(e=Rc(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=Rc(19,n,t,i)).elementType=A,e.lanes=o,e;case P:return Mc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:u=10;break e;case T:u=9;break e;case C:u=11;break e;case R:u=14;break e;case D:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Rc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lc(e,t,n,r){return(e=Rc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Rc(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,r,i,a,o,u,s){return e=new jc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Rc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ra(a),e}function Bc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function zc(e){if(!e)return Ti;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Di(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Di(n))return Li(e,n,t)}return t}function qc(e,t,n,r,i,a,o,u,s){return(e=Vc(n,r,!0,e,0,a,0,u,s)).context=zc(null),n=e.current,(a=Pa(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Oa(n,a,i),e.current.lanes=i,yt(e,i,r),rc(e,r),e}function Gc(e,t,n,r){var i=t.current,a=ec(),o=tc(i);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Pa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Oa(i,t,o))&&(nc(e,i,o,a),La(e,i,o)),o}function Kc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}_s=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)bu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bu=!1,function(e,t,n){switch(t.tag){case 3:Au(t),da();break;case 5:ao(t);break;case 1:Di(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ei(ya,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ei(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fu(e,t,n):(Ei(uo,1&uo.current),null!==(e=Gu(e,t,n))?e.sibling:null);Ei(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return zu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ei(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Su(e,t,n)}return Gu(e,t,n)}(e,t,n);bu=0!==(131072&e.flags)}else bu=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qu(e,t),e=t.pendingProps;var i=Ri(t,Ci.current);Ia(t,n),i=Io(null,t,r,e,i,n);var o=So();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Di(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ra(t),i.updater=Ba,t.stateNode=i,i._reactInternals=t,Ka(t,r,e,n),t=Nu(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),wu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qu(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===R)return 14}return 2}(r),e=ma(r,e),i){case 0:t=Tu(null,t,r,e,n);break e;case 1:t=Cu(null,t,r,e,n);break e;case 11:t=xu(null,t,r,e,n);break e;case 14:t=_u(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Tu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(Au(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Da(e,t),Fa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ru(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Ru(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Xa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Gu(e,t,n);break e}wu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Eu(e,t),wu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Fu(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=$a(t,null,r,n):wu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return wu(e,t,t.pendingProps,n),t.child;case 8:case 12:return wu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Ei(ya,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ni.current){t=Gu(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Pa(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),_a(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),_a(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}wu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ia(t,n),r=r(i=Sa(i)),t.flags|=1,wu(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),_u(e,t,r,i=ma(r.type,i),n);case 15:return Iu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),qu(e,t),t.tag=1,Di(r)?(e=!0,Mi(t)):e=!1,Ia(t,n),qa(t,r,i),Ka(t,r,i,n),Nu(null,t,r,!0,e,n);case 19:return zu(e,t,n);case 22:return Su(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Kc(o);u.call(e)}}Gc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Kc(o);a.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,zr(8===e.nodeType?e.parentNode:e),lc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Kc(s);u.call(e)}}var s=Vc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=s,e[pi]=s.current,zr(8===e.nodeType?e.parentNode:e),lc((function(){Gc(t,s,n,r)})),s}(n,t,e,i,r);return Kc(o)}$c.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Gc(e,t,null,null)},$c.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;lc((function(){Gc(null,e,null,null)})),t[pi]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=It();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),rc(t,Xe()),0===(6&Cs)&&(zs=Xe()+500,zi()))}break;case 13:lc((function(){var t=Na(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Wc(e,1)}},xt=function(e){if(13===e.tag){var t=Na(e,134217728);if(null!==t)nc(t,e,134217728,ec());Wc(e,134217728)}},_t=function(e){if(13===e.tag){var t=tc(e),n=Na(e,t);if(null!==n)nc(n,e,t,ec());Wc(e,t)}},It=function(){return kt},St=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},xe=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));W(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=cc,Ne=lc;var tl={usingClientEntryPoint:!1,Events:[ki,bi,wi,Ee,Te,cc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(a(200));return Bc(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return lc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $c(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(a(40));return!!e._reactRootContainer&&(lc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},164:function(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.jsx=c,t.jsxs=c},117:function(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var b=k.prototype=new g;b.constructor=k,v(b,y.prototype),b.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,_={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,i)&&!I.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:_.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(E(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=N(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=N(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},P={transition:null},O={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:P,ReactCurrentOwner:_};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=_.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)x.call(t,c)&&!I.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){e.exports=n(117)},184:function(e,t,n){e.exports=n(374)},813:function(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(m=!1,b(e),!v)if(null!==r(c))v=!0,P(x);else{var t=r(l);null!==t&&O(w,t.startTime-e)}}function x(e,n){v=!1,m&&(m=!1,g(E),E=-1),p=!0;var a=d;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!N());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&O(w,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,I=!1,S=null,E=-1,T=5,C=-1;function N(){return!(t.unstable_now()-C<T)}function A(){if(null!==S){var e=t.unstable_now();C=e;var n=!0;try{n=S(!0,e)}finally{n?_():(I=!1,S=null)}}else I=!1}if("function"===typeof k)_=function(){k(A)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,D=R.port2;R.port1.onmessage=A,_=function(){D.postMessage(null)}}else _=function(){y(A,0)};function P(e){S=e,I||(I=!0,_())}function O(e,n){E=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,P(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(m?(g(E),E=-1):m=!0,O(w,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,P(x))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/react-olx-project-./",function(){var e={};n.r(e),n.d(e,{FirebaseError:function(){return tt},SDK_VERSION:function(){return pn},_DEFAULT_ENTRY_NAME:function(){return en},_addComponent:function(){return an},_addOrOverwriteComponent:function(){return on},_apps:function(){return nn},_clearComponents:function(){return ln},_components:function(){return rn},_getProvider:function(){return sn},_registerComponent:function(){return un},_removeServiceInstance:function(){return cn},deleteApp:function(){return gn},getApp:function(){return mn},getApps:function(){return yn},initializeApp:function(){return vn},onLog:function(){return wn},registerVersion:function(){return bn},setLogLevel:function(){return xn}});var t,r=n(791),i=n(164);function a(e){if(Array.isArray(e))return e}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){if(e){if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){return a(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||u(e,t)||s()}function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));var f=function(e){return e};var h="beforeunload",d="popstate";function p(e){e.preventDefault(),e.returnValue=""}function v(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function m(){return Math.random().toString(36).substr(2,8)}function y(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function g(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}var k=(0,r.createContext)(null);var b=(0,r.createContext)(null);var w=(0,r.createContext)({outlet:null,matches:[]});function x(e,t){if(!e)throw new Error(t)}function _(e,t,n){void 0===n&&(n="/");var r=R(("string"===typeof t?g(t):t).pathname||"/",n);if(null==r)return null;var i=I(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=C(i[o],r);return a}function I(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,i){var a={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(a.relativePath.startsWith(r)||x(!1),a.relativePath=a.relativePath.slice(r.length));var o=D([r,a.relativePath]),u=n.concat(a);e.children&&e.children.length>0&&(!0===e.index&&x(!1),I(e.children,t,u,o)),(null!=e.path||e.index)&&t.push({path:o,score:T(o,e.index),routesMeta:u})})),t}var S=/^:\w+$/,E=function(e){return"*"===e};function T(e,t){var n=e.split("/"),r=n.length;return n.some(E)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!E(e)})).reduce((function(e,t){return e+(S.test(t)?3:""===t?1:10)}),r)}function C(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=N({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var f=u.route;a.push({params:r,pathname:D([i,l.pathname]),pathnameBase:P(D([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=D([i,l.pathnameBase]))}return a}function N(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=n?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)";return[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=c(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],s=u.replace(/(.)\/+$/,"$1"),l=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=l[n]||"";s=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return e}}(l[n]||""),e}),{}),pathname:u,pathnameBase:s,pattern:e}}function A(e,t,n){var r,i="string"===typeof e?g(e):e,a=""===e||""===i.pathname?"/":i.pathname;if(null==a)r=n;else{var o=t.length-1;if(a.startsWith("..")){for(var u=a.split("/");".."===u[0];)u.shift(),o-=1;i.pathname=u.join("/")}r=o>=0?t[o]:"/"}var s=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?g(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:O(a),hash:L(u)}}(i,r);return a&&"/"!==a&&a.endsWith("/")&&!s.pathname.endsWith("/")&&(s.pathname+="/"),s}function R(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=e.charAt(t.length);return n&&"/"!==n?null:e.slice(t.length)||"/"}var D=function(e){return e.join("/").replace(/\/\/+/g,"/")},P=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},O=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},L=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""};function M(e){F()||x(!1);var t=(0,r.useContext)(k),n=t.basename,i=t.navigator,a=V(e),o=a.hash,u=a.pathname,s=a.search,c=u;if("/"!==n){var l=function(e){return""===e||""===e.pathname?"/":"string"===typeof e?g(e).pathname:e.pathname}(e),f=null!=l&&l.endsWith("/");c="/"===u?n+(f?"/":""):D([n,u])}return i.createHref({pathname:c,search:s,hash:o})}function F(){return null!=(0,r.useContext)(b)}function U(){return F()||x(!1),(0,r.useContext)(b).location}function j(){F()||x(!1);var e=(0,r.useContext)(k),t=e.basename,n=e.navigator,i=(0,r.useContext)(w).matches,a=U().pathname,o=JSON.stringify(i.map((function(e){return e.pathnameBase}))),u=(0,r.useRef)(!1);(0,r.useEffect)((function(){u.current=!0}));var s=(0,r.useCallback)((function(e,r){if(void 0===r&&(r={}),u.current)if("number"!==typeof e){var i=A(e,JSON.parse(o),a);"/"!==t&&(i.pathname=D([t,i.pathname])),(r.replace?n.replace:n.push)(i,r.state)}else n.go(e)}),[t,n,o,a]);return s}function V(e){var t=(0,r.useContext)(w).matches,n=U().pathname,i=JSON.stringify(t.map((function(e){return e.pathnameBase})));return(0,r.useMemo)((function(){return A(e,JSON.parse(i),n)}),[e,i,n])}function B(e,t){return void 0===t&&(t=[]),null==e?null:e.reduceRight((function(n,i,a){return(0,r.createElement)(w.Provider,{children:void 0!==i.route.element?i.route.element:n,value:{outlet:n,matches:t.concat(e.slice(0,a+1))}})}),null)}function z(e){x(!1)}function q(e){var n=e.basename,i=void 0===n?"/":n,a=e.children,o=void 0===a?null:a,u=e.location,s=e.navigationType,c=void 0===s?t.Pop:s,l=e.navigator,f=e.static,h=void 0!==f&&f;F()&&x(!1);var d=P(i),p=(0,r.useMemo)((function(){return{basename:d,navigator:l,static:h}}),[d,l,h]);"string"===typeof u&&(u=g(u));var v=u,m=v.pathname,y=void 0===m?"/":m,w=v.search,_=void 0===w?"":w,I=v.hash,S=void 0===I?"":I,E=v.state,T=void 0===E?null:E,C=v.key,N=void 0===C?"default":C,A=(0,r.useMemo)((function(){var e=R(y,d);return null==e?null:{pathname:e,search:_,hash:S,state:T,key:N}}),[d,y,_,S,T,N]);return null==A?null:(0,r.createElement)(k.Provider,{value:p},(0,r.createElement)(b.Provider,{children:o,value:{location:A,navigationType:c}}))}function G(e){var t=e.children,n=e.location;return function(e,t){F()||x(!1);var n,i=(0,r.useContext)(w).matches,a=i[i.length-1],o=a?a.params:{},u=(a&&a.pathname,a?a.pathnameBase:"/"),s=(a&&a.route,U());if(t){var c,l="string"===typeof t?g(t):t;"/"===u||(null==(c=l.pathname)?void 0:c.startsWith(u))||x(!1),n=l}else n=s;var f=n.pathname||"/",h=_(e,{pathname:"/"===u?f:f.slice(u.length)||"/"});return B(h&&h.map((function(e){return Object.assign({},e,{params:Object.assign({},o,e.params),pathname:D([u,e.pathname]),pathnameBase:"/"===e.pathnameBase?u:D([u,e.pathnameBase])})})),i)}(K(t),n)}function K(e){var t=[];return r.Children.forEach(e,(function(e){if((0,r.isValidElement)(e))if(e.type!==r.Fragment){e.type!==z&&x(!1);var n={caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path};e.props.children&&(n.children=K(e.props.children)),t.push(n)}else t.push.apply(t,K(e.props.children))})),t}var H=n.p+"static/media/olx-logo.b3f099a2fe7978c70944.png",W=n(184),Q=(0,r.createContext)(null),Y=(0,r.createContext)(null);var $=function(e){var t=e.children,n=c((0,r.useState)(null),2),i=n[0],a=n[1];return(0,W.jsx)(Y.Provider,{value:{user:i,setUser:a},children:t})};function X(){var e=j(),t=c((0,r.useState)(""),2),n=t[0],i=t[1],a=c((0,r.useState)(""),2),o=a[0],u=a[1],s=c((0,r.useState)(""),2),l=s[0],f=s[1],h=c((0,r.useState)(""),2),d=h[0],p=h[1],v=(0,r.useContext)(Q).firebase;return(0,W.jsx)("div",{children:(0,W.jsxs)("div",{className:"signupParentDiv",children:[(0,W.jsx)("img",{width:"200px",height:"200px",src:H}),(0,W.jsxs)("form",{onSubmit:function(t){t.preventDefault(),v.auth().createUserWithEmailAndPassword(o,d).then((function(t){t.user.updateProfile({displayName:n}).then((function(){v.firestore().collection("users").add({id:t.user.uid,username:n,phone:l}).then((function(){e("/login")}))}))}))},children:[(0,W.jsx)("label",{htmlFor:"fname",children:"Username"}),(0,W.jsx)("br",{}),(0,W.jsx)("input",{className:"input",type:"text",value:n,onChange:function(e){return i(e.target.value)},id:"fname",name:"name",defaultValue:"John"}),(0,W.jsx)("br",{}),(0,W.jsx)("label",{htmlFor:"fname",children:"Email"}),(0,W.jsx)("br",{}),(0,W.jsx)("input",{className:"input",type:"email",id:"fname",value:o,onChange:function(e){return u(e.target.value)},name:"email",defaultValue:"John"}),(0,W.jsx)("br",{}),(0,W.jsx)("label",{htmlFor:"lname",children:"Phone"}),(0,W.jsx)("br",{}),(0,W.jsx)("input",{className:"input",type:"number",value:l,onChange:function(e){return f(e.target.value)},id:"lname",name:"phone",defaultValue:"Doe"}),(0,W.jsx)("br",{}),(0,W.jsx)("label",{htmlFor:"lname",children:"Password"}),(0,W.jsx)("br",{}),(0,W.jsx)("input",{className:"input",type:"password",value:d,onChange:function(e){return p(e.target.value)},id:"lname",name:"password",defaultValue:"Doe"}),(0,W.jsx)("br",{}),(0,W.jsx)("br",{}),(0,W.jsx)("button",{children:"Signup"})]}),(0,W.jsx)("a",{children:"Login"})]})})}var J=function(){return(0,W.jsx)("div",{children:(0,W.jsx)(X,{})})};var Z=function(){var e=c((0,r.useState)(""),2),t=e[0],n=e[1],i=c((0,r.useState)(""),2),a=i[0],o=i[1],u=(0,r.useContext)(Q).firebase,s=j();return(0,W.jsx)("div",{children:(0,W.jsxs)("div",{className:"loginParentDiv",children:[(0,W.jsx)("img",{width:"200px",height:"200px",src:H}),(0,W.jsxs)("form",{onSubmit:function(e){e.preventDefault(),u.auth().signInWithEmailAndPassword(t,a).then((function(){s("/")})).catch((function(e){alert(e.message)}))},children:[(0,W.jsx)("label",{htmlFor:"fname",children:"Email"}),(0,W.jsx)("br",{}),(0,W.jsx)("input",{className:"input",type:"email",value:t,onChange:function(e){return n(e.target.value)},id:"fname",name:"email",defaultValue:"John"}),(0,W.jsx)("br",{}),(0,W.jsx)("label",{htmlFor:"lname",children:"Password"}),(0,W.jsx)("br",{}),(0,W.jsx)("input",{className:"input",type:"password",value:a,onChange:function(e){return o(e.target.value)},id:"lname",name:"password",defaultValue:"Doe"}),(0,W.jsx)("br",{}),(0,W.jsx)("br",{}),(0,W.jsx)("button",{children:"Login"})]}),(0,W.jsx)("a",{children:"Signup"})]})})};var ee=function(){return(0,W.jsx)("div",{children:(0,W.jsx)(Z,{})})};function te(){return(0,W.jsx)("svg",{width:"48px",height:"48px",viewBox:"0 0 1024 1024","data-aut-id":"icon",className:!0,fillRule:"evenodd",children:(0,W.jsx)("path",{className:"rui-77aaa",d:"M661.333 256v512h-128v-512h128zM277.333 298.667c117.824 0 213.333 95.531 213.333 213.333s-95.509 213.333-213.333 213.333c-117.824 0-213.333-95.531-213.333-213.333s95.509-213.333 213.333-213.333zM794.496 384l37.504 37.504 37.504-37.504h90.496v90.496l-37.504 37.504 37.504 37.504v90.496h-90.496l-37.504-37.504-37.504 37.504h-90.496v-90.496l37.504-37.504-37.504-37.504v-90.496h90.496zM277.333 426.667c-47.061 0-85.333 38.293-85.333 85.333s38.272 85.333 85.333 85.333c47.061 0 85.333-38.293 85.333-85.333s-38.272-85.333-85.333-85.333z"})})}function ne(e){return(0,W.jsx)("svg",{width:"25px",height:"25px",viewBox:"0 0 1024 1024","data-aut-id":"icon",color:e.color?e.color:"",className:!0,fillRule:"evenodd",children:(0,W.jsx)("path",{className:"rui-77aaa",d:"M448 725.333c-152.917 0-277.333-124.416-277.333-277.333s124.416-277.333 277.333-277.333c152.917 0 277.333 124.416 277.333 277.333s-124.416 277.333-277.333 277.333v0zM884.437 824.107v0.021l-151.915-151.936c48.768-61.781 78.144-139.541 78.144-224.192 0-199.979-162.688-362.667-362.667-362.667s-362.667 162.688-362.667 362.667c0 199.979 162.688 362.667 362.667 362.667 84.629 0 162.411-29.376 224.171-78.144l206.144 206.144h60.352v-60.331l-54.229-54.229z"})})}function re(){return(0,W.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 1024 1024","data-aut-id":"icon",className:!0,fillRule:"evenodd",children:(0,W.jsx)("path",{className:"rui-77aaa",d:"M85.392 277.333h60.331l366.336 366.336 366.336-366.336h60.331v60.331l-408.981 409.003h-35.307l-409.045-409.003z"})})}function ie(){return ie=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ie.apply(this,arguments)}function ae(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var oe=["onClick","reloadDocument","replace","state","target","to"];function ue(e){var n=e.basename,i=e.children,a=e.window,o=(0,r.useRef)();null==o.current&&(o.current=function(e){void 0===e&&(e={});var n=e.window,r=void 0===n?document.defaultView:n,i=r.history;function a(){var e=r.location,t=e.pathname,n=e.search,a=e.hash,o=i.state||{};return[o.idx,f({pathname:t,search:n,hash:a,state:o.usr||null,key:o.key||"default"})]}var o=null;r.addEventListener(d,(function(){if(o)w.call(o),o=null;else{var e=t.Pop,n=a(),r=n[0],i=n[1];if(w.length){if(null!=r){var u=c-r;u&&(o={action:e,location:i,retry:function(){T(-1*u)}},T(u))}}else E(e)}}));var u=t.Pop,s=a(),c=s[0],k=s[1],b=v(),w=v();function x(e){return"string"===typeof e?e:y(e)}function _(e,t){return void 0===t&&(t=null),f(l({pathname:k.pathname,hash:"",search:""},"string"===typeof e?g(e):e,{state:t,key:m()}))}function I(e,t){return[{usr:e.state,key:e.key,idx:t},x(e)]}function S(e,t,n){return!w.length||(w.call({action:e,location:t,retry:n}),!1)}function E(e){u=e;var t=a();c=t[0],k=t[1],b.call({action:u,location:k})}function T(e){i.go(e)}null==c&&(c=0,i.replaceState(l({},i.state,{idx:c}),""));var C={get action(){return u},get location(){return k},createHref:x,push:function e(n,a){var o=t.Push,u=_(n,a);if(S(o,u,(function(){e(n,a)}))){var s=I(u,c+1),l=s[0],f=s[1];try{i.pushState(l,"",f)}catch(h){r.location.assign(f)}E(o)}},replace:function e(n,r){var a=t.Replace,o=_(n,r);if(S(a,o,(function(){e(n,r)}))){var u=I(o,c),s=u[0],l=u[1];i.replaceState(s,"",l),E(a)}},go:T,back:function(){T(-1)},forward:function(){T(1)},listen:function(e){return b.push(e)},block:function(e){var t=w.push(e);return 1===w.length&&r.addEventListener(h,p),function(){t(),w.length||r.removeEventListener(h,p)}}};return C}({window:a}));var u=o.current,s=c((0,r.useState)({action:u.action,location:u.location}),2),k=s[0],b=s[1];return(0,r.useLayoutEffect)((function(){return u.listen(b)}),[u]),(0,r.createElement)(q,{basename:n,children:i,location:k.location,navigationType:k.action,navigator:u})}var se=(0,r.forwardRef)((function(e,t){var n=e.onClick,i=e.reloadDocument,a=e.replace,o=void 0!==a&&a,u=e.state,s=e.target,c=e.to,l=ae(e,oe),f=M(c),h=function(e,t){var n=void 0===t?{}:t,i=n.target,a=n.replace,o=n.state,u=j(),s=U(),c=V(e);return(0,r.useCallback)((function(t){if(0===t.button&&(!i||"_self"===i)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(t)){t.preventDefault();var n=!!a||y(s)===y(c);u(e,{replace:n,state:o})}}),[s,u,c,a,o,i,e])}(c,{replace:o,state:u,target:s});return(0,r.createElement)("a",ie({},l,{href:f,onClick:function(e){n&&n(e),e.defaultPrevented||i||h(e)},ref:t,target:s}))}));function ce(){return(0,W.jsxs)("svg",{width:104,height:48,viewBox:"0 0 1603 768",className:"_3V9PS",children:[(0,W.jsx)(se,{to:"/Create"}),(0,W.jsxs)("g",{children:[(0,W.jsx)("path",{className:"all",d:"M434.442 16.944h718.82c202.72 0 367.057 164.337 367.057 367.058s-164.337 367.057-367.057 367.057h-718.82c-202.721 0-367.058-164.337-367.058-367.058s164.337-367.058 367.058-367.058z"}),(0,W.jsx)("path",{className:"left",d:"M427.241 669.489c-80.917 0-158.59-25.926-218.705-73.004l-0.016-0.014c-69.113-54.119-108.754-131.557-108.754-212.474 0-41.070 9.776-80.712 29.081-117.797 25.058-48.139 64.933-89.278 115.333-118.966l-52.379-67.581c-64.73 38.122-115.955 90.98-148.159 152.845-24.842 47.745-37.441 98.726-37.441 151.499 0 104.027 50.962 203.61 139.799 273.175h0.016c77.312 60.535 177.193 93.887 281.22 93.887h299.699l25.138-40.783-25.138-40.783h-299.698z"}),(0,W.jsx)("path",{className:"top",d:"M1318.522 38.596v0c-45.72-14.369-93.752-21.658-142.762-21.658h-748.511c-84.346 0-165.764 21.683-235.441 62.713l3.118 51.726 49.245 15.865c54.16-31.895 117.452-48.739 183.073-48.739h748.511c38.159 0 75.52 5.657 111.029 16.829v0c44.91 14.111 86.594 37.205 120.526 66.792l66.163-57.68c-43.616-38.010-97.197-67.703-154.957-85.852z"}),(0,W.jsx)("path",{className:"right",d:"M1473.479 124.453l-55.855 9.91-10.307 47.76c61.844 53.929 95.92 125.617 95.92 201.88 0 25.235-3.772 50.26-11.214 74.363-38.348 124.311-168.398 211.129-316.262 211.129h-448.812l25.121 40.783-25.121 40.783h448.812c190.107 0 357.303-111.638 406.613-271.498 9.572-31.009 14.423-63.162 14.423-95.559 0-98.044-43.805-190.216-123.317-259.551z"})]})]})}function le(e){return(0,W.jsx)("svg",{width:"16px",height:"16px",viewBox:"0 0 1024 1024","data-aut-id":"icon",className:!0,fillRule:"evenodd",children:(0,W.jsx)("path",{className:"rui-367TP",d:"M414.898 123.739v291.218h-291.218l-97.014 97.014 97.014 97.131h291.218v291.16l97.073 97.071 97.073-97.071v-291.16h291.16l97.131-97.131-97.131-97.014h-291.16v-291.218l-97.073-97.073z"})})}var fe=function(){var e=j(),t=(0,r.useContext)(Y).user,n=(0,r.useContext)(Q).firebase;return(0,W.jsx)("div",{className:"headerParentDiv",children:(0,W.jsxs)("div",{className:"headerChildDiv",children:[(0,W.jsx)("div",{className:"brandName",children:(0,W.jsx)(te,{})}),(0,W.jsxs)("div",{className:"placeSearch",children:[(0,W.jsx)(ne,{}),(0,W.jsx)("input",{type:"text"}),(0,W.jsx)(re,{})]}),(0,W.jsxs)("div",{className:"productSearch",children:[(0,W.jsx)("div",{className:"input",children:(0,W.jsx)("input",{type:"text",placeholder:"Find car,mobile phone and more..."})}),(0,W.jsx)("div",{className:"searchAction",children:(0,W.jsx)(ne,{color:"#ffffff"})})]}),(0,W.jsxs)("div",{className:"language",children:[(0,W.jsx)("span",{children:" ENGLISH "}),(0,W.jsx)(re,{})]}),(0,W.jsxs)("div",{className:"loginPage",children:[(0,W.jsx)("span",{children:t?"welcome ".concat(t.displayName):"Login"}),(0,W.jsx)("hr",{})]}),t&&(0,W.jsx)("span",{onClick:function(){n.auth().signOut(),e("/login")},children:"Logout"}),(0,W.jsxs)("div",{className:"sellMenu",children:[(0,W.jsx)(ce,{}),(0,W.jsxs)("div",{className:"sellMenuContent",children:[(0,W.jsx)(le,{}),(0,W.jsx)("span",{onClick:function(){e("/create")},children:"SELL"})]})]})]})})},he=function(){var e=(0,r.useContext)(Q).firebase,t=(0,r.useContext)(Y).user,n=j(),i=c((0,r.useState)(""),2),a=i[0],o=i[1],u=c((0,r.useState)(""),2),s=u[0],l=u[1],f=c((0,r.useState)(""),2),h=f[0],d=f[1],p=c((0,r.useState)(null),2),v=p[0],m=p[1],y=new Date,g=e.storage();return(0,W.jsxs)(r.Fragment,{children:[(0,W.jsx)(fe,{}),(0,W.jsx)("card",{children:(0,W.jsxs)("div",{className:"centerDiv",children:[(0,W.jsxs)("form",{children:[(0,W.jsx)("label",{htmlFor:"fname",children:"Name"}),(0,W.jsx)("br",{}),(0,W.jsx)("input",{className:"input",type:"text",id:"fname",value:a,onChange:function(e){return o(e.target.value)},name:"Name",defaultValue:"John"}),(0,W.jsx)("br",{}),(0,W.jsx)("label",{htmlFor:"fname",children:"Category"}),(0,W.jsx)("br",{}),(0,W.jsx)("input",{className:"input",type:"text",value:s,id:"fname",onChange:function(e){return l(e.target.value)},name:"category",defaultValue:"John"}),(0,W.jsx)("br",{}),(0,W.jsx)("label",{htmlFor:"fname",children:"Price"}),(0,W.jsx)("br",{}),(0,W.jsx)("input",{className:"input",type:"number",id:"fname",name:"Price",value:h,onChange:function(e){return d(e.target.value)}}),(0,W.jsx)("br",{})]}),(0,W.jsx)("br",{}),(0,W.jsx)("img",{alt:"Posts",width:"200px",height:"200px",src:v?URL.createObjectURL(v):""}),(0,W.jsxs)("form",{children:[(0,W.jsx)("br",{}),(0,W.jsx)("input",{onChange:function(e){m(e.target.files[0])},type:"file"}),(0,W.jsx)("br",{}),(0,W.jsx)("button",{onClick:function(r){r.preventDefault(),g.ref("/image/".concat(v.name)).put(v).then((function(r){r.ref.getDownloadURL().then((function(r){console.log(r),e.firestore().collection("products").add({name:a,category:s,price:h,url:r,userId:t.uid,createdAt:y.toDateString()}),n("/")}))}))},className:"uploadBtn",children:"upload and Submit"})]})]})})]})},de=function(){return(0,W.jsxs)(r.Fragment,{children:[(0,W.jsx)(fe,{}),(0,W.jsx)(he,{})]})},pe=(0,r.createContext)(null);var ve=function(e){var t=e.children,n=c((0,r.useState)(""),2),i=n[0],a=n[1];return(0,W.jsx)(pe.Provider,{value:{postDetails:i,setPostDetails:a},children:t})};var me=function(){var e=c((0,r.useState)(),2),t=e[0],n=e[1],i=(0,r.useContext)(pe).postDetails,a=(0,r.useContext)(Q).firebase;return(0,r.useEffect)((function(){var e=i.userId;a.firestore().collection("users").where("id","==",e).get().then((function(e){e.forEach((function(e){n(e.data())}))}))})),(0,W.jsxs)("div",{className:"viewParentDiv",children:[(0,W.jsx)("div",{className:"imageShowDiv",children:(0,W.jsx)("img",{src:i.url,alt:""})}),(0,W.jsxs)("div",{className:"rightSection",children:[(0,W.jsxs)("div",{className:"productDetails",children:[(0,W.jsxs)("p",{children:["\u20b9 ",i.price]}),(0,W.jsx)("span",{children:i.name}),(0,W.jsx)("p",{children:i.category}),(0,W.jsx)("span",{children:i.createdAt})]}),t&&(0,W.jsxs)("div",{className:"contactDetails",children:[(0,W.jsx)("p",{children:"seller Details"}),(0,W.jsx)("p",{children:t.username}),(0,W.jsx)("p",{children:t.phone})]})]})]})};var ye=function(e){return(0,W.jsxs)("div",{children:[(0,W.jsx)(fe,{}),(0,W.jsx)(me,{})]})};var ge=function(){return(0,W.jsx)("div",{className:"bannerParentDiv",children:(0,W.jsxs)("div",{className:"bannerChildDiv",children:[(0,W.jsxs)("div",{className:"menuBar",children:[(0,W.jsxs)("div",{className:"categoryMenu",children:[(0,W.jsx)("span",{children:"ALL CATEGORIES"}),(0,W.jsx)(re,{})]}),(0,W.jsxs)("div",{className:"otherQuickOptions",children:[(0,W.jsx)("span",{children:"Cars"}),(0,W.jsx)("span",{children:"Motorcy..."}),(0,W.jsx)("span",{children:"Mobile Ph..."}),(0,W.jsx)("span",{children:"For Sale:Houses & Apart..."}),(0,W.jsx)("span",{children:"Scoot..."}),(0,W.jsx)("span",{children:"Commercial & Other Ve..."}),(0,W.jsx)("span",{children:"For Rent: House & Apart..."})]})]}),(0,W.jsx)("div",{className:"banner",children:(0,W.jsx)("img",{src:"../../../Images/banner copy.png",alt:""})})]})})};function ke(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function we(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?be(Object(n),!0).forEach((function(t){ke(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xe(){return(0,W.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 1024 1024","data-aut-id":"icon",className:!0,fillRule:"evenodd",children:(0,W.jsx)("path",{className:"rui-77aaa",d:"M830.798 448.659l-318.798 389.915-317.828-388.693c-20.461-27.171-31.263-59.345-31.263-93.033 0-85.566 69.605-155.152 155.152-155.152 72.126 0 132.752 49.552 150.051 116.364h87.777c17.299-66.812 77.905-116.364 150.051-116.364 85.547 0 155.152 69.585 155.152 155.152 0 33.687-10.802 65.862-30.293 91.811zM705.939 124.121c-80.853 0-152.204 41.425-193.939 104.204-41.736-62.778-113.086-104.204-193.939-104.204-128.33 0-232.727 104.378-232.727 232.727 0 50.657 16.194 98.948 47.806 140.897l328.766 402.133h100.189l329.716-403.355c30.662-40.727 46.856-89.018 46.856-139.675 0-128.349-104.398-232.727-232.727-232.727z"})})}var _e=function(){var e=(0,r.useContext)(Q).firebase,t=c((0,r.useState)([]),2),n=t[0],i=t[1],a=(0,r.useContext)(pe).setPostDetails,o=j();return(0,r.useEffect)((function(){e.firestore().collection("products").get().then((function(e){var t=e.docs.map((function(e){return we(we({},e.data()),{},{id:e.id})}));i(t)}))})),(0,W.jsxs)("div",{className:"postParentDiv",children:[(0,W.jsxs)("div",{className:"moreView",children:[(0,W.jsxs)("div",{className:"heading",children:[(0,W.jsx)("span",{children:"Quick Menu"}),(0,W.jsx)("span",{children:"View more"})]}),(0,W.jsxs)("div",{className:"cards",children:[n.map((function(e){return(0,W.jsxs)("div",{className:"card",onClick:function(){a(e),o("/view")},children:[(0,W.jsx)("div",{className:"favorite",children:(0,W.jsx)(xe,{})}),(0,W.jsx)("div",{className:"image",children:(0,W.jsx)("img",{src:e.url,alt:""})}),(0,W.jsxs)("div",{className:"content",children:[(0,W.jsxs)("p",{className:"rate",children:["\u20b9 ",e.price]}),(0,W.jsx)("span",{className:"kilometer",children:e.category}),(0,W.jsxs)("p",{className:"name",children:[" ",e.name]})]}),(0,W.jsx)("div",{className:"date",children:(0,W.jsx)("span",{children:e.createdAt})})]})})),";"]})]}),(0,W.jsxs)("div",{className:"recommendations",children:[(0,W.jsx)("div",{className:"heading",children:(0,W.jsx)("span",{children:"Fresh recommendations"})}),(0,W.jsxs)("div",{className:"cards",children:[n.map((function(e){return(0,W.jsxs)("div",{className:"card",onClick:function(){a(e),o("/view")},children:[(0,W.jsx)("div",{className:"favorite",children:(0,W.jsx)(xe,{})}),(0,W.jsx)("div",{className:"image",children:(0,W.jsx)("img",{src:e.url,alt:""})}),(0,W.jsxs)("div",{className:"content",children:[(0,W.jsxs)("p",{className:"rate",children:["\u20b9 ",e.price]}),(0,W.jsx)("span",{className:"kilometer",children:e.category}),(0,W.jsxs)("p",{className:"name",children:[" ",e.name]})]}),(0,W.jsx)("div",{className:"date",children:(0,W.jsx)("span",{children:e.createdAt})})]})})),";"]})]})]})};var Ie=function(){return(0,W.jsxs)("div",{className:"footerParentDiv",children:[(0,W.jsxs)("div",{className:"content",children:[(0,W.jsxs)("div",{children:[(0,W.jsx)("div",{className:"heading",children:(0,W.jsx)("p",{children:"POPULAR LOCATIONS"})}),(0,W.jsx)("div",{className:"list",children:(0,W.jsxs)("ul",{children:[(0,W.jsx)("li",{children:"kolkata"}),(0,W.jsx)("li",{children:"Mumbai"}),(0,W.jsx)("li",{children:"Chennai"}),(0,W.jsx)("li",{children:"Pune"})]})})]}),(0,W.jsxs)("div",{children:[(0,W.jsx)("div",{className:"heading",children:(0,W.jsx)("p",{children:"ABOUT US"})}),(0,W.jsx)("div",{className:"list",children:(0,W.jsxs)("ul",{children:[(0,W.jsx)("li",{children:"About OLX Group"}),(0,W.jsx)("li",{children:"Careers"}),(0,W.jsx)("li",{children:"Contact Us"}),(0,W.jsx)("li",{children:"OLXPeople"})]})})]}),(0,W.jsxs)("div",{children:[(0,W.jsx)("div",{className:"heading",children:(0,W.jsx)("p",{children:"OLX"})}),(0,W.jsx)("div",{className:"list",children:(0,W.jsxs)("ul",{children:[(0,W.jsx)("li",{children:"Help"}),(0,W.jsx)("li",{children:"Sitemap"}),(0,W.jsx)("li",{children:"Legal & Privacy information"})]})})]})]}),(0,W.jsxs)("div",{className:"footer",children:[(0,W.jsx)("p",{children:"Other Countries Pakistan - South Africa - Indonesia"}),(0,W.jsx)("p",{children:"Free Classifieds in India. \xa9 2006-2022 OLX"})]})]})};var Se=function(e){return(0,W.jsxs)("div",{className:"homeParentDiv",children:[(0,W.jsx)(fe,{}),(0,W.jsx)(ge,{}),(0,W.jsx)(_e,{}),(0,W.jsx)(Ie,{})]})};var Ee=function(){var e=(0,r.useContext)(Y).setUser,t=(0,r.useContext)(Q).firebase;return(0,r.useEffect)((function(){t.auth().onAuthStateChanged((function(t){e(t)}))})),(0,W.jsx)("div",{children:(0,W.jsx)(ve,{children:(0,W.jsx)(ue,{children:(0,W.jsxs)(G,{children:[(0,W.jsx)(z,{exact:!0,path:"/",element:(0,W.jsx)(Se,{})}),(0,W.jsx)(z,{path:"/signup",element:(0,W.jsx)(J,{})}),(0,W.jsx)(z,{path:"/login",element:(0,W.jsx)(ee,{})}),(0,W.jsx)(z,{path:"/create",element:(0,W.jsx)(de,{})}),(0,W.jsx)(z,{path:"/view",element:(0,W.jsx)(ye,{})})]})})})})};function Te(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ne(e,t,n){return t&&Ce(e.prototype,t),n&&Ce(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ae(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function De(e,t){return De=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},De(e,t)}function Pe(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&De(e,t)}function Oe(e){return Oe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Oe(e)}function Le(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Me(e){return Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Me(e)}function Fe(e,t){if(t&&("object"===Me(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Re(e)}function Ue(e){var t=Le();return function(){var n,r=Oe(e);if(t){var i=Oe(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Fe(this,n)}}function je(e,t,n){return je=Le()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&De(i,n.prototype),i},je.apply(null,arguments)}function Ve(e){var t="function"===typeof Map?new Map:void 0;return Ve=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return je(e,arguments,Oe(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),De(n,e)},Ve(e)}var Be=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},ze={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Be(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},qe=function(e){return function(e){var t=Be(e);return ze.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Ge=function(e){try{return ze.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Ke(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Ke(e[n],t[n]));return e}var He=function(){function e(){var t=this;Te(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return Ne(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function We(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[qe(JSON.stringify({alg:"none",type:"JWT"})),qe(JSON.stringify(a)),""].join(".")}function Qe(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Ye(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qe())}function $e(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function Xe(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Je(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Ze(){var e=Qe();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function et(){return"object"===typeof indexedDB}var tt=function(e){Pe(n,e);var t=Ue(n);function n(e,r,i){var a;return Te(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(Re(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(Re(a),nt.prototype.create),a}return Ne(n)}(Ve(Error)),nt=function(){function e(t,n,r){Te(this,e),this.service=t,this.serviceName=n,this.errors=r}return Ne(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?rt(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new tt(n,a,t);return o}}]),e}();function rt(e,t){return e.replace(it,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var it=/\{\$([^}]+)}/g;function at(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ot(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(ut(u)&&ut(s)){if(!ot(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function ut(e){return null!==e&&"object"===typeof e}function st(e){for(var t=[],n=function(){var e=c(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function ct(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=c(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function lt(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function ft(e,t){var n=new ht(e,t);return n.subscribe.bind(n)}var ht=function(){function e(t,n){var r=this;Te(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return Ne(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=Ae(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=dt),void 0===r.error&&(r.error=dt),void 0===r.complete&&(r.complete=dt);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function dt(){}function pt(e){return e&&e._delegate?e._delegate:e}function vt(){vt=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(E){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof f?t:f,a=Object.create(i.prototype),o=new _(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return S()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=b(o,n);if(u){if(u===l)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=c(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(E){return{type:"throw",arg:E}}}e.wrap=s;var l={};function f(){}function h(){}function d(){}var p={};u(p,i,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(I([])));m&&m!==t&&n.call(m,i)&&(p=m);var y=d.prototype=f.prototype=Object.create(p);function g(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(i,a,o,u){var s=c(e[i],e,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==Me(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,o,u)}),(function(e){r("throw",e,o,u)})):t.resolve(f).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,u)}))}u(s.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function b(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function I(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return h.prototype=d,u(y,"constructor",d),u(d,"constructor",h),h.displayName=u(d,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,o,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},g(k.prototype),u(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new k(s(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},g(y),u(y,o,"Generator"),u(y,i,(function(){return this})),u(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=I,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}function mt(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function yt(e){return function(e){if(Array.isArray(e))return o(e)}(e)||mt(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gt(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function kt(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){gt(a,r,i,o,u,"next",e)}function u(e){gt(a,r,i,o,u,"throw",e)}o(void 0)}))}}var bt=function(){function e(t,n,r){Te(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return Ne(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),wt="[DEFAULT]",xt=function(){function e(t,n){Te(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return Ne(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new He;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:wt})}catch(s){}var t,n=Ae(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=c(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=kt(vt().mark((function e(){var t;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(yt(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),yt(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=Ae(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=c(i.value,2),s=u[0],l=u[1],f=this.normalizeInstanceIdentifier(s);r===f&&l.resolve(a)}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=Ae(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(o){}}}catch(u){i.e(u)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===wt?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(o){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt;return this.component?this.component.multipleInstances?e:wt:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var _t,It,St=function(){function e(t){Te(this,e),this.name=t,this.providers=new Map}return Ne(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new xt(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Et=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(It||(It={}));var Tt={debug:It.DEBUG,verbose:It.VERBOSE,info:It.INFO,warn:It.WARN,error:It.ERROR,silent:It.SILENT},Ct=It.INFO,Nt=(ke(_t={},It.DEBUG,"log"),ke(_t,It.VERBOSE,"log"),ke(_t,It.INFO,"info"),ke(_t,It.WARN,"warn"),ke(_t,It.ERROR,"error"),_t),At=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Nt[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Rt=function(){function e(t){Te(this,e),this.name=t,this._logLevel=Ct,this._logHandler=At,this._userLogHandler=null,Et.push(this)}return Ne(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in It))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Tt[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,It.DEBUG].concat(t)),this._logHandler.apply(this,[this,It.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,It.VERBOSE].concat(t)),this._logHandler.apply(this,[this,It.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,It.INFO].concat(t)),this._logHandler.apply(this,[this,It.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,It.WARN].concat(t)),this._logHandler.apply(this,[this,It.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,It.ERROR].concat(t)),this._logHandler.apply(this,[this,It.ERROR].concat(t))}}]),e}();var Dt,Pt;var Ot=new WeakMap,Lt=new WeakMap,Mt=new WeakMap,Ft=new WeakMap,Ut=new WeakMap;var jt={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Lt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Mt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return zt(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Vt(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Pt||(Pt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(qt(this),n),zt(Ot.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return zt(e.apply(qt(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[qt(this),t].concat(r));return Mt.set(a,t.sort?t.sort():[t]),zt(a)}}function Bt(e){return"function"===typeof e?Vt(e):(e instanceof IDBTransaction&&function(e){if(!Lt.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Lt.set(e,t)}}(e),t=e,(Dt||(Dt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,jt):e);var t}function zt(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(zt(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&Ot.set(t,e)})).catch((function(){})),Ut.set(t,e),t}(e);if(Ft.has(e))return Ft.get(e);var t=Bt(e);return t!==e&&(Ft.set(e,t),Ut.set(t,e)),t}var qt=function(e){return Ut.get(e)};var Gt,Kt,Ht=["get","getKey","getAll","getAllKeys","count"],Wt=["put","add","delete","clear"],Qt=new Map;function Yt(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(Qt.get(t))return Qt.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Wt.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Ht.includes(n))){var a=function(){var e=kt(vt().mark((function e(t){var a,o,u,s,c,l,f=arguments;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Qt.set(t,a),a}}}jt=function(e){return we(we({},e),{},{get:function(t,n,r){return Yt(t,n)||e.get(t,n,r)},has:function(t,n){return!!Yt(t,n)||e.has(t,n)}})}(jt);var $t=function(){function e(t){Te(this,e),this.container=t}return Ne(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Xt="@firebase/app",Jt="0.7.32",Zt=new Rt("@firebase/app"),en="[DEFAULT]",tn=(ke(Gt={},Xt,"fire-core"),ke(Gt,"@firebase/app-compat","fire-core-compat"),ke(Gt,"@firebase/analytics","fire-analytics"),ke(Gt,"@firebase/analytics-compat","fire-analytics-compat"),ke(Gt,"@firebase/app-check","fire-app-check"),ke(Gt,"@firebase/app-check-compat","fire-app-check-compat"),ke(Gt,"@firebase/auth","fire-auth"),ke(Gt,"@firebase/auth-compat","fire-auth-compat"),ke(Gt,"@firebase/database","fire-rtdb"),ke(Gt,"@firebase/database-compat","fire-rtdb-compat"),ke(Gt,"@firebase/functions","fire-fn"),ke(Gt,"@firebase/functions-compat","fire-fn-compat"),ke(Gt,"@firebase/installations","fire-iid"),ke(Gt,"@firebase/installations-compat","fire-iid-compat"),ke(Gt,"@firebase/messaging","fire-fcm"),ke(Gt,"@firebase/messaging-compat","fire-fcm-compat"),ke(Gt,"@firebase/performance","fire-perf"),ke(Gt,"@firebase/performance-compat","fire-perf-compat"),ke(Gt,"@firebase/remote-config","fire-rc"),ke(Gt,"@firebase/remote-config-compat","fire-rc-compat"),ke(Gt,"@firebase/storage","fire-gcs"),ke(Gt,"@firebase/storage-compat","fire-gcs-compat"),ke(Gt,"@firebase/firestore","fire-fst"),ke(Gt,"@firebase/firestore-compat","fire-fst-compat"),ke(Gt,"fire-js","fire-js"),ke(Gt,"firebase","fire-js-all"),Gt),nn=new Map,rn=new Map;function an(e,t){try{e.container.addComponent(t)}catch(n){Zt.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function on(e,t){e.container.addOrOverwriteComponent(t)}function un(e){var t=e.name;if(rn.has(t))return Zt.debug("There were multiple attempts to register component ".concat(t,".")),!1;rn.set(t,e);var n,r=Ae(nn.values());try{for(r.s();!(n=r.n()).done;){an(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function sn(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function cn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:en;sn(e,t).clearInstance(n)}function ln(){rn.clear()}var fn=(ke(Kt={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),ke(Kt,"bad-app-name","Illegal App name: '{$appName}"),ke(Kt,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),ke(Kt,"app-deleted","Firebase App named '{$appName}' already deleted"),ke(Kt,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),ke(Kt,"invalid-log-argument","First argument to `onLog` must be null or a function."),ke(Kt,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),ke(Kt,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),ke(Kt,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),ke(Kt,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),Kt),hn=new nt("app","Firebase",fn),dn=function(){function e(t,n,r){var i=this;Te(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new bt("app",(function(){return i}),"PUBLIC"))}return Ne(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw hn.create("app-deleted",{appName:this._name})}}]),e}(),pn="9.9.4";function vn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:en,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw hn.create("bad-app-name",{appName:String(i)});var a=nn.get(i);if(a){if(ot(e,a.options)&&ot(r,a.config))return a;throw hn.create("duplicate-app",{appName:i})}var o,u=new St(i),s=Ae(rn.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new dn(e,r,u);return nn.set(i,l),l}function mn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:en,t=nn.get(e);if(!t)throw hn.create("no-app",{appName:e});return t}function yn(){return Array.from(nn.values())}function gn(e){return kn.apply(this,arguments)}function kn(){return(kn=kt(vt().mark((function e(t){var n;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!nn.has(n)){e.next=6;break}return nn.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bn(e,t,n){var r,i=null!==(r=tn[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Zt.warn(u.join(" "))}un(new bt("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function wn(e,t){if(null!==e&&"function"!==typeof e)throw hn.create("invalid-log-argument");!function(e,t){var n,r=Ae(Et);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=Tt[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:It[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function xn(e){var t;t=e,Et.forEach((function(e){e.setLogLevel(t)}))}var _n="firebase-heartbeat-store",In=null;function Sn(){return In||(In=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=zt(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(zt(u.result),e.oldVersion,e.newVersion,zt(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(_n)}}).catch((function(e){throw hn.create("idb-open",{originalErrorMessage:e.message})}))),In}function En(e){return Tn.apply(this,arguments)}function Tn(){return Tn=kt(vt().mark((function e(t){var n,r,i;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Sn();case 3:return r=e.sent,e.abrupt("return",r.transaction(_n).objectStore(_n).get(An(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof tt?Zt.warn(e.t0.message):(i=hn.create("idb-get",{originalErrorMessage:null===(n=e.t0)||void 0===n?void 0:n.message}),Zt.warn(i.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),Tn.apply(this,arguments)}function Cn(e,t){return Nn.apply(this,arguments)}function Nn(){return Nn=kt(vt().mark((function e(t,n){var r,i,a,o,u;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Sn();case 3:return i=e.sent,a=i.transaction(_n,"readwrite"),o=a.objectStore(_n),e.next=8,o.put(n,An(t));case 8:return e.abrupt("return",a.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof tt?Zt.warn(e.t0.message):(u=hn.create("idb-set",{originalErrorMessage:null===(r=e.t0)||void 0===r?void 0:r.message}),Zt.warn(u.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),Nn.apply(this,arguments)}function An(e){return"".concat(e.name,"!").concat(e.options.appId)}var Rn=function(){function e(t){var n=this;Te(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new Mn(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return Ne(e,[{key:"triggerHeartbeat",value:function(){var e=kt(vt().mark((function e(){var t,n,r;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=Dn(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=kt(vt().mark((function e(){var t,n,r,i,a;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=Dn(),n=Pn(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=qe(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Dn(){return(new Date).toISOString().substring(0,10)}function Pn(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=Ae(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Fn(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Fn(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var On,Ln,Mn=function(){function e(t){Te(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return Ne(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=kt(vt().mark((function e(){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(et()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=kt(vt().mark((function e(){var t;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,En(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=kt(vt().mark((function e(t){var n,r;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Cn(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=kt(vt().mark((function e(t){var n,r;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Cn(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(yt(r.heartbeats),yt(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Fn(e){return qe(JSON.stringify({version:2,heartbeats:e})).length}On="",un(new bt("platform-logger",(function(e){return new $t(e)}),"PRIVATE")),un(new bt("heartbeat",(function(e){return new Rn(e)}),"PRIVATE")),bn(Xt,Jt,On),bn(Xt,Jt,"esm2017"),bn("fire-js","");var Un=function(){function e(t,n){var r=this;Te(this,e),this._delegate=t,this.firebase=n,an(t,new bt("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return Ne(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),gn(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:en;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:en;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){an(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){on(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),jn=(ke(Ln={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),ke(Ln,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Ln),Vn=new nt("app-compat","Firebase",jn);var Bn=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=vn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(at(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:bn,setLogLevel:xn,onLog:wn,apps:null,SDK_VERSION:pn,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(un(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw Vn.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&Ke(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!at(n,e=e||en))throw Vn.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(Un);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Ke(n,e)},createSubscribe:ft,ErrorFactory:nt,deepExtend:Ke}),n}(),zn=new Rt("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){zn.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var qn=self.firebase.SDK_VERSION;qn&&qn.indexOf("LITE")>=0&&zn.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Gn=Bn;!function(e){bn("@firebase/app-compat","0.1.33",e)}();function Kn(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Oe(e)););return e}function Hn(){return Hn="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=Kn(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Hn.apply(this,arguments)}Gn.registerVersion("firebase","9.9.4","app-compat");function Wn(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var Qn;Object.create;var Yn="facebook.com",$n="github.com",Xn="google.com",Jn="password",Zn="twitter.com",er="EMAIL_SIGNIN",tr="PASSWORD_RESET",nr="RECOVER_EMAIL",rr="REVERT_SECOND_FACTOR_ADDITION",ir="VERIFY_AND_CHANGE_EMAIL",ar="VERIFY_EMAIL";function or(){return ke({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var ur=function(){var e;return ke(e={},"admin-restricted-operation","This operation is restricted to administrators only."),ke(e,"argument-error",""),ke(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),ke(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),ke(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),ke(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),ke(e,"cordova-not-ready","Cordova framework is not ready."),ke(e,"cors-unsupported","This browser is not supported."),ke(e,"credential-already-in-use","This credential is already associated with a different user account."),ke(e,"custom-token-mismatch","The custom token corresponds to a different audience."),ke(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),ke(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),ke(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),ke(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),ke(e,"email-already-in-use","The email address is already in use by another account."),ke(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),ke(e,"expired-action-code","The action code has expired."),ke(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),ke(e,"internal-error","An internal AuthError has occurred."),ke(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),ke(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),ke(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),ke(e,"invalid-auth-event","An internal AuthError has occurred."),ke(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),ke(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),ke(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),ke(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),ke(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),ke(e,"invalid-email","The email address is badly formatted."),ke(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),ke(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),ke(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),ke(e,"invalid-credential","The supplied auth credential is malformed or has expired."),ke(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),ke(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),ke(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),ke(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),ke(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),ke(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),ke(e,"wrong-password","The password is invalid or the user does not have a password."),ke(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),ke(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),ke(e,"invalid-provider-id","The specified provider ID is invalid."),ke(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),ke(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),ke(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),ke(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),ke(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),ke(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),ke(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),ke(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),ke(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),ke(e,"missing-continue-uri","A continue URL must be provided in the request."),ke(e,"missing-iframe-start","An internal AuthError has occurred."),ke(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),ke(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),ke(e,"missing-multi-factor-info","No second factor identifier is provided."),ke(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),ke(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),ke(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),ke(e,"app-deleted","This instance of FirebaseApp has been deleted."),ke(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),ke(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),ke(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),ke(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),ke(e,"no-auth-event","An internal AuthError has occurred."),ke(e,"no-such-provider","User was not linked to an account with the given provider."),ke(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),ke(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),ke(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),ke(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),ke(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),ke(e,"provider-already-linked","User can only be linked to one identity for the given provider."),ke(e,"quota-exceeded","The project's quota for this operation has been exceeded."),ke(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),ke(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),ke(e,"rejected-credential","The request contains malformed or mismatching credentials."),ke(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),ke(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),ke(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),ke(e,"timeout","The operation has timed out."),ke(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),ke(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),ke(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),ke(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),ke(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),ke(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),ke(e,"unverified-email","The operation requires a verified email."),ke(e,"user-cancelled","The user did not grant your application the permissions it requested."),ke(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),ke(e,"user-disabled","The user account has been disabled by an administrator."),ke(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),ke(e,"user-signed-out",""),ke(e,"weak-password","The password must be 6 characters long or more."),ke(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),ke(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},sr=or,cr=new nt("auth","Firebase",or()),lr=new Rt("@firebase/auth");function fr(e){if(lr.logLevel<=It.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];lr.error.apply(lr,["Auth (".concat(pn,"): ").concat(e)].concat(n))}}function hr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw mr.apply(void 0,[e].concat(n))}function dr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return mr.apply(void 0,[e].concat(n))}function pr(e,t,n){var r=Object.assign(Object.assign({},sr()),ke({},t,n));return new nt("auth","Firebase",r).create(t,{appName:e.name})}function vr(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&hr(e,"argument-error"),pr(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function mr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=yt(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(yt(o)))}return cr.create.apply(cr,[e].concat(n))}function yr(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw mr.apply(void 0,[t].concat(r))}}function gr(e){var t="INTERNAL ASSERTION FAILED: "+e;throw fr(t),new Error(t)}function kr(e,t){e||gr(t)}var br=new Map;function wr(e){kr(e instanceof Function,"Expected a class definition");var t=br.get(e);return t?(kr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,br.set(e,t),t)}function xr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function _r(){return"http:"===Ir()||"https:"===Ir()}function Ir(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var Sr=function(){function e(t,n){Te(this,e),this.shortDelay=t,this.longDelay=n,kr(n>t,"Short delay should be less than long delay!"),this.isMobile=Ye()||Je()}return Ne(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(_r()||Xe()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function Er(e,t){kr(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var Tr=function(){function e(){Te(this,e)}return Ne(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void gr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void gr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void gr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),Cr=(ke(Qn={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),ke(Qn,"MISSING_CUSTOM_TOKEN","internal-error"),ke(Qn,"INVALID_IDENTIFIER","invalid-email"),ke(Qn,"MISSING_CONTINUE_URI","internal-error"),ke(Qn,"INVALID_PASSWORD","wrong-password"),ke(Qn,"MISSING_PASSWORD","internal-error"),ke(Qn,"EMAIL_EXISTS","email-already-in-use"),ke(Qn,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),ke(Qn,"INVALID_IDP_RESPONSE","invalid-credential"),ke(Qn,"INVALID_PENDING_TOKEN","invalid-credential"),ke(Qn,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),ke(Qn,"MISSING_REQ_TYPE","internal-error"),ke(Qn,"EMAIL_NOT_FOUND","user-not-found"),ke(Qn,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),ke(Qn,"EXPIRED_OOB_CODE","expired-action-code"),ke(Qn,"INVALID_OOB_CODE","invalid-action-code"),ke(Qn,"MISSING_OOB_CODE","internal-error"),ke(Qn,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),ke(Qn,"INVALID_ID_TOKEN","invalid-user-token"),ke(Qn,"TOKEN_EXPIRED","user-token-expired"),ke(Qn,"USER_NOT_FOUND","user-token-expired"),ke(Qn,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),ke(Qn,"INVALID_CODE","invalid-verification-code"),ke(Qn,"INVALID_SESSION_INFO","invalid-verification-id"),ke(Qn,"INVALID_TEMPORARY_PROOF","invalid-credential"),ke(Qn,"MISSING_SESSION_INFO","missing-verification-id"),ke(Qn,"SESSION_EXPIRED","code-expired"),ke(Qn,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),ke(Qn,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),ke(Qn,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),ke(Qn,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),ke(Qn,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),ke(Qn,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),ke(Qn,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),ke(Qn,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),ke(Qn,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),ke(Qn,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),ke(Qn,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Qn),Nr=new Sr(3e4,6e4);function Ar(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Rr(e,t,n,r){return Dr.apply(this,arguments)}function Dr(){return Dr=kt(vt().mark((function e(t,n,r,i){var a,o=arguments;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",Pr(t,a,kt(vt().mark((function e(){var a,o,u,s;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=st(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",Tr.fetch()(Fr(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),Dr.apply(this,arguments)}function Pr(e,t,n){return Or.apply(this,arguments)}function Or(){return(Or=kt(vt().mark((function e(t,n,r){var i,a,o,u,s,l,f,h,d,p;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},Cr),n),e.prev=2,a=new Ur(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw jr(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,l=s.split(" : "),f=c(l,2),h=f[0],d=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw jr(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==h){e.next=27;break}throw jr(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==h){e.next=29;break}throw jr(t,"user-disabled",u);case 29:if(p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=34;break}throw pr(t,p,d);case 34:hr(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof tt)){e.next=41;break}throw e.t0;case 41:hr(t,"network-request-failed");case 42:case"end":return e.stop()}}),e,null,[[2,37]])})))).apply(this,arguments)}function Lr(e,t,n,r){return Mr.apply(this,arguments)}function Mr(){return Mr=kt(vt().mark((function e(t,n,r,i){var a,o,u=arguments;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,Rr(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&hr(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),Mr.apply(this,arguments)}function Fr(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Er(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var Ur=function(){function e(t){var n=this;Te(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(dr(n.auth,"network-request-failed"))}),Nr.get())}))}return Ne(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function jr(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=dr(e,t,r);return i.customData._tokenResponse=n,i}function Vr(e,t){return Br.apply(this,arguments)}function Br(){return(Br=kt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rr(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zr(e,t){return qr.apply(this,arguments)}function qr(){return(qr=kt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rr(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gr(e,t){return Kr.apply(this,arguments)}function Kr(){return(Kr=kt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rr(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hr(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function Wr(){return Wr=kt(vt().mark((function e(t){var n,r,i,a,o,u,s=arguments;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=pt(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,yr((a=Yr(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Hr(Qr(a.auth_time)),issuedAtTime:Hr(Qr(a.iat)),expirationTime:Hr(Qr(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Wr.apply(this,arguments)}function Qr(e){return 1e3*Number(e)}function Yr(e){var t,n=c(e.split("."),3),r=n[0],i=n[1],a=n[2];if(void 0===r||void 0===i||void 0===a)return fr("JWT malformed, contained fewer than 3 sections"),null;try{var o=Ge(i);return o?JSON.parse(o):(fr("Failed to decode base64 JWT payload"),null)}catch(u){return fr("Caught error parsing JWT payload as JSON",null===(t=u)||void 0===t?void 0:t.toString()),null}}function $r(e,t){return Xr.apply(this,arguments)}function Xr(){return Xr=kt(vt().mark((function e(t,n){var r=arguments;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof tt&&Jr(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Xr.apply(this,arguments)}function Jr(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Zr=function(){function e(t){Te(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return Ne(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(kt(vt().mark((function t(){return vt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=kt(vt().mark((function e(){var t;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===(t=e.t0)||void 0===t?void 0:t.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),ei=function(){function e(t,n){Te(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return Ne(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Hr(this.lastLoginAt),this.creationTime=Hr(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function ti(e){return ni.apply(this,arguments)}function ni(){return ni=kt(vt().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,$r(t,Gr(r,{idToken:i}));case 6:yr(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?ai(o.providerUserInfo):[],s=ii(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new ei(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),ni.apply(this,arguments)}function ri(){return(ri=kt(vt().mark((function e(t){var n;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=pt(t),e.next=3,ti(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ii(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(yt(n),yt(t))}function ai(e){return e.map((function(e){var t=e.providerId,n=Wn(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function oi(e,t){return ui.apply(this,arguments)}function ui(){return(ui=kt(vt().mark((function e(t,n){var r;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pr(t,{},kt(vt().mark((function e(){var r,i,a,o,u,s;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=st({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=Fr(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",Tr.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var si=function(){function e(){Te(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return Ne(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){yr(e.idToken,"internal-error"),yr("undefined"!==typeof e.idToken,"internal-error"),yr("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=Yr(e);return yr(t,"internal-error"),yr("undefined"!==typeof t.exp,"internal-error"),yr("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=kt(vt().mark((function e(t){var n,r=arguments;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],yr(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=kt(vt().mark((function e(t,n){var r,i,a,o;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oi(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return gr("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(yr("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(yr("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(yr("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function ci(e,t){yr("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var li=function(){function e(t){Te(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=Wn(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Zr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?yt(a.providerData):[],this.metadata=new ei(a.createdAt||void 0,a.lastLoginAt||void 0)}return Ne(e,[{key:"getIdToken",value:function(){var e=kt(vt().mark((function e(t){var n;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$r(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(yr(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Wr.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return ri.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(yr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){yr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=kt(vt().mark((function e(t){var n,r,i=arguments;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,ti(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=kt(vt().mark((function e(){var t;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,$r(this,Vr(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,m=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,x=n.providerData,_=n.stsTokenManager;yr(k&&_,t,"internal-error");var I=si.fromJSON(this.name,_);yr("string"===typeof k,t,"internal-error"),ci(f,t.name),ci(h,t.name),yr("boolean"===typeof b,t,"internal-error"),yr("boolean"===typeof w,t,"internal-error"),ci(d,t.name),ci(p,t.name),ci(v,t.name),ci(m,t.name),ci(y,t.name),ci(g,t.name);var S=new e({uid:k,auth:t,email:h,emailVerified:b,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:y,lastLoginAt:g});return x&&Array.isArray(x)&&(S.providerData=x.map((function(e){return Object.assign({},e)}))),m&&(S._redirectEventId=m),S}},{key:"_fromIdTokenResponse",value:function(){var t=kt(vt().mark((function t(n,r){var i,a,o,u=arguments;return vt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new si).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,ti(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),fi=function(){function e(){Te(this,e),this.type="NONE",this.storage={}}return Ne(e,[{key:"_isAvailable",value:function(){var e=kt(vt().mark((function e(){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=kt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=kt(vt().mark((function e(t){var n;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=kt(vt().mark((function e(t){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();fi.type="NONE";var hi=fi;function di(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var pi=function(){function e(t,n,r){Te(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=di(this.userKey,a.apiKey,o),this.fullPersistenceKey=di("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return Ne(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=kt(vt().mark((function e(){var t;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?li._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=kt(vt().mark((function e(t){var n;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=kt(vt().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return vt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(wr(hi),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=kt(vt().mark((function e(t){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||wr(hi),u=di(i,n.config.apiKey,n.name),s=null,c=Ae(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=li._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=kt(vt().mark((function e(t){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function vi(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ki(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(mi(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(wi(t))return"Blackberry";if(xi(t))return"Webos";if(yi(t))return"Safari";if((t.includes("chrome/")||gi(t))&&!t.includes("edge/"))return"Chrome";if(bi(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function mi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe();return/firefox\//i.test(e)}function yi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function gi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe();return/crios\//i.test(e)}function ki(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe();return/iemobile/i.test(e)}function bi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe();return/android/i.test(e)}function wi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe();return/blackberry/i.test(e)}function xi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe();return/webos/i.test(e)}function _i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Ii(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe();return _i(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function Si(){return Ze()&&10===document.documentMode}function Ei(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe();return _i(e)||bi(e)||xi(e)||wi(e)||/windows phone/i.test(e)||ki(e)}function Ti(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=vi(Qe());break;case"Worker":t="".concat(vi(Qe()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(pn,"/").concat(r)}var Ci=function(){function e(t){Te(this,e),this.auth=t,this.queue=[]}return Ne(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=kt(vt().mark((function e(t){var n,r,i,a,o,u,s,c;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:r=[],e.prev=3,i=Ae(this.queue),e.prev=5,i.s();case 7:if((a=i.n()).done){e.next=14;break}return o=a.value,e.next=11,o(t);case 11:o.onAbort&&r.push(o.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),i.e(e.t0);case 19:return e.prev=19,i.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),r.reverse(),u=Ae(r);try{for(u.s();!(s=u.n()).done;){c=s.value;try{c()}catch(l){}}}catch(f){u.e(f)}finally{u.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===(n=e.t1)||void 0===n?void 0:n.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Ni=function(){function e(t,n,r){Te(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ri(this),this.idTokenSubscription=new Ri(this),this.beforeStateQueue=new Ci(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cr,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return Ne(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=wr(t)),this._initializationPromise=this.queue(kt(vt().mark((function r(){var i,a;return vt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,pi.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=kt(vt().mark((function e(){var t;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=kt(vt().mark((function e(t){var n,r,i,a,o,u,s;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return yr(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=kt(vt().mark((function e(t){var n;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=kt(vt().mark((function e(t){var n;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ti(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===(n=e.t0)||void 0===n?void 0:n.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=kt(vt().mark((function e(){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=kt(vt().mark((function e(t){var n;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?pt(t):null)&&yr(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=kt(vt().mark((function e(t){var n,r=this,i=arguments;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&yr(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(kt(vt().mark((function e(){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=kt(vt().mark((function e(){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(kt(vt().mark((function n(){return vt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(wr(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new nt("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=kt(vt().mark((function e(t,n){var r;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=kt(vt().mark((function e(t){var n;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return yr(n=t&&wr(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,pi.create(this,[wr(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=kt(vt().mark((function e(t){var n,r;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(kt(vt().mark((function e(){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=kt(vt().mark((function e(t){var n=this;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(kt(vt().mark((function e(){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return yr(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=kt(vt().mark((function e(t){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return yr(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ti(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=kt(vt().mark((function e(){var t,n,r;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ke({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Ai(e){return pt(e)}var Ri=function(){function e(t){var n=this;Te(this,e),this.auth=t,this.observer=null,this.addObserver=ft((function(e){return n.observer=e}))}return Ne(e,[{key:"next",get:function(){return yr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function Di(e,t,n){var r=Ai(e);yr(r._canInitEmulator,r,"emulator-config-failed"),yr(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=Pi(t),o=function(e){var t=Pi(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:Oi(r.substr(a.length+1))}}var o=c(r.split(":"),2);return{host:o[0],port:Oi(o[1])}}(t),u=o.host,s=o.port,l=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Pi(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Oi(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var Li=function(){function e(t,n){Te(this,e),this.providerId=t,this.signInMethod=n}return Ne(e,[{key:"toJSON",value:function(){return gr("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return gr("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return gr("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return gr("not implemented")}}]),e}();function Mi(e,t){return Fi.apply(this,arguments)}function Fi(){return(Fi=kt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rr(t,"POST","/v1/accounts:resetPassword",Ar(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ui(e,t){return ji.apply(this,arguments)}function ji(){return(ji=kt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rr(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vi(e,t){return Bi.apply(this,arguments)}function Bi(){return(Bi=kt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rr(t,"POST","/v1/accounts:update",Ar(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zi(e,t){return qi.apply(this,arguments)}function qi(){return(qi=kt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Lr(t,"POST","/v1/accounts:signInWithPassword",Ar(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gi(e,t){return Ki.apply(this,arguments)}function Ki(){return(Ki=kt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rr(t,"POST","/v1/accounts:sendOobCode",Ar(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hi(e,t){return Wi.apply(this,arguments)}function Wi(){return(Wi=kt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Gi(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qi(e,t){return Yi.apply(this,arguments)}function Yi(){return(Yi=kt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Gi(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $i(e,t){return Xi.apply(this,arguments)}function Xi(){return(Xi=kt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Gi(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ji(e,t){return Zi.apply(this,arguments)}function Zi(){return(Zi=kt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Gi(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ea(e,t){return ta.apply(this,arguments)}function ta(){return(ta=kt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Lr(t,"POST","/v1/accounts:signInWithEmailLink",Ar(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function na(e,t){return ra.apply(this,arguments)}function ra(){return(ra=kt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Lr(t,"POST","/v1/accounts:signInWithEmailLink",Ar(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ia=function(e){Pe(n,e);var t=Ue(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return Te(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return Ne(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=kt(vt().mark((function e(t){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",zi(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",ea(t,{email:this._email,oobCode:this._password}));case 5:hr(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=kt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Ui(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",na(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:hr(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(Li);function aa(e,t){return oa.apply(this,arguments)}function oa(){return(oa=kt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Lr(t,"POST","/v1/accounts:signInWithIdp",Ar(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ua=function(e){Pe(n,e);var t=Ue(n);function n(){var e;return Te(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return Ne(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return aa(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,aa(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,aa(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=st(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):hr("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Wn(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(Li);function sa(e,t){return ca.apply(this,arguments)}function ca(){return(ca=kt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rr(t,"POST","/v1/accounts:sendVerificationCode",Ar(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function la(){return(la=kt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Lr(t,"POST","/v1/accounts:signInWithPhoneNumber",Ar(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fa(){return(fa=kt(vt().mark((function e(t,n){var r;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Lr(t,"POST","/v1/accounts:signInWithPhoneNumber",Ar(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw jr(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ha=ke({},"USER_NOT_FOUND","user-not-found");function da(){return(da=kt(vt().mark((function e(t,n){var r;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Lr(t,"POST","/v1/accounts:signInWithPhoneNumber",Ar(t,r),ha));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var pa=function(e){Pe(n,e);var t=Ue(n);function n(e){var r;return Te(this,n),(r=t.call(this,"phone","phone")).params=e,r}return Ne(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return la.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return fa.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return da.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(Li);var va=function(){function e(t){var n,r,i,a,o,u;Te(this,e);var s=ct(lt(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);yr(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return Ne(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=ct(lt(e)).link,n=t?ct(lt(t)).deep_link_id:null,r=ct(lt(e)).deep_link_id;return(r?ct(lt(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(r){return null}}}]),e}();var ma=function(){function e(){Te(this,e),this.providerId=e.PROVIDER_ID}return Ne(e,null,[{key:"credential",value:function(e,t){return ia._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=va.parseLink(t);return yr(n,"argument-error"),ia._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();ma.PROVIDER_ID="password",ma.EMAIL_PASSWORD_SIGN_IN_METHOD="password",ma.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var ya=function(){function e(t){Te(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return Ne(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),ga=function(e){Pe(n,e);var t=Ue(n);function n(){var e;return Te(this,n),(e=t.apply(this,arguments)).scopes=[],e}return Ne(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return yt(this.scopes)}}]),n}(ya),ka=function(e){Pe(n,e);var t=Ue(n);function n(){return Te(this,n),t.apply(this,arguments)}return Ne(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return yr(e.idToken||e.accessToken,"argument-error"),ua._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return yr("providerId"in t&&"signInMethod"in t,"argument-error"),ua._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(ga),ba=function(e){Pe(n,e);var t=Ue(n);function n(){return Te(this,n),t.call(this,"facebook.com")}return Ne(n,null,[{key:"credential",value:function(e){return ua._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(ga);ba.FACEBOOK_SIGN_IN_METHOD="facebook.com",ba.PROVIDER_ID="facebook.com";var wa=function(e){Pe(n,e);var t=Ue(n);function n(){var e;return Te(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return Ne(n,null,[{key:"credential",value:function(e,t){return ua._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(ga);wa.GOOGLE_SIGN_IN_METHOD="google.com",wa.PROVIDER_ID="google.com";var xa=function(e){Pe(n,e);var t=Ue(n);function n(){return Te(this,n),t.call(this,"github.com")}return Ne(n,null,[{key:"credential",value:function(e){return ua._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(ga);xa.GITHUB_SIGN_IN_METHOD="github.com",xa.PROVIDER_ID="github.com";var _a=function(e){Pe(n,e);var t=Ue(n);function n(e,r){var i;return Te(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return Ne(n,[{key:"_getIdTokenResponse",value:function(e){return aa(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,aa(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,aa(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Li),Ia=function(e){Pe(n,e);var t=Ue(n);function n(e){return Te(this,n),yr(e.startsWith("saml."),"argument-error"),t.call(this,e)}return Ne(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=_a.fromJSON(e);return yr(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return _a._create(r,n)}catch(i){return null}}}]),n}(ya),Sa=function(e){Pe(n,e);var t=Ue(n);function n(){return Te(this,n),t.call(this,"twitter.com")}return Ne(n,null,[{key:"credential",value:function(e,t){return ua._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(ga);function Ea(e,t){return Ta.apply(this,arguments)}function Ta(){return(Ta=kt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Lr(t,"POST","/v1/accounts:signUp",Ar(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Sa.TWITTER_SIGN_IN_METHOD="twitter.com",Sa.PROVIDER_ID="twitter.com";var Ca=function(){function e(t){Te(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return Ne(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=kt(vt().mark((function t(n,r,i){var a,o,u,s,c=arguments;return vt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,li._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=Na(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=kt(vt().mark((function t(n,r,i){var a;return vt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=Na(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function Na(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function Aa(){return Aa=kt(vt().mark((function e(t){var n,r,i,a;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ai(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new Ca({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,Ea(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,Ca._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),Aa.apply(this,arguments)}var Ra=function(e){Pe(n,e);var t=Ue(n);function n(e,r,i,a){var o,u;return Te(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(Re(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return Ne(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(tt);function Da(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Ra._fromErrorAndOperation(e,n,t,r);throw n}))}function Pa(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function Oa(e,t){return La.apply(this,arguments)}function La(){return La=kt(vt().mark((function e(t,n){var r,i,a,o;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=pt(t),e.next=3,Ua(!0,r,n);case 3:return e.t0=zr,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=Pa(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),La.apply(this,arguments)}function Ma(e,t){return Fa.apply(this,arguments)}function Fa(){return Fa=kt(vt().mark((function e(t,n){var r,i,a=arguments;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=$r,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",Ca._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),Fa.apply(this,arguments)}function Ua(e,t,n){return ja.apply(this,arguments)}function ja(){return(ja=kt(vt().mark((function e(t,n,r){var i,a;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ti(n);case 2:i=Pa(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",yr(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Va(e,t){return Ba.apply(this,arguments)}function Ba(){return Ba=kt(vt().mark((function e(t,n){var r,i,a,o,u,s,c,l=arguments;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>2&&void 0!==l[2]&&l[2],a=t.auth,o="reauthenticate",e.prev=3,e.next=6,$r(t,Da(a,o,n,t),r);case 6:return yr((u=e.sent).idToken,a,"internal-error"),yr(s=Yr(u.idToken),a,"internal-error"),c=s.sub,yr(t.uid===c,a,"user-mismatch"),e.abrupt("return",Ca._forOperation(t,o,u));case 15:throw e.prev=15,e.t0=e.catch(3),(null===(i=e.t0)||void 0===i?void 0:i.code)==="auth/".concat("user-not-found")&&hr(a,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),Ba.apply(this,arguments)}function za(e,t){return qa.apply(this,arguments)}function qa(){return qa=kt(vt().mark((function e(t,n){var r,i,a,o,u=arguments;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,Da(t,i,n);case 4:return a=e.sent,e.next=7,Ca._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),qa.apply(this,arguments)}function Ga(e,t){return Ka.apply(this,arguments)}function Ka(){return(Ka=kt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",za(Ai(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ha(e,t){return Wa.apply(this,arguments)}function Wa(){return(Wa=kt(vt().mark((function e(t,n){var r;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=pt(t),e.next=3,Ua(!1,r,n.providerId);case 3:return e.abrupt("return",Ma(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qa(e,t){return Ya.apply(this,arguments)}function Ya(){return(Ya=kt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Va(pt(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $a(e,t){return Xa.apply(this,arguments)}function Xa(){return(Xa=kt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Lr(t,"POST","/v1/accounts:signInWithCustomToken",Ar(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ja(){return(Ja=kt(vt().mark((function e(t,n){var r,i,a;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ai(t),e.next=3,$a(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,Ca._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Za=function(){function e(t,n){Te(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return Ne(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?eo._fromServerResponse(e,t):hr(e,"internal-error")}}]),e}(),eo=function(e){Pe(n,e);var t=Ue(n);function n(e){var r;return Te(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return Ne(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(Za);function to(e,t,n){var r;yr((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),yr("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(yr(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(yr(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function no(){return(no=kt(vt().mark((function e(t,n,r){var i,a;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=pt(t),a={requestType:"PASSWORD_RESET",email:n},r&&to(i,a,r),e.next=5,Qi(i,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ro(){return(ro=kt(vt().mark((function e(t,n,r){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mi(pt(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function io(){return(io=kt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vi(pt(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ao(e,t){return oo.apply(this,arguments)}function oo(){return(oo=kt(vt().mark((function e(t,n){var r,i,a,o;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=pt(t),e.next=3,Mi(r,{oobCode:n});case 3:i=e.sent,yr(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return yr(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:yr(i.mfaInfo,r,"internal-error");case 13:yr(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=Za._fromServerResponse(Ai(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function uo(){return(uo=kt(vt().mark((function e(t,n){var r,i;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ao(pt(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function so(e,t,n){return co.apply(this,arguments)}function co(){return(co=kt(vt().mark((function e(t,n,r){var i,a,o;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ai(t),e.next=3,Ea(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,Ca._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lo(){return(lo=kt(vt().mark((function e(t,n,r){var i,a;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=pt(t),a={requestType:"EMAIL_SIGNIN",email:n},yr(r.handleCodeInApp,i,"argument-error"),r&&to(i,a,r),e.next=6,$i(i,a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fo(){return(fo=kt(vt().mark((function e(t,n,r){var i,a;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=pt(t),yr((a=ma.credentialWithLink(n,r||xr()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",Ga(i,a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ho(e,t){return po.apply(this,arguments)}function po(){return(po=kt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rr(t,"POST","/v1/accounts:createAuthUri",Ar(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vo(){return(vo=kt(vt().mark((function e(t,n){var r,i,a,o;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_r()?xr():"http://localhost",i={identifier:n,continueUri:r},e.next=4,ho(pt(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mo(){return(mo=kt(vt().mark((function e(t,n){var r,i,a,o;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=pt(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&to(r.auth,a,n),e.next=8,Hi(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yo(){return(yo=kt(vt().mark((function e(t,n,r){var i,a,o,u;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=pt(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&to(i.auth,o,r),e.next=8,Ji(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function go(e,t){return ko.apply(this,arguments)}function ko(){return(ko=kt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rr(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bo(){return(bo=kt(vt().mark((function e(t,n){var r,i,a,o,u,s,c;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=pt(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,$r(a,go(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wo(e,t,n){return xo.apply(this,arguments)}function xo(){return(xo=kt(vt().mark((function e(t,n,r){var i,a,o,u;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,$r(t,Ui(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _o=Ne((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Te(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),Io=function(e){Pe(n,e);var t=Ue(n);function n(e,r,i,a){var o;return Te(this,n),(o=t.call(this,e,r,i)).username=a,o}return Ne(n)}(_o),So=function(e){Pe(n,e);var t=Ue(n);function n(e,r){return Te(this,n),t.call(this,e,"facebook.com",r)}return Ne(n)}(_o),Eo=function(e){Pe(n,e);var t=Ue(n);function n(e,r){return Te(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return Ne(n)}(Io),To=function(e){Pe(n,e);var t=Ue(n);function n(e,r){return Te(this,n),t.call(this,e,"google.com",r)}return Ne(n)}(_o),Co=function(e){Pe(n,e);var t=Ue(n);function n(e,r,i){return Te(this,n),t.call(this,e,"twitter.com",r,i)}return Ne(n)}(Io);function No(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=Yr(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new _o(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new So(a,i);case"github.com":return new Eo(a,i);case"google.com":return new To(a,i);case"twitter.com":return new Co(a,i,e.screenName||null);case"custom":case"anonymous":return new _o(a,null);default:return new _o(a,r,i)}}(n)}var Ao=function(){function e(t,n){Te(this,e),this.type=t,this.credential=n}return Ne(e,[{key:"toJSON",value:function(){return{multiFactorSession:ke({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),Ro=function(){function e(t,n,r){Te(this,e),this.session=t,this.hints=n,this.signInResolver=r}return Ne(e,[{key:"resolveSignIn",value:function(){var e=kt(vt().mark((function e(t){var n;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=Ai(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return Za._fromServerResponse(r,e)}));yr(i.mfaPendingCredential,r,"internal-error");var o=Ao._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=kt(vt().mark((function e(t){var a,u,s;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,Ca._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return yr(n.user,r,"internal-error"),e.abrupt("return",Ca._forOperation(n.user,n.operationType,u));case 17:hr(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function Do(e,t){return Rr(e,"POST","/v2/accounts/mfaEnrollment:start",Ar(e,t))}var Po=function(){function e(t){var n=this;Te(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return Za._fromServerResponse(t.auth,e)})))}))}return Ne(e,[{key:"getSession",value:function(){var e=kt(vt().mark((function e(){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Ao,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=kt(vt().mark((function e(t,n){var r,i,a;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,$r(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=kt(vt().mark((function e(t){var n,r,i,a;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return i=e.sent,e.next=6,$r(this.user,Rr(o=this.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",Ar(o,{idToken:i,mfaEnrollmentId:r})));case 6:return a=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==r})),e.next=10,this.user._updateTokensIfNecessary(a);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),(null===(n=e.t0)||void 0===n?void 0:n.code)==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}var o}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),Oo=new WeakMap;var Lo="__sak",Mo=function(){function e(t,n){Te(this,e),this.storageRetriever=t,this.type=n}return Ne(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(Lo,"1"),this.storage.removeItem(Lo),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var Fo=function(e){Pe(n,e);var t=Ue(n);function n(){var e;return Te(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=Qe();return yi(e)||_i(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=Ei(),e._shouldAllowMigration=!0,e}return Ne(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);Si()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=kt(vt().mark((function e(t,r){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hn(Oe(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=kt(vt().mark((function e(t){var r;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hn(Oe(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=kt(vt().mark((function e(t){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hn(Oe(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Mo);Fo.type="LOCAL";var Uo=Fo,jo=function(e){Pe(n,e);var t=Ue(n);function n(){return Te(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return Ne(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(Mo);jo.type="SESSION";var Vo=jo;function Bo(e){return Promise.all(e.map(function(){var e=kt(vt().mark((function e(t){var n;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var zo=function(){function e(t){Te(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return Ne(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=kt(vt().mark((function e(t){var n,r,i,a,o,u,s,c;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=kt(vt().mark((function e(t){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,Bo(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function qo(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}zo.receivers=[];var Go=function(){function e(t){Te(this,e),this.target=t,this.handlers=new Set}return Ne(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=kt(vt().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=qo("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Ko(){return window}function Ho(){return"undefined"!==typeof Ko().WorkerGlobalScope&&"function"===typeof Ko().importScripts}function Wo(){return Qo.apply(this,arguments)}function Qo(){return(Qo=kt(vt().mark((function e(){var t;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Yo(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var $o="firebaseLocalStorageDb",Xo="firebaseLocalStorage",Jo="fbase_key",Zo=function(){function e(t){Te(this,e),this.request=t}return Ne(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function eu(e,t){return e.transaction([Xo],t?"readwrite":"readonly").objectStore(Xo)}function tu(){var e=indexedDB.deleteDatabase($o);return new Zo(e).toPromise()}function nu(){var e=indexedDB.open($o,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(Xo,{keyPath:Jo})}catch(r){n(r)}})),e.addEventListener("success",kt(vt().mark((function n(){var r;return vt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(Xo)){n.next=12;break}return r.close(),n.next=5,tu();case 5:return n.t0=t,n.next=8,nu();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function ru(e,t,n){return iu.apply(this,arguments)}function iu(){return iu=kt(vt().mark((function e(t,n,r){var i,a;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=eu(t,!0).put((ke(i={},Jo,n),ke(i,"value",r),i)),e.abrupt("return",new Zo(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),iu.apply(this,arguments)}function au(e,t){return ou.apply(this,arguments)}function ou(){return ou=kt(vt().mark((function e(t,n){var r,i;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=eu(t,!1).get(n),e.next=3,new Zo(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),ou.apply(this,arguments)}function uu(e,t){var n=eu(e,!0).delete(t);return new Zo(n).toPromise()}var su=function(){function e(){Te(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return Ne(e,[{key:"_openDb",value:function(){var e=kt(vt().mark((function e(){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,nu();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=kt(vt().mark((function e(t){var n,r;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=kt(vt().mark((function e(){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ho()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=kt(vt().mark((function e(){var t=this;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=zo._getInstance(Ho()?self:null),this.receiver._subscribe("keyChanged",function(){var e=kt(vt().mark((function e(n,r){var i;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=kt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=kt(vt().mark((function e(){var t,n,r;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wo();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Go(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=kt(vt().mark((function e(t){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&Yo()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=kt(vt().mark((function e(){var t;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,nu();case 5:return t=e.sent,e.next=8,ru(t,Lo,"1");case 8:return e.next=10,uu(t,Lo);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=kt(vt().mark((function e(t){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=kt(vt().mark((function e(t,n){var r=this;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(kt(vt().mark((function e(){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return ru(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=kt(vt().mark((function e(t){var n;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return au(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=kt(vt().mark((function e(t){var n=this;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(kt(vt().mark((function e(){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return uu(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=kt(vt().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=eu(e,!1).getAll();return new Zo(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=Ae(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(kt(vt().mark((function t(){return vt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();su.type="LOCAL";var cu=su;function lu(e,t){return Rr(e,"POST","/v2/accounts/mfaSignIn:start",Ar(e,t))}function fu(e){return hu.apply(this,arguments)}function hu(){return(hu=kt(vt().mark((function e(t){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rr(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function du(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=dr("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function pu(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var vu=1e12,mu=function(){function e(t){Te(this,e),this.auth=t,this.counter=vu,this._widgets=new Map}return Ne(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new yu(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||vu;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||vu;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=kt(vt().mark((function e(t){var n,r;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||vu,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),yu=function(){function e(t,n,r){var i=this;Te(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;yr(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return Ne(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var gu=pu("rcb"),ku=new Sr(3e4,6e4),bu="https://www.google.com/recaptcha/api.js?",wu=function(){function e(){var t;Te(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=Ko().grecaptcha)||void 0===t?void 0:t.render)}return Ne(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return yr(xu(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(Ko().grecaptcha):new Promise((function(r,i){var a=Ko().setTimeout((function(){i(dr(e,"network-request-failed"))}),ku.get());Ko()[gu]=function(){Ko().clearTimeout(a),delete Ko()[gu];var o=Ko().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(dr(e,"internal-error"))},du("".concat(bu,"?").concat(st({onload:gu,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(dr(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=Ko().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function xu(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var _u=function(){function e(){Te(this,e)}return Ne(e,[{key:"load",value:function(){var e=kt(vt().mark((function e(t){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new mu(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),Iu="recaptcha",Su={theme:"light",type:"image"},Eu=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},Su),r=arguments.length>2?arguments[2]:void 0;Te(this,e),this.parameters=n,this.type=Iu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ai(r),this.isInvisible="invisible"===this.parameters.size,yr("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;yr(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new _u:new wu,this.validateStartingState()}return Ne(e,[{key:"verify",value:function(){var e=kt(vt().mark((function e(){var t,n,r,i=this;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){yr(!this.parameters.sitekey,this.auth,"argument-error"),yr(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),yr("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=Ko()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){yr(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=kt(vt().mark((function e(){var t,n;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=kt(vt().mark((function e(){var t;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return yr(_r()&&!Ho(),this.auth,"internal-error"),e.next=3,Tu();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,fu(this.auth);case 8:yr(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return yr(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function Tu(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var Cu=function(){function e(t,n){Te(this,e),this.verificationId=t,this.onConfirmation=n}return Ne(e,[{key:"confirm",value:function(e){var t=pa._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function Nu(){return(Nu=kt(vt().mark((function e(t,n,r){var i,a;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ai(t),e.next=3,Pu(i,n,pt(r));case 3:return a=e.sent,e.abrupt("return",new Cu(a,(function(e){return Ga(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Au(e,t,n){return Ru.apply(this,arguments)}function Ru(){return(Ru=kt(vt().mark((function e(t,n,r){var i,a;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=pt(t),e.next=3,Ua(!1,i,"phone");case 3:return e.next=5,Pu(i.auth,n,pt(r));case 5:return a=e.sent,e.abrupt("return",new Cu(a,(function(e){return Ha(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Du(){return(Du=kt(vt().mark((function e(t,n,r){var i,a;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=pt(t),e.next=3,Pu(i.auth,n,pt(r));case 3:return a=e.sent,e.abrupt("return",new Cu(a,(function(e){return Qa(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pu(e,t,n){return Ou.apply(this,arguments)}function Ou(){return Ou=kt(vt().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,yr("string"===typeof a,t,"argument-error"),yr(r.type===Iu,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return yr("enroll"===u.type,t,"internal-error"),e.next=13,Do(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return yr("signin"===u.type,t,"internal-error"),yr(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,lu(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,sa(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),Ou.apply(this,arguments)}function Lu(){return(Lu=kt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ma(pt(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Mu=function(){function e(t){Te(this,e),this.providerId=e.PROVIDER_ID,this.auth=Ai(t)}return Ne(e,[{key:"verifyPhoneNumber",value:function(e,t){return Pu(this.auth,e,pt(t))}}],[{key:"credential",value:function(e,t){return pa._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?pa._fromTokenResponse(n,r):null}}]),e}();function Fu(e,t){return t?wr(t):(yr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Mu.PROVIDER_ID="phone",Mu.PHONE_SIGN_IN_METHOD="phone";var Uu=function(e){Pe(n,e);var t=Ue(n);function n(e){var r;return Te(this,n),(r=t.call(this,"custom","custom")).params=e,r}return Ne(n,[{key:"_getIdTokenResponse",value:function(e){return aa(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return aa(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return aa(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(Li);function ju(e){return za(e.auth,new Uu(e),e.bypassAuthState)}function Vu(e){var t=e.auth,n=e.user;return yr(n,t,"internal-error"),Va(n,new Uu(e),e.bypassAuthState)}function Bu(e){return zu.apply(this,arguments)}function zu(){return(zu=kt(vt().mark((function e(t){var n,r;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,yr(r=t.user,n,"internal-error"),e.abrupt("return",Ma(r,new Uu(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var qu=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Te(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return Ne(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=kt(vt().mark((function t(n,r){return vt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=kt(vt().mark((function e(t){var n,r,i,a,o,u,s;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ju;case"linkViaPopup":case"linkViaRedirect":return Bu;case"reauthViaPopup":case"reauthViaRedirect":return Vu;default:hr(this.auth,"internal-error")}}},{key:"resolve",value:function(e){kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Gu=new Sr(2e3,1e4);function Ku(e,t,n){return Hu.apply(this,arguments)}function Hu(){return(Hu=kt(vt().mark((function e(t,n,r){var i,a,o;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ai(t),vr(t,n,ya),a=Fu(i,r),o=new $u(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wu(){return(Wu=kt(vt().mark((function e(t,n,r){var i,a,o;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return vr((i=pt(t)).auth,n,ya),a=Fu(i.auth,r),o=new $u(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qu(e,t,n){return Yu.apply(this,arguments)}function Yu(){return(Yu=kt(vt().mark((function e(t,n,r){var i,a,o;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return vr((i=pt(t)).auth,n,ya),a=Fu(i.auth,r),o=new $u(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $u=function(e){Pe(n,e);var t=Ue(n);function n(e,r,i,a,o){var u;return Te(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=Re(u),u}return Ne(n,[{key:"executeNotNull",value:function(){var e=kt(vt().mark((function e(){var t;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return yr(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=kt(vt().mark((function e(){var t,n=this;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return kr(1===this.filter.length,"Popup operations only handle one event"),t=qo(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(dr(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(dr(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(dr(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,Gu.get())}()}}]),n}(qu);$u.currentPopupAction=null;var Xu=new Map,Ju=function(e){Pe(n,e);var t=Ue(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Te(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return Ne(n,[{key:"execute",value:function(){var e=kt(vt().mark((function e(){var t,r;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Xu.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Zu(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Hn(Oe(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:Xu.set(this.auth._key(),t);case 21:return this.bypassAuthState||Xu.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=kt(vt().mark((function e(t){var r;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Hn(Oe(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Hn(Oe(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=kt(vt().mark((function e(){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(qu);function Zu(e,t){return es.apply(this,arguments)}function es(){return(es=kt(vt().mark((function e(t,n){var r,i,a;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=as(n),i=is(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ts(e,t){return ns.apply(this,arguments)}function ns(){return(ns=kt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",is(t)._set(as(n),"true"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rs(e,t){Xu.set(e._key(),t)}function is(e){return wr(e._redirectPersistence)}function as(e){return di("pendingRedirect",e.config.apiKey,e.name)}function os(e,t,n){return function(e,t,n){return us.apply(this,arguments)}(e,t,n)}function us(){return(us=kt(vt().mark((function e(t,n,r){var i,a;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ai(t),vr(t,n,ya),a=Fu(i,r),e.next=5,ts(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ss(e,t,n){return function(e,t,n){return cs.apply(this,arguments)}(e,t,n)}function cs(){return(cs=kt(vt().mark((function e(t,n,r){var i,a,o;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return vr((i=pt(t)).auth,n,ya),a=Fu(i.auth,r),e.next=5,ts(a,i.auth);case 5:return e.next=7,ms(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ls(e,t,n){return function(e,t,n){return fs.apply(this,arguments)}(e,t,n)}function fs(){return(fs=kt(vt().mark((function e(t,n,r){var i,a,o;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return vr((i=pt(t)).auth,n,ya),a=Fu(i.auth,r),e.next=5,Ua(!1,i,n.providerId);case 5:return e.next=7,ts(a,i.auth);case 7:return e.next=9,ms(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hs(e,t){return ds.apply(this,arguments)}function ds(){return(ds=kt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ai(t)._initializationPromise;case 2:return e.abrupt("return",ps(t,n,!1));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ps(e,t){return vs.apply(this,arguments)}function vs(){return vs=kt(vt().mark((function e(t,n){var r,i,a,o,u,s=arguments;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=Ai(t),a=Fu(i,n),o=new Ju(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),vs.apply(this,arguments)}function ms(e){return ys.apply(this,arguments)}function ys(){return(ys=kt(vt().mark((function e(t){var n;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=qo("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var gs=function(){function e(t){Te(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return Ne(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bs(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!bs(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(dr(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ks(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(ks(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function ks(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function bs(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function ws(e){return xs.apply(this,arguments)}function xs(){return xs=kt(vt().mark((function e(t){var n,r=arguments;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Rr(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),xs.apply(this,arguments)}var _s=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Is=/^https?/;function Ss(){return(Ss=kt(vt().mark((function e(t){var n,r,i,a,o;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ws(t);case 4:n=e.sent,r=n.authorizedDomains,i=Ae(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!Es(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:hr(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function Es(e){var t=xr(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!Is.test(r))return!1;if(_s.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var Ts=new Sr(3e4,6e4);function Cs(){var e=Ko().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=yt(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var Ns=null;function As(e){return Ns=Ns||function(e){return new Promise((function(t,n){var r,i,a;function o(){Cs(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){Cs(),n(dr(e,"network-request-failed"))},timeout:Ts.get()})}if(null===(i=null===(r=Ko().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Ko().gapi)||void 0===a?void 0:a.load)){var u=pu("iframefcb");return Ko()[u]=function(){gapi.load?o():n(dr(e,"network-request-failed"))},du("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw Ns=null,e}))}(e),Ns}var Rs=new Sr(5e3,15e3),Ds={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ps=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Os(e){var t=e.config;yr(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Er(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:pn},i=Ps.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(st(r).slice(1))}function Ls(e){return Ms.apply(this,arguments)}function Ms(){return Ms=kt(vt().mark((function e(t){var n,r;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,As(t);case 2:return n=e.sent,yr(r=Ko().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:Os(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ds,dontclear:!0},(function(e){return new Promise(function(){var n=kt(vt().mark((function n(r,i){var a,o,u;return vt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){Ko().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=dr(t,"network-request-failed"),o=Ko().setTimeout((function(){i(a)}),Rs.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),Ms.apply(this,arguments)}var Fs={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Us="_blank",js="http://localhost",Vs=function(){function e(t){Te(this,e),this.window=t,this.associatedEvent=null}return Ne(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function Bs(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},Fs),{width:r.toString(),height:i.toString(),top:a,left:o}),l=Qe().toLowerCase();n&&(u=gi(l)?Us:n),mi(l)&&(t=t||js,s.scrollbars="yes");var f=Object.entries(s).reduce((function(e,t){var n=c(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(Ii(l)&&"_self"!==u)return zs(t||"",u),new Vs(null);var h=window.open(t||"",u,f);yr(h,e,"popup-blocked");try{h.focus()}catch(d){}return new Vs(h)}function zs(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var qs="__/auth/handler",Gs="emulator/auth/handler";function Ks(e,t,n,r,i,a){yr(e.config.authDomain,e,"auth-domain-config-required"),yr(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:pn,eventId:i};if(t instanceof ya){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,s=Object.entries(a||{});u<s.length;u++){var l=c(s[u],2),f=l[0],h=l[1];o[f]=h}}if(t instanceof ga){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var p=o,v=0,m=Object.keys(p);v<m.length;v++){var y=m[v];void 0===p[y]&&delete p[y]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(qs);return Er(t,Gs)}(e),"?").concat(st(p).slice(1))}var Hs="webStorageSupport",Ws=function(){function e(){Te(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Vo,this._completeRedirectFn=ps,this._overrideRedirectResult=rs}return Ne(e,[{key:"_openPopup",value:function(){var e=kt(vt().mark((function e(t,n,r,i){var a,o;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return kr(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=Ks(t,n,r,xr(),i),e.abrupt("return",Bs(t,o,qo()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=kt(vt().mark((function e(t,n,r,i){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=Ks(t,n,r,xr(),i),Ko().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(kr(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=kt(vt().mark((function e(t){var n,r;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ls(t);case 2:return n=e.sent,r=new gs(t),n.register("authEvent",(function(e){return yr(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(Hs,{type:Hs},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),hr(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Ss.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Ei()||yi()||_i()}}]),e}(),Qs=Ws,Ys=function(e){Pe(n,e);var t=Ue(n);function n(e){var r;return Te(this,n),(r=t.call(this,"phone")).credential=e,r}return Ne(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Rr(e,"POST","/v2/accounts/mfaEnrollment:finalize",Ar(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Rr(e,"POST","/v2/accounts/mfaSignIn:finalize",Ar(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(function(){function e(t){Te(this,e),this.factorId=t}return Ne(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return gr("unexpected MultiFactorSessionType")}}}]),e}()),$s=function(){function e(){Te(this,e)}return Ne(e,null,[{key:"assertion",value:function(e){return Ys._fromCredential(e)}}]),e}();$s.FACTOR_ID="phone";var Xs,Js="@firebase/auth",Zs="0.20.6",ec=function(){function e(t){Te(this,e),this.auth=t,this.internalListeners=new Map}return Ne(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=kt(vt().mark((function e(t){var n;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){yr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function tc(){return window}Xs="Browser",un(new bt("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){yr(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),yr(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:Xs,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ti(Xs)},i=new Ni(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(wr);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),un(new bt("auth-internal",(function(e){return function(e){return new ec(e)}(Ai(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),bn(Js,Zs,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Xs)),bn(Js,Zs,"esm2017");function nc(e,t,n){return rc.apply(this,arguments)}function rc(){return rc=kt(vt().mark((function e(t,n,r){var i,a,o,u,s;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=tc(),o=a.BuildInfo,kr(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,cc(n.sessionId);case 4:return u=e.sent,s={},_i()?s.ibi=o.packageName:bi()?s.apn=o.packageName:hr(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",Ks(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),rc.apply(this,arguments)}function ic(){return(ic=kt(vt().mark((function e(t){var n,r,i;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=tc(),r=n.BuildInfo,i={},_i()?i.iosBundleId=r.packageName:bi()?i.androidPackageName=r.packageName:hr(t,"operation-not-supported-in-this-environment"),e.next=5,ws(t,i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ac(e){var t=tc().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function oc(e,t,n){return uc.apply(this,arguments)}function uc(){return uc=kt(vt().mark((function e(t,n,r){var i,a,o;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=tc(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(dr(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),bi()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),uc.apply(this,arguments)}function sc(e){var t,n,r,i,a,o,u,s,c,l,f=tc();yr("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),yr("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),yr("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),yr("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),yr("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function cc(e){return lc.apply(this,arguments)}function lc(){return(lc=kt(vt().mark((function e(t){var n,r,i;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=fc(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fc(e){if(kr(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var hc=function(e){Pe(n,e);var t=Ue(n);function n(){var e;return Te(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return Ne(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),Hn(Oe(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=kt(vt().mark((function e(){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(gs);function dc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:gc(),postBody:null,tenantId:e.tenantId,error:dr(e,"no-auth-event")}}function pc(e,t){return kc()._set(bc(e),t)}function vc(e){return mc.apply(this,arguments)}function mc(){return(mc=kt(vt().mark((function e(t){var n;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kc()._get(bc(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,kc()._remove(bc(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yc(e,t){var n,r,i=function(e){var t=wc(e),n=t.link?decodeURIComponent(t.link):void 0,r=wc(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return wc(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=wc(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?dr(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function gc(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function kc(){return wr(Uo)}function bc(e){return di("authEvent",e.config.apiKey,e.name)}function wc(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=a(t=n)||mt(t)||u(t)||s();r[0];return ct(r.slice(1).join("?"))}var xc=function(){function e(){Te(this,e),this._redirectPersistence=Vo,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ps,this._overrideRedirectResult=rs}return Ne(e,[{key:"_initialize",value:function(){var e=kt(vt().mark((function e(t){var n,r;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new hc(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){hr(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=kt(vt().mark((function e(t,n,r,i){var a,o,u,s;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return sc(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),Xu.clear(),e.next=10,this._originValidation(t);case 10:return o=dc(t,r,i),e.next=13,pc(t,o);case 13:return e.next=15,nc(t,o,n);case 15:return u=e.sent,e.next=18,ac(u);case 18:return s=e.sent,e.abrupt("return",oc(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return ic.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=tc(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(kt(vt().mark((function n(){return vt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,vc(e);case 2:t.onEvent(Ic());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=kt(vt().mark((function n(r){var i,a;return vt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,vc(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=yc(i,r.url)),t.onEvent(a||Ic());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");tc().handleOpenURL=function(){var e=kt(vt().mark((function e(t){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),_c=xc;function Ic(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:dr("no-auth-event")}}function Sc(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function Ec(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe();return!("file:"!==Sc()&&"ionic:"!==Sc()&&"capacitor:"!==Sc()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Tc(){return Ze()&&11===(null===document||void 0===document?void 0:document.documentMode)}function Cc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe();return/Edge\/\d+/.test(e)}function Nc(){try{var e=self.localStorage,t=qo();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe();return Tc()||Cc(e)}()||et()}catch(n){return Ac()&&et()}return!1}function Ac(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function Rc(){return("http:"===Sc()||"https:"===Sc()||Xe()||Ec())&&!(Je()||$e())&&Nc()&&!Ac()}function Dc(){return Ec()&&"undefined"!==typeof document}function Pc(){return Oc.apply(this,arguments)}function Oc(){return(Oc=kt(vt().mark((function e(){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Dc()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Lc={LOCAL:"local",NONE:"none",SESSION:"session"},Mc=yr,Fc="persistence";function Uc(e,t){Mc(Object.values(Lc).includes(t),e,"invalid-persistence-type"),Je()?Mc(t!==Lc.SESSION,e,"unsupported-persistence-type"):$e()?Mc(t===Lc.NONE,e,"unsupported-persistence-type"):Ac()?Mc(t===Lc.NONE||t===Lc.LOCAL&&et(),e,"unsupported-persistence-type"):Mc(t===Lc.NONE||Nc(),e,"unsupported-persistence-type")}function jc(e){return Vc.apply(this,arguments)}function Vc(){return(Vc=kt(vt().mark((function e(t){var n,r;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=Bc(),r=di(Fc,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bc(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var zc=yr,qc=function(){function e(){Te(this,e),this.browserResolver=wr(Qs),this.cordovaResolver=wr(_c),this.underlyingResolver=null,this._redirectPersistence=Vo,this._completeRedirectFn=ps,this._overrideRedirectResult=rs}return Ne(e,[{key:"_initialize",value:function(){var e=kt(vt().mark((function e(t){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=kt(vt().mark((function e(t,n,r,i){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=kt(vt().mark((function e(t,n,r,i){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return Dc()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return zc(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=kt(vt().mark((function e(){var t;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Pc();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Gc(e){return e.unwrap()}function Kc(e,t){var n,r,i=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===(r=t)||void 0===r?void 0:r.code))t.resolver=new $c(e,function(e,t){var n,r=pt(e),i=t;return yr(t.customData.operationType,r,"argument-error"),yr(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Ro._fromError(r,i)}(e,t));else if(i){var a=Hc(t),o=t;a&&(o.credential=a,o.tenantId=i.tenantId||void 0,o.email=i.email||void 0,o.phoneNumber=i.phoneNumber||void 0)}}function Hc(e){var t=(e instanceof tt?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof tt)&&"temporaryProof"in t&&"phoneNumber"in t)return Mu.credentialFromResult(e);var n,r=t.providerId;if(!r||r===Jn)return null;switch(r){case Xn:n=wa;break;case Yn:n=ba;break;case $n:n=xa;break;case Zn:n=Sa;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?_a._create(r,u):ua._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new ka(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof tt?n.credentialFromError(e):n.credentialFromResult(e)}function Wc(e,t){return t.catch((function(t){throw t instanceof tt&&Kc(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,Hc(t)),additionalUserInfo:No(e),user:Xc.getOrCreate(r)}}))}function Qc(e,t){return Yc.apply(this,arguments)}function Yc(){return(Yc=kt(vt().mark((function e(t,n){var r;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return Wc(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $c=function(){function e(t,n){Te(this,e),this.resolver=n,this.auth=t.wrapped()}return Ne(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return Wc(Gc(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),Xc=function(){function e(t){Te(this,e),this._delegate=t,this.multiFactor=function(e){var t=pt(e);return Oo.has(t)||Oo.set(t,Po._fromUser(t)),Oo.get(t)}(t)}return Ne(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=kt(vt().mark((function e(t){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wc(this.auth,Ha(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=kt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qc(this.auth,Au(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=kt(vt().mark((function e(t){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wc(this.auth,Qu(this._delegate,t,qc)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=kt(vt().mark((function e(t){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jc(Ai(this.auth));case 2:return e.abrupt("return",ls(this._delegate,t,qc));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=kt(vt().mark((function e(t){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wc(this.auth,Qa(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return Qc(this.auth,function(e,t,n){return Du.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return Wc(this.auth,function(e,t,n){return Wu.apply(this,arguments)}(this._delegate,e,qc))}},{key:"reauthenticateWithRedirect",value:function(){var e=kt(vt().mark((function e(t){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jc(Ai(this.auth));case 2:return e.abrupt("return",ss(this._delegate,t,qc));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return mo.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=kt(vt().mark((function e(t){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oa(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return wo(pt(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return wo(pt(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return Lu.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return bo.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return yo.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();Xc.USER_MAP=new WeakMap;var Jc=yr,Zc=function(){function e(t,n){if(Te(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;Jc(r,"invalid-api-key",{appName:t.name}),Jc(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?qc:void 0;this._delegate=n.initialize({options:{persistence:tl(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(ur),this.linkUnderlyingAuth()}return Ne(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?Xc.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){Di(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return io.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return ao(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return ro.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=kt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wc(this._delegate,so(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return vo.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=va.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=kt(vt().mark((function e(){var t;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Jc(Rc(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,hs(this._delegate,qc);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",Wc(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){Ai(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=el(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=el(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return lo.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return no.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=kt(vt().mark((function e(t){var n,r;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Uc(this._delegate,t),e.t0=t,e.next=e.t0===Lc.SESSION?4:e.t0===Lc.LOCAL?6:e.t0===Lc.NONE?11:13;break;case 4:return n=Vo,e.abrupt("break",14);case 6:return e.next=8,wr(cu)._isAvailable();case 8:return r=e.sent,n=r?cu:Uo,e.abrupt("break",14);case 11:return n=hi,e.abrupt("break",14);case 13:return e.abrupt("return",hr("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return Wc(this._delegate,function(e){return Aa.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return Wc(this._delegate,Ga(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return Wc(this._delegate,function(e,t){return Ja.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return Wc(this._delegate,function(e,t,n){return Ga(pt(e),ma.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return Wc(this._delegate,function(e,t,n){return fo.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return Qc(this._delegate,function(e,t,n){return Nu.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=kt(vt().mark((function e(t){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Jc(Rc(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",Wc(this._delegate,Ku(this._delegate,t,qc)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=kt(vt().mark((function e(t){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Jc(Rc(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,jc(this._delegate);case 3:return e.abrupt("return",os(this._delegate,t,qc));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return uo.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function el(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&Xc.getOrCreate(e))},error:t,complete:n}}function tl(e,t){var n=function(e,t){var n=Bc();if(!n)return[];var r=di(Fc,e,t);switch(n.getItem(r)){case Lc.NONE:return[hi];case Lc.LOCAL:return[cu,Vo];case Lc.SESSION:return[Vo];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(cu)||n.push(cu),"undefined"!==typeof window)for(var r=0,i=[Uo,Vo];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(hi)||n.push(hi),n}Zc.Persistence=Lc;var nl=function(){function e(){Te(this,e),this.providerId="phone",this._delegate=new Mu(Gc(Gn.auth()))}return Ne(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return Mu.credential(e,t)}}]),e}();nl.PHONE_SIGN_IN_METHOD=Mu.PHONE_SIGN_IN_METHOD,nl.PROVIDER_ID=Mu.PROVIDER_ID;var rl,il=yr,al=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Gn.app();Te(this,e),il(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new Eu(t,n,i.auth()),this.type=this._delegate.type}return Ne(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(rl=Gn).INTERNAL.registerComponent(new bt("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Zc(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:er,PASSWORD_RESET:tr,RECOVER_EMAIL:nr,REVERT_SECOND_FACTOR_ADDITION:rr,VERIFY_AND_CHANGE_EMAIL:ir,VERIFY_EMAIL:ar}},EmailAuthProvider:ma,FacebookAuthProvider:ba,GithubAuthProvider:xa,GoogleAuthProvider:wa,OAuthProvider:ka,SAMLAuthProvider:Ia,PhoneAuthProvider:nl,PhoneMultiFactorGenerator:$s,RecaptchaVerifier:al,TwitterAuthProvider:Sa,Auth:Zc,AuthCredential:Li,Error:tt}).setInstantiationMode("LAZY").setMultipleInstances(!1)),rl.registerVersion("@firebase/auth-compat","0.2.19");var ol,ul="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},sl={},cl=cl||{},ll=ul||self;function fl(){}function hl(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function dl(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var pl="closure_uid_"+(1e9*Math.random()>>>0),vl=0;function ml(e,t,n){return e.call.apply(e.bind,arguments)}function yl(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function gl(e,t,n){return(gl=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ml:yl).apply(null,arguments)}function kl(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function bl(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function wl(){this.s=this.s,this.o=this.o}var xl={};wl.prototype.s=!1,wl.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,pl)&&e[pl]||(e[pl]=++vl)}(this);delete xl[e]}},wl.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var _l=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Il=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function Sl(e){return Array.prototype.concat.apply([],arguments)}function El(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Tl(e){return/^[\s\xa0]*$/.test(e)}var Cl,Nl=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Al(e,t){return-1!=e.indexOf(t)}function Rl(e,t){return e<t?-1:e>t?1:0}e:{var Dl=ll.navigator;if(Dl){var Pl=Dl.userAgent;if(Pl){Cl=Pl;break e}}Cl=""}function Ol(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Ll(e){var t={};for(var n in e)t[n]=e[n];return t}var Ml="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Fl(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Ml.length;a++)n=Ml[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Ul(e){return Ul[" "](e),e}Ul[" "]=fl;var jl,Vl=Al(Cl,"Opera"),Bl=Al(Cl,"Trident")||Al(Cl,"MSIE"),zl=Al(Cl,"Edge"),ql=zl||Bl,Gl=Al(Cl,"Gecko")&&!(Al(Cl.toLowerCase(),"webkit")&&!Al(Cl,"Edge"))&&!(Al(Cl,"Trident")||Al(Cl,"MSIE"))&&!Al(Cl,"Edge"),Kl=Al(Cl.toLowerCase(),"webkit")&&!Al(Cl,"Edge");function Hl(){var e=ll.document;return e?e.documentMode:void 0}e:{var Wl="",Ql=function(){var e=Cl;return Gl?/rv:([^\);]+)(\)|;)/.exec(e):zl?/Edge\/([\d\.]+)/.exec(e):Bl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Kl?/WebKit\/(\S+)/.exec(e):Vl?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Ql&&(Wl=Ql?Ql[1]:""),Bl){var Yl=Hl();if(null!=Yl&&Yl>parseFloat(Wl)){jl=String(Yl);break e}}jl=Wl}var $l,Xl={};function Jl(){return function(e){var t=Xl;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=Nl(String(jl)).split("."),n=Nl("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=Rl(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||Rl(0==a[2].length,0==o[2].length)||Rl(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(ll.document&&Bl){var Zl=Hl();$l=Zl||(parseInt(jl,10)||void 0)}else $l=void 0;var ef=$l,tf=function(){if(!ll.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{ll.addEventListener("test",fl,t),ll.removeEventListener("test",fl,t)}catch(n){}return e}();function nf(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function rf(e,t){if(nf.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Gl){e:{try{Ul(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:af[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&rf.Z.h.call(this)}}nf.prototype.h=function(){this.defaultPrevented=!0},bl(rf,nf);var af={2:"touch",3:"pen",4:"mouse"};rf.prototype.h=function(){rf.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var of="closure_listenable_"+(1e6*Math.random()|0),uf=0;function sf(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++uf,this.ca=this.fa=!1}function cf(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function lf(e){this.src=e,this.g={},this.h=0}function ff(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=_l(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(cf(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function hf(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}lf.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=hf(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new sf(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var df="closure_lm_"+(1e6*Math.random()|0),pf={};function vf(e,t,n,r,i){if(r&&r.once)return yf(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)vf(e,t[a],n,r,i);return null}return n=If(n),e&&e[of]?e.N(t,n,dl(r)?!!r.capture:!!r,i):mf(e,t,n,!1,r,i)}function mf(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=dl(i)?!!i.capture:!!i,u=xf(e);if(u||(e[df]=u=new lf(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=wf;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)tf||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(bf(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function yf(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)yf(e,t[a],n,r,i);return null}return n=If(n),e&&e[of]?e.O(t,n,dl(r)?!!r.capture:!!r,i):mf(e,t,n,!0,r,i)}function gf(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)gf(e,t[a],n,r,i);else r=dl(r)?!!r.capture:!!r,n=If(n),e&&e[of]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=hf(a=e.g[t],n,r,i))&&(cf(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=xf(e))&&(t=e.g[t.toString()],e=-1,t&&(e=hf(t,n,r,i)),(n=-1<e?t[e]:null)&&kf(n))}function kf(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[of])ff(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(bf(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=xf(t))?(ff(n,e),0==n.h&&(n.src=null,t[df]=null)):cf(e)}}}function bf(e){return e in pf?pf[e]:pf[e]="on"+e}function wf(e,t){if(e.ca)e=!0;else{t=new rf(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&kf(e),e=n.call(r,t)}return e}function xf(e){return(e=e[df])instanceof lf?e:null}var _f="__closure_events_fn_"+(1e9*Math.random()>>>0);function If(e){return"function"===typeof e?e:(e[_f]||(e[_f]=function(t){return e.handleEvent(t)}),e[_f])}function Sf(){wl.call(this),this.i=new lf(this),this.P=this,this.I=null}function Ef(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new nf(t,e);else if(t instanceof nf)t.target=t.target||e;else{var i=t;Fl(t=new nf(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Tf(o,r,!0,t)&&i}if(i=Tf(o=t.g=e,r,!0,t)&&i,i=Tf(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Tf(o=t.g=n[a],r,!1,t)&&i}function Tf(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var u=o.listener,s=o.ia||o.src;o.fa&&ff(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}bl(Sf,wl),Sf.prototype[of]=!0,Sf.prototype.removeEventListener=function(e,t,n,r){gf(this,e,t,n,r)},Sf.prototype.M=function(){if(Sf.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)cf(n[r]);delete t.g[e],t.h--}}this.I=null},Sf.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Sf.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Cf=ll.JSON.stringify;function Nf(){var e=Ff,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Af,Rf=function(){function e(){Te(this,e),this.h=this.g=null}return Ne(e,[{key:"add",value:function(e,t){var n=Df.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Df=new(function(){function e(t,n){Te(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return Ne(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new Pf}),(function(e){return e.reset()})),Pf=function(){function e(){Te(this,e),this.next=this.g=this.h=null}return Ne(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Of(e){ll.setTimeout((function(){throw e}),0)}function Lf(e,t){Af||function(){var e=ll.Promise.resolve(void 0);Af=function(){e.then(Uf)}}(),Mf||(Af(),Mf=!0),Ff.add(e,t)}var Mf=!1,Ff=new Rf;function Uf(){for(var e;e=Nf();){try{e.h.call(e.g)}catch(n){Of(n)}var t=Df;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Mf=!1}function jf(e,t){Sf.call(this),this.h=e||1,this.g=t||ll,this.j=gl(this.kb,this),this.l=Date.now()}function Vf(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function Bf(e,t,n){if("function"===typeof e)n&&(e=gl(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=gl(e.handleEvent,e)}return 2147483647<Number(t)?-1:ll.setTimeout(e,t||0)}function zf(e){e.g=Bf((function(){e.g=null,e.i&&(e.i=!1,zf(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}bl(jf,Sf),(ol=jf.prototype).da=!1,ol.S=null,ol.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Ef(this,"tick"),this.da&&(Vf(this),this.start()))}},ol.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ol.M=function(){jf.Z.M.call(this),Vf(this),delete this.g};var qf=function(e){Pe(n,e);var t=Ue(n);function n(e,r){var i;return Te(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return Ne(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:zf(this)}},{key:"M",value:function(){Hn(Oe(n.prototype),"M",this).call(this),this.g&&(ll.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(wl);function Gf(e){wl.call(this),this.h=e,this.g={}}bl(Gf,wl);var Kf=[];function Hf(e,t,n,r){Array.isArray(n)||(n&&(Kf[0]=n.toString()),n=Kf);for(var i=0;i<n.length;i++){var a=vf(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Wf(e){Ol(e.g,(function(e,t){this.g.hasOwnProperty(t)&&kf(e)}),e),e.g={}}function Qf(){this.g=!0}function Yf(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Cf(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}Gf.prototype.M=function(){Gf.Z.M.call(this),Wf(this)},Gf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Qf.prototype.Aa=function(){this.g=!1},Qf.prototype.info=function(){};var $f={},Xf=null;function Jf(){return Xf=Xf||new Sf}function Zf(e){nf.call(this,$f.Ma,e)}function eh(e){var t=Jf();Ef(t,new Zf(t,e))}function th(e,t){nf.call(this,$f.STAT_EVENT,e),this.stat=t}function nh(e){var t=Jf();Ef(t,new th(t,e))}function rh(e,t){nf.call(this,$f.Na,e),this.size=t}function ih(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return ll.setTimeout((function(){e()}),t)}$f.Ma="serverreachability",bl(Zf,nf),$f.STAT_EVENT="statevent",bl(th,nf),$f.Na="timingevent",bl(rh,nf);var ah={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},oh={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function uh(){}function sh(e){return e.h||(e.h=e.i())}function ch(){}uh.prototype.h=null;var lh,fh={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function hh(){nf.call(this,"d")}function dh(){nf.call(this,"c")}function ph(){}function vh(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Gf(this),this.P=yh,e=ql?125:void 0,this.W=new jf(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new mh}function mh(){this.i=null,this.g="",this.h=!1}bl(hh,nf),bl(dh,nf),bl(ph,uh),ph.prototype.g=function(){return new XMLHttpRequest},ph.prototype.i=function(){return{}},lh=new ph;var yh=45e3,gh={},kh={};function bh(e,t,n){e.K=1,e.v=qh(Fh(t)),e.s=n,e.U=!0,wh(e,null)}function wh(e,t){e.F=Date.now(),Sh(e),e.A=Fh(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),nd(n.h,"t",r),e.C=0,n=e.l.H,e.h=new mh,e.g=ip(e.l,n?t:null,!e.s),0<e.O&&(e.L=new qf(gl(e.Ia,e,e.g),e.O)),Hf(e.V,e.g,"readystatechange",e.gb),t=e.H?Ll(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),eh(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function xh(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function _h(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Ih(e,n))==kh){4==t&&(e.o=4,nh(14),i=!1),Yf(e.j,e.m,null,"[Incomplete Response]");break}if(r==gh){e.o=4,nh(15),Yf(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Yf(e.j,e.m,r,null),Ah(e,r)}xh(e)&&r!=kh&&r!=gh&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,nh(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),$d(t),t.L=!0,nh(11))):(Yf(e.j,e.m,n,"[Invalid Chunked Response]"),Nh(e),Ch(e))}function Ih(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?kh:(n=Number(t.substring(n,r)),isNaN(n)?gh:(r+=1)+n>t.length?kh:(t=t.substr(r,n),e.C=r+n,t))}function Sh(e){e.Y=Date.now()+e.P,Eh(e,e.P)}function Eh(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=ih(gl(e.eb,e),t)}function Th(e){e.B&&(ll.clearTimeout(e.B),e.B=null)}function Ch(e){0==e.l.G||e.I||Zd(e.l,e)}function Nh(e){Th(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Vf(e.W),Wf(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Ah(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||ld(n.i,e)))if(n.I=e.N,!e.J&&ld(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Jd(n),Bd(n)}Yd(n),nh(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=ih(gl(n.ab,n),6e3));if(1>=cd(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else tp(n,11)}else if((e.J||n.g==e)&&Jd(n),!Tl(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var u=a[4];null!=u&&(n.za=u,n.h.info("SVER="+n.za));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(Al(l,"spdy")||Al(l,"quic")||Al(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(fd(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,zh(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=rp(r,r.H?r.la:null,r.W),d.J){hd(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(Th(p),Sh(p)),r.g=d}else Qd(r);0<n.l.length&&Gd(n)}else"stop"!=a[0]&&"close"!=a[0]||tp(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?tp(n,7):Vd(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}eh(4)}catch(a){}}function Rh(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(hl(e)||"string"===typeof e)Il(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(hl(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(hl(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function Dh(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Dh)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Ph(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];Oh(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)Oh(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function Oh(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(ol=vh.prototype).setTimeout=function(e){this.P=e},ol.gb=function(e){e=e.target;var t=this.L;t&&3==Ld(e)?t.l():this.Ia(e)},ol.Ia=function(e){try{if(e==this.g)e:{var t=Ld(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||ql||this.g&&(this.h.h||this.g.ga()||Md(this.g)))){this.I||4!=t||7==n||eh(8==n||0>=r?3:2),Th(this);var i=this.g.ba();this.N=i;t:if(xh(this)){var a=Md(this.g);e="";var o=a.length,u=4==Ld(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Nh(this),Ch(this);var s="";break t}this.h.i=new ll.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:u&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Tl(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,nh(12),Nh(this),Ch(this);break e}Yf(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ah(this,i)}this.U?(_h(this,t,s),ql&&this.i&&3==t&&(Hf(this.V,this.W,"tick",this.fb),this.W.start())):(Yf(this.j,this.m,s,null),Ah(this,s)),4==t&&Nh(this),this.i&&!this.I&&(4==t?Zd(this.l,this):(this.i=!1,Sh(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,nh(12)):(this.o=0,nh(13)),Nh(this),Ch(this)}}}catch(t){}},ol.fb=function(){if(this.g){var e=Ld(this.g),t=this.g.ga();this.C<t.length&&(Th(this),_h(this,e,t),this.i&&4!=e&&Sh(this))}},ol.cancel=function(){this.I=!0,Nh(this)},ol.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(eh(3),nh(17)),Nh(this),this.o=2,Ch(this)):Eh(this,this.Y-e)},(ol=Dh.prototype).R=function(){Ph(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},ol.T=function(){return Ph(this),this.g.concat()},ol.get=function(e,t){return Oh(this.h,e)?this.h[e]:t},ol.set=function(e,t){Oh(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},ol.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var Lh=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Mh(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Mh){this.g=void 0!==t?t:e.g,Uh(this,e.j),this.s=e.s,jh(this,e.i),Vh(this,e.m),this.l=e.l,t=e.h;var n=new Jh;n.i=t.i,t.g&&(n.g=new Dh(t.g),n.h=t.h),Bh(this,n),this.o=e.o}else e&&(n=String(e).match(Lh))?(this.g=!!t,Uh(this,n[1]||"",!0),this.s=Gh(n[2]||""),jh(this,n[3]||"",!0),Vh(this,n[4]),this.l=Gh(n[5]||"",!0),Bh(this,n[6]||"",!0),this.o=Gh(n[7]||"")):(this.g=!!t,this.h=new Jh(null,this.g))}function Fh(e){return new Mh(e)}function Uh(e,t,n){e.j=n?Gh(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function jh(e,t,n){e.i=n?Gh(t,!0):t}function Vh(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Bh(e,t,n){t instanceof Jh?(e.h=t,function(e,t){t&&!e.j&&(Zh(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(ed(this,t),nd(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=Kh(t,$h)),e.h=new Jh(t,e.g))}function zh(e,t,n){e.h.set(t,n)}function qh(e){return zh(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Gh(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Kh(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Hh),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Hh(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Mh.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Kh(t,Wh,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Kh(t,Wh,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Kh(n,"/"==n.charAt(0)?Yh:Qh,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Kh(n,Xh)),e.join("")};var Wh=/[#\/\?@]/g,Qh=/[#\?:]/g,Yh=/[#\?]/g,$h=/[#\?@]/g,Xh=/#/g;function Jh(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Zh(e){e.g||(e.g=new Dh,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function ed(e,t){Zh(e),t=rd(e,t),Oh(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,Oh((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&Ph(e)))}function td(e,t){return Zh(e),t=rd(e,t),Oh(e.g.h,t)}function nd(e,t,n){ed(e,t),0<n.length&&(e.i=null,e.g.set(rd(e,t),El(n)),e.h+=n.length)}function rd(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(ol=Jh.prototype).add=function(e,t){Zh(this),this.i=null,e=rd(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},ol.forEach=function(e,t){Zh(this),this.g.forEach((function(n,r){Il(n,(function(n){e.call(t,n,r,this)}),this)}),this)},ol.T=function(){Zh(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},ol.R=function(e){Zh(this);var t=[];if("string"===typeof e)td(this,e)&&(t=Sl(t,this.g.get(rd(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=Sl(t,e[n])}return t},ol.set=function(e,t){return Zh(this),this.i=null,td(this,e=rd(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},ol.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},ol.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var id=Ne((function e(t,n){Te(this,e),this.h=t,this.g=n}));function ad(e){this.l=e||ud,ll.PerformanceNavigationTiming?e=0<(e=ll.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(ll.g&&ll.g.Ea&&ll.g.Ea()&&ll.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var od,ud=10;function sd(e){return!!e.h||!!e.g&&e.g.size>=e.j}function cd(e){return e.h?1:e.g?e.g.size:0}function ld(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function fd(e,t){e.g?e.g.add(t):e.h=t}function hd(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function dd(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=Ae(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return El(e.i)}function pd(){}function vd(){this.g=new pd}function md(e,t,n){var r=n||"";try{Rh(e,(function(e,n){var i=e;dl(e)&&(i=Cf(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function yd(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function gd(e){this.l=e.$b||null,this.j=e.ib||!1}function kd(e,t){Sf.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=bd,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ad.prototype.cancel=function(){if(this.i=dd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=Ae(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},pd.prototype.stringify=function(e){return ll.JSON.stringify(e,void 0)},pd.prototype.parse=function(e){return ll.JSON.parse(e,void 0)},bl(gd,uh),gd.prototype.g=function(){return new kd(this.l,this.j)},gd.prototype.i=(od={},function(){return od}),bl(kd,Sf);var bd=0;function wd(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function xd(e){e.readyState=4,e.l=null,e.j=null,e.A=null,_d(e)}function _d(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(ol=kd.prototype).open=function(e,t){if(this.readyState!=bd)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,_d(this)},ol.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||ll).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},ol.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,xd(this)),this.readyState=bd},ol.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,_d(this)),this.g&&(this.readyState=3,_d(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof ll.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;wd(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},ol.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?xd(this):_d(this),3==this.readyState&&wd(this)}},ol.Ua=function(e){this.g&&(this.response=this.responseText=e,xd(this))},ol.Ta=function(e){this.g&&(this.response=e,xd(this))},ol.ha=function(){this.g&&xd(this)},ol.setRequestHeader=function(e,t){this.v.append(e,t)},ol.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},ol.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(kd.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Id=ll.JSON.parse;function Sd(e){Sf.call(this),this.headers=new Dh,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Ed,this.K=this.L=!1}bl(Sd,Sf);var Ed="",Td=/^https?$/i,Cd=["POST","PUT"];function Nd(e){return"content-type"==e.toLowerCase()}function Ad(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Rd(e),Pd(e)}function Rd(e){e.D||(e.D=!0,Ef(e,"complete"),Ef(e,"error"))}function Dd(e){if(e.h&&"undefined"!=typeof cl&&(!e.C[1]||4!=Ld(e)||2!=e.ba()))if(e.v&&4==Ld(e))Bf(e.Fa,0,e);else if(Ef(e,"readystatechange"),4==Ld(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(Lh)[1]||null;if(!a&&ll.self&&ll.self.location){var o=ll.self.location.protocol;a=o.substr(0,o.length-1)}i=!Td.test(a?a.toLowerCase():"")}t=i}if(t)Ef(e,"complete"),Ef(e,"success");else{e.m=6;try{var u=2<Ld(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.ba()+"]",Rd(e)}}finally{Pd(e)}}}function Pd(e,t){if(e.g){Od(e);var n=e.g,r=e.C[0]?fl:null;e.g=null,e.C=null,t||Ef(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Od(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(ll.clearTimeout(e.A),e.A=null)}function Ld(e){return e.g?e.g.readyState:0}function Md(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Ed:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Fd(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return Ol(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):zh(e,t,n))}function Ud(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function jd(e){this.za=0,this.l=[],this.h=new Qf,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Ud("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Ud("baseRetryDelayMs",5e3,e),this.$a=Ud("retryDelaySeedMs",1e4,e),this.Ya=Ud("forwardChannelMaxRetries",2,e),this.ra=Ud("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new ad(e&&e.concurrentRequestLimit),this.Ca=new vd,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function Vd(e){if(zd(e),3==e.G){var t=e.V++,n=Fh(e.F);zh(n,"SID",e.J),zh(n,"RID",t),zh(n,"TYPE","terminate"),Hd(e,n),(t=new vh(e,e.h,t,void 0)).K=2,t.v=qh(Fh(n)),n=!1,ll.navigator&&ll.navigator.sendBeacon&&(n=ll.navigator.sendBeacon(t.v.toString(),"")),!n&&ll.Image&&((new Image).src=t.v,n=!0),n||(t.g=ip(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Sh(t)}np(e)}function Bd(e){e.g&&($d(e),e.g.cancel(),e.g=null)}function zd(e){Bd(e),e.u&&(ll.clearTimeout(e.u),e.u=null),Jd(e),e.i.cancel(),e.m&&("number"===typeof e.m&&ll.clearTimeout(e.m),e.m=null)}function qd(e,t){e.l.push(new id(e.Za++,t)),3==e.G&&Gd(e)}function Gd(e){sd(e.i)||e.m||(e.m=!0,Lf(e.Ha,e),e.C=0)}function Kd(e,t){var n;n=t?t.m:e.V++;var r=Fh(e.F);zh(r,"SID",e.J),zh(r,"RID",n),zh(r,"AID",e.U),Hd(e,r),e.o&&e.s&&Fd(r,e.o,e.s),n=new vh(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Wd(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),fd(e.i,n),bh(n,r,t)}function Hd(e,t){e.j&&Rh({},(function(e,n){zh(t,n,e)}))}function Wd(e,t,n){n=Math.min(e.l.length,n);var r=e.j?gl(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{md(l,o,"req"+c+"_")}catch(Dp){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function Qd(e){e.g||e.u||(e.Y=1,Lf(e.Ga,e),e.A=0)}function Yd(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=ih(gl(e.Ga,e),ep(e,e.A)),e.A++,!0)}function $d(e){null!=e.B&&(ll.clearTimeout(e.B),e.B=null)}function Xd(e){e.g=new vh(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Fh(e.oa);zh(t,"RID","rpc"),zh(t,"SID",e.J),zh(t,"CI",e.N?"0":"1"),zh(t,"AID",e.U),Hd(e,t),zh(t,"TYPE","xmlhttp"),e.o&&e.s&&Fd(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=qh(Fh(t)),n.s=null,n.U=!0,wh(n,e)}function Jd(e){null!=e.v&&(ll.clearTimeout(e.v),e.v=null)}function Zd(e,t){var n=null;if(e.g==t){Jd(e),$d(e),e.g=null;var r=2}else{if(!ld(e.i,t))return;n=t.D,hd(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Ef(r=Jf(),new rh(r,n,t,i)),Gd(e)}else Qd(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(cd(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=ih(gl(e.Ha,e,t),ep(e,e.C)),e.C++,!0))}(e,t)||2==r&&Yd(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:tp(e,5);break;case 4:tp(e,10);break;case 3:tp(e,6);break;default:tp(e,2)}}function ep(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function tp(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=gl(e.jb,e);n||(n=new Mh("//www.google.com/images/cleardot.gif"),ll.location&&"http"==ll.location.protocol||Uh(n,"https"),qh(n)),function(e,t){var n=new Qf;if(ll.Image){var r=new Image;r.onload=kl(yd,n,r,"TestLoadImage: loaded",!0,t),r.onerror=kl(yd,n,r,"TestLoadImage: error",!1,t),r.onabort=kl(yd,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=kl(yd,n,r,"TestLoadImage: timeout",!1,t),ll.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else nh(2);e.G=0,e.j&&e.j.va(t),np(e),zd(e)}function np(e){e.G=0,e.I=-1,e.j&&(0==dd(e.i).length&&0==e.l.length||(e.i.i.length=0,El(e.l),e.l.length=0),e.j.ua())}function rp(e,t,n){var r=function(e){return e instanceof Mh?Fh(e):new Mh(e,void 0)}(n);if(""!=r.i)t&&jh(r,t+"."+r.i),Vh(r,r.m);else{var i=ll.location;r=function(e,t,n,r){var i=new Mh(null,void 0);return e&&Uh(i,e),t&&jh(i,t),n&&Vh(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&Ol(e.aa,(function(e,t){zh(r,t,e)})),t=e.D,n=e.sa,t&&n&&zh(r,t,n),zh(r,"VER",e.ma),Hd(e,r),r}function ip(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new Sd(new gd({ib:!0})):new Sd(e.qa)).L=e.H,t}function ap(){}function op(){if(Bl&&!(10<=Number(ef)))throw Error("Environmental error: no available transport.")}function up(e,t){Sf.call(this),this.g=new jd(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!Tl(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Tl(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new lp(this)}function sp(e){hh.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function cp(){dh.call(this),this.status=1}function lp(e){this.g=e}(ol=Sd.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():lh.g(),this.C=this.u?sh(this.u):sh(lh),this.g.onreadystatechange=gl(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void Ad(this,a)}e=n||"";var i=new Dh(this.headers);r&&Rh(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=Nd,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=ll.FormData&&e instanceof ll.FormData,!(0<=_l(Cd,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Od(this),0<this.B&&((this.K=function(e){return Bl&&Jl()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=gl(this.pa,this)):this.A=Bf(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){Ad(this,a)}},ol.pa=function(){"undefined"!=typeof cl&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ef(this,"timeout"),this.abort(8))},ol.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Ef(this,"complete"),Ef(this,"abort"),Pd(this))},ol.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Pd(this,!0)),Sd.Z.M.call(this)},ol.Fa=function(){this.s||(this.F||this.v||this.l?Dd(this):this.cb())},ol.cb=function(){Dd(this)},ol.ba=function(){try{return 2<Ld(this)?this.g.status:-1}catch(od){return-1}},ol.ga=function(){try{return this.g?this.g.responseText:""}catch(od){return""}},ol.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Id(t)}},ol.Da=function(){return this.m},ol.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(ol=jd.prototype).ma=8,ol.G=1,ol.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},ol.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new vh(this,this.h,e,void 0),n=this.s;if(this.P&&(n?Fl(n=Ll(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Wd(this,t,r),zh(i=Fh(this.F),"RID",e),zh(i,"CVER",22),this.D&&zh(i,"X-HTTP-Session-Id",this.D),Hd(this,i),this.o&&n&&Fd(i,this.o,n),fd(this.i,t),this.Ra&&zh(i,"TYPE","init"),this.ja?(zh(i,"$req",r),zh(i,"SID","null"),t.$=!0,bh(t,i,null)):bh(t,i,r),this.G=2}}else 3==this.G&&(e?Kd(this,e):0==this.l.length||sd(this.i)||Kd(this))},ol.Ga=function(){if(this.u=null,Xd(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=ih(gl(this.bb,this),e)}},ol.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,nh(10),Bd(this),Xd(this))},ol.ab=function(){null!=this.v&&(this.v=null,Bd(this),Yd(this),nh(19))},ol.jb=function(e){e?(this.h.info("Successfully pinged google.com"),nh(2)):(this.h.info("Failed to ping google.com"),nh(1))},(ol=ap.prototype).xa=function(){},ol.wa=function(){},ol.va=function(){},ol.ua=function(){},ol.Oa=function(){},op.prototype.g=function(e,t){return new up(e,t)},bl(up,Sf),up.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Lf(gl(e.hb,e,t))),nh(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=rp(e,null,e.W),Gd(e)},up.prototype.close=function(){Vd(this.g)},up.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,qd(this.g,t)}else this.v?((t={}).__data__=Cf(e),qd(this.g,t)):qd(this.g,e)},up.prototype.M=function(){this.g.j=null,delete this.j,Vd(this.g),delete this.g,up.Z.M.call(this)},bl(sp,hh),bl(cp,dh),bl(lp,ap),lp.prototype.xa=function(){Ef(this.g,"a")},lp.prototype.wa=function(e){Ef(this.g,new sp(e))},lp.prototype.va=function(e){Ef(this.g,new cp(e))},lp.prototype.ua=function(){Ef(this.g,"b")},op.prototype.createWebChannel=op.prototype.g,up.prototype.send=up.prototype.u,up.prototype.open=up.prototype.m,up.prototype.close=up.prototype.close,ah.NO_ERROR=0,ah.TIMEOUT=8,ah.HTTP_ERROR=6,oh.COMPLETE="complete",ch.EventType=fh,fh.OPEN="a",fh.CLOSE="b",fh.ERROR="c",fh.MESSAGE="d",Sf.prototype.listen=Sf.prototype.N,Sd.prototype.listenOnce=Sd.prototype.O,Sd.prototype.getLastError=Sd.prototype.La,Sd.prototype.getLastErrorCode=Sd.prototype.Da,Sd.prototype.getStatus=Sd.prototype.ba,Sd.prototype.getResponseJson=Sd.prototype.Qa,Sd.prototype.getResponseText=Sd.prototype.ga,Sd.prototype.send=Sd.prototype.ea;var fp=sl.createWebChannelTransport=function(){return new op},hp=sl.getStatEventTarget=function(){return Jf()},dp=sl.ErrorCode=ah,pp=sl.EventType=oh,vp=sl.Event=$f,mp=sl.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},yp=sl.FetchXmlHttpFactory=gd,gp=sl.WebChannel=ch,kp=sl.XhrIo=Sd,bp="@firebase/firestore",wp=function(){function e(t){Te(this,e),this.uid=t}return Ne(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();wp.UNAUTHENTICATED=new wp(null),wp.GOOGLE_CREDENTIALS=new wp("google-credentials-uid"),wp.FIRST_PARTY=new wp("first-party-uid"),wp.MOCK_USER=new wp("mock-user");var xp="9.9.4",_p=new Rt("@firebase/firestore");function Ip(){return _p.logLevel}function Sp(e){if(_p.logLevel<=It.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Cp);_p.debug.apply(_p,["Firestore (".concat(xp,"): ").concat(e)].concat(yt(i)))}}function Ep(e){if(_p.logLevel<=It.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Cp);_p.error.apply(_p,["Firestore (".concat(xp,"): ").concat(e)].concat(yt(i)))}}function Tp(e){if(_p.logLevel<=It.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Cp);_p.warn.apply(_p,["Firestore (".concat(xp,"): ").concat(e)].concat(yt(i)))}}function Cp(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Np(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(xp,") INTERNAL ASSERTION FAILED: ")+e;throw Ep(t),new Error(t)}function Ap(e,t){e||Np()}function Rp(e,t){return e}var Dp={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Pp=function(e){Pe(n,e);var t=Ue(n);function n(e,r){var i;return Te(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return Ne(n)}(tt),Op=Ne((function e(){var t=this;Te(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Lp=Ne((function e(t,n){Te(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Mp=function(){function e(){Te(this,e)}return Ne(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(wp.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Fp=function(){function e(t){Te(this,e),this.token=t,this.changeListener=null}return Ne(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Up=function(){function e(t){Te(this,e),this.t=t,this.currentUser=wp.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return Ne(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Op;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Op,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(kt(vt().mark((function e(){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){Sp("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(Sp("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Op)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Sp("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Ap("string"==typeof n.accessToken),new Lp(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Ap(null===e||"string"==typeof e),new wp(e)}}]),e}(),jp=function(){function e(t,n,r,i){Te(this,e),this.h=t,this.l=n,this.m=r,this.g=i,this.type="FirstParty",this.user=wp.FIRST_PARTY,this.p=new Map}return Ne(e,[{key:"I",value:function(){return this.g?this.g():(Ap(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}},{key:"headers",get:function(){this.p.set("X-Goog-AuthUser",this.l);var e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}]),e}(),Vp=function(){function e(t,n,r,i){Te(this,e),this.h=t,this.l=n,this.m=r,this.g=i}return Ne(e,[{key:"getToken",value:function(){return Promise.resolve(new jp(this.h,this.l,this.m,this.g))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(wp.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Bp=Ne((function e(t){Te(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),zp=function(){function e(t){Te(this,e),this.T=t,this.forceRefresh=!1,this.appCheck=null,this.A=null}return Ne(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&Sp("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.A;return n.A=e.token,Sp("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){Sp("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.T.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.T.getImmediate({optional:!0});e?i(e):Sp("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Ap("string"==typeof t.token),e.A=t.token,new Bp(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function qp(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var Gp=function(){function e(){Te(this,e)}return Ne(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=qp(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Kp(e,t){return e<t?-1:e>t?1:0}function Hp(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Wp(e){return e+"\0"}var Qp=function(){function e(t,n){if(Te(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Pp(Dp.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Pp(Dp.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Pp(Dp.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Pp(Dp.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return Ne(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Kp(this.nanoseconds,e.nanoseconds):Kp(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Yp=function(){function e(t){Te(this,e),this.timestamp=t}return Ne(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Qp(0,0))}},{key:"max",value:function(){return new e(new Qp(253402300799,999999999))}}]),e}(),$p=function(){function e(t,n,r){Te(this,e),void 0===n?n=0:n>t.length&&Np(),void 0===r?r=t.length-n:r>t.length-n&&Np(),this.segments=t,this.offset=n,this.len=r}return Ne(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Xp=function(e){Pe(n,e);var t=Ue(n);function n(){return Te(this,n),t.apply(this,arguments)}return Ne(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new Pp(Dp.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,yt(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}($p),Jp=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Zp=function(e){Pe(n,e);var t=Ue(n);function n(){return Te(this,n),t.apply(this,arguments)}return Ne(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Jp.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Pp(Dp.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new Pp(Dp.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new Pp(Dp.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new Pp(Dp.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}($p),ev=function(){function e(t){Te(this,e),this.path=t}return Ne(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Xp.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Xp.fromString(t))}},{key:"fromName",value:function(t){return new e(Xp.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Xp.emptyPath())}},{key:"comparator",value:function(e,t){return Xp.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Xp(t.slice()))}}]),e}(),tv=Ne((function e(t,n,r,i){Te(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function nv(e){return e.fields.find((function(e){return 2===e.kind}))}function rv(e){return e.fields.filter((function(e){return 2!==e.kind}))}tv.UNKNOWN_ID=-1;var iv=Ne((function e(t,n){Te(this,e),this.fieldPath=t,this.kind=n}));var av=function(){function e(t,n){Te(this,e),this.sequenceNumber=t,this.offset=n}return Ne(e,null,[{key:"empty",value:function(){return new e(0,sv.min())}}]),e}();function ov(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Yp.fromTimestamp(1e9===r?new Qp(n+1,0):new Qp(n,r));return new sv(i,ev.empty(),t)}function uv(e){return new sv(e.readTime,e.key,-1)}var sv=function(){function e(t,n,r){Te(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return Ne(e,null,[{key:"min",value:function(){return new e(Yp.min(),ev.empty(),-1)}},{key:"max",value:function(){return new e(Yp.max(),ev.empty(),-1)}}]),e}();function cv(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=ev.comparator(e.documentKey,t.documentKey))?n:Kp(e.largestBatchId,t.largestBatchId)}var lv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",fv=function(){function e(){Te(this,e),this.onCommittedListeners=[]}return Ne(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function hv(e){return dv.apply(this,arguments)}function dv(){return dv=kt(vt().mark((function e(t){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Dp.FAILED_PRECONDITION&&t.message===lv){e.next=2;break}throw t;case 2:Sp("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),dv.apply(this,arguments)}var pv=function(){function e(t){var n=this;Te(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return Ne(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Np(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=Ae(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(u){var s=u;n(t[s]).next((function(t){a[s]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u(s)}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),vv=function(){function e(t,n){var r=this;Te(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.P=new Op,this.transaction.oncomplete=function(){r.P.resolve()},this.transaction.onabort=function(){n.error?r.P.reject(new gv(t,n.error)):r.P.resolve()},this.transaction.onerror=function(e){var n=_v(e.target.error);r.P.reject(new gv(t,n))}}return Ne(e,[{key:"v",get:function(){return this.P.promise}},{key:"abort",value:function(e){e&&this.P.reject(e),this.aborted||(Sp("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"V",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new bv(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new gv(n,t)}}}]),e}(),mv=function(){function e(t,n,r){Te(this,e),this.name=t,this.version=n,this.S=r,12.2===e.D(Qe())&&Ep("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return Ne(e,[{key:"F",value:function(){var e=kt(vt().mark((function e(t){var n=this;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return Sp("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new gv(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Pp(Dp.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new Pp(Dp.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new gv(t,n))},i.onupgradeneeded=function(e){Sp("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.S.$(t,i.transaction,e.oldVersion,n.version).next((function(){Sp("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.B&&(this.db.onversionchange=function(e){return n.B(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"L",value:function(e){this.B=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=kt(vt().mark((function e(t,n,r,i){var a,o,u,s,c,l=this;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(vt().mark((function e(){var n,o;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.F(t);case 2:return l.db=e.sent,n=vv.open(l.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.V(),e})).catch((function(e){return n.abort(e),pv.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.v;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s=e.t1,c="FirebaseError"!==s.name&&o<3,Sp("SimpleDb","Transaction failed with error:",s.message,"Retrying:",c),this.close(),c){e.next=15;break}return e.abrupt("return",Promise.reject(s));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return Sp("SimpleDb","Removing database:",e),wv(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"C",value:function(){if(!et())return!1;if(e.N())return!0;var t=Qe(),n=e.D(t),r=0<n&&n<10,i=e.k(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"N",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/react-olx-project-.",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.M)}},{key:"O",value:function(e,t){return e.store(t)}},{key:"D",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"k",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),yv=function(){function e(t){Te(this,e),this.U=t,this.q=!1,this.K=null}return Ne(e,[{key:"isDone",get:function(){return this.q}},{key:"G",get:function(){return this.K}},{key:"cursor",set:function(e){this.U=e}},{key:"done",value:function(){this.q=!0}},{key:"j",value:function(e){this.K=e}},{key:"delete",value:function(){return wv(this.U.delete())}}]),e}(),gv=function(e){Pe(n,e);var t=Ue(n);function n(e,r){var i;return Te(this,n),(i=t.call(this,Dp.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return Ne(n)}(Pp);function kv(e){return"IndexedDbTransactionError"===e.name}var bv=function(){function e(t){Te(this,e),this.store=t}return Ne(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(Sp("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Sp("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),wv(n)}},{key:"add",value:function(e){return Sp("SimpleDb","ADD",this.store.name,e,e),wv(this.store.add(e))}},{key:"get",value:function(e){var t=this;return wv(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Sp("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return Sp("SimpleDb","DELETE",this.store.name,e),wv(this.store.delete(e))}},{key:"count",value:function(){return Sp("SimpleDb","COUNT",this.store.name),wv(this.store.count())}},{key:"W",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.H(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new pv((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new pv((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Y",value:function(e,t){Sp("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.X=!1;var r=this.cursor(n);return this.H(r,(function(e,t,n){return n.delete()}))}},{key:"Z",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.H(r,t)}},{key:"tt",value:function(e){var t=this.cursor({});return new pv((function(n,r){t.onerror=function(e){var t=_v(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"H",value:function(e,t){var n=[];return new pv((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new yv(i),o=t(i.primaryKey,i.value,a);if(o instanceof pv){var u=o.catch((function(e){return a.done(),pv.reject(e)}));n.push(u)}a.isDone?r():null===a.G?i.continue():i.continue(a.G)}else r()}})).next((function(){return pv.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.X?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function wv(e){return new pv((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=_v(e.target.error);n(t)}}))}var xv=!1;function _v(e){var t=mv.D(Qe());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Pp("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return xv||(xv=!0,setTimeout((function(){throw r}),0)),r}}return e}var Iv=function(){function e(t,n){Te(this,e),this.asyncQueue=t,this.et=n,this.task=null}return Ne(e,[{key:"start",value:function(){this.nt(15)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"nt",value:function(e){var t=this;Sp("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,kt(vt().mark((function e(){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=Sp,e.t1="Documents written: ",e.next=6,t.et.st();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!kv(e.t4)){e.next=17;break}Sp("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,hv(e.t4);case 19:return e.next=21,t.nt(1);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),Sv=function(){function e(t,n){Te(this,e),this.localStore=t,this.persistence=n}return Ne(e,[{key:"st",value:function(){var e=kt(vt().mark((function e(){var t,n=this,r=arguments;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.it(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"it",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return pv.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return Sp("IndexBackiller","Processing collection: ".concat(t)),n.rt(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"rt",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.ot(i,n)})).next((function(n){return Sp("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"ot",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=uv(t);cv(r,n)>0&&(n=r)})),new sv(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),Ev=function(){function e(t,n){var r=this;Te(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ut(e)},this.ct=function(e){return n.writeSequenceNumber(e)})}return Ne(e,[{key:"ut",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ct&&this.ct(e),e}}]),e}();function Tv(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Cv(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Nv(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}Ev.at=-1;var Av=function(){function e(t,n){Te(this,e),this.comparator=t,this.root=n||Dv.EMPTY}return Ne(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Dv.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Dv.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Rv(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Rv(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Rv(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Rv(this.root,e,this.comparator,!0)}}]),e}(),Rv=function(){function e(t,n,r,i){Te(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return Ne(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Dv=function(){function e(t,n,r,i,a){Te(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return Ne(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Np();if(this.right.isRed())throw Np();var e=this.left.check();if(e!==this.right.check())throw Np();return e+(this.isRed()?0:1)}}]),e}();Dv.EMPTY=null,Dv.RED=!0,Dv.BLACK=!1,Dv.EMPTY=new(function(){function e(){Te(this,e),this.size=0}return Ne(e,[{key:"key",get:function(){throw Np()}},{key:"value",get:function(){throw Np()}},{key:"color",get:function(){throw Np()}},{key:"left",get:function(){throw Np()}},{key:"right",get:function(){throw Np()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Dv(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Pv=function(){function e(t){Te(this,e),this.comparator=t,this.data=new Av(this.comparator)}return Ne(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Ov(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Ov(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Ov=function(){function e(t){Te(this,e),this.iter=t}return Ne(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Lv(e){return e.hasNext()?e.getNext():void 0}var Mv=function(){function e(t){Te(this,e),this.fields=t,t.sort(Zp.comparator)}return Ne(e,[{key:"unionWith",value:function(t){var n,r=new Pv(Zp.comparator),i=Ae(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=Ae(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=Ae(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Hp(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}();var Fv=function(e){function t(e){Te(this,t),this.binaryString=e}return Ne(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Kp(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Fv.EMPTY_BYTE_STRING=new Fv("");var Uv=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function jv(e){if(Ap(!!e),"string"==typeof e){var t=0,n=Uv.exec(e);if(Ap(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Vv(e.seconds),nanos:Vv(e.nanos)}}function Vv(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Bv(e){return"string"==typeof e?Fv.fromBase64String(e):Fv.fromUint8Array(e)}function zv(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function qv(e){var t=e.mapValue.fields.__previous_value__;return zv(t)?qv(t):t}function Gv(e){var t=jv(e.mapValue.fields.__local_write_time__.timestampValue);return new Qp(t.seconds,t.nanos)}var Kv=Ne((function e(t,n,r,i,a,o,u,s){Te(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),Hv=function(){function e(t,n){Te(this,e),this.projectId=t,this.database=n||"(default)"}return Ne(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function Wv(e){return null==e}function Qv(e){return 0===e&&1/e==-1/0}function Yv(e){return"number"==typeof e&&Number.isInteger(e)&&!Qv(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var $v={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Xv={nullValue:"NULL_VALUE"};function Jv(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?zv(e)?4:hm(e)?9007199254740991:10:Np()}function Zv(e,t){if(e===t)return!0;var n=Jv(e);if(n!==Jv(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Gv(e).isEqual(Gv(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=jv(e.timestampValue),r=jv(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Bv(e.bytesValue).isEqual(Bv(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Vv(e.geoPointValue.latitude)===Vv(t.geoPointValue.latitude)&&Vv(e.geoPointValue.longitude)===Vv(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Vv(e.integerValue)===Vv(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Vv(e.doubleValue),r=Vv(t.doubleValue);return n===r?Qv(n)===Qv(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Hp(e.arrayValue.values||[],t.arrayValue.values||[],Zv);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Tv(n)!==Tv(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Zv(n[i],r[i])))return!1;return!0}(e,t);default:return Np()}}function em(e,t){return void 0!==(e.values||[]).find((function(e){return Zv(e,t)}))}function tm(e,t){if(e===t)return 0;var n=Jv(e),r=Jv(t);if(n!==r)return Kp(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Kp(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Vv(e.integerValue||e.doubleValue),r=Vv(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return nm(e.timestampValue,t.timestampValue);case 4:return nm(Gv(e),Gv(t));case 5:return Kp(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Bv(e),r=Bv(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Kp(n[i],r[i]);if(0!==a)return a}return Kp(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Kp(Vv(e.latitude),Vv(t.latitude));return 0!==n?n:Kp(Vv(e.longitude),Vv(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=tm(n[i],r[i]);if(a)return a}return Kp(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===$v.mapValue&&t===$v.mapValue)return 0;if(e===$v.mapValue)return 1;if(t===$v.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=Kp(r[o],a[o]);if(0!==u)return u;var s=tm(n[r[o]],i[a[o]]);if(0!==s)return s}return Kp(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Np()}}function nm(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Kp(e,t);var n=jv(e),r=jv(t),i=Kp(n.seconds,r.seconds);return 0!==i?i:Kp(n.nanos,r.nanos)}function rm(e){return im(e)}function im(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=jv(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Bv(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,ev.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=Ae(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=im(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=Ae(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(im(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Np();var t,n}function am(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function om(e){return!!e&&"integerValue"in e}function um(e){return!!e&&"arrayValue"in e}function sm(e){return!!e&&"nullValue"in e}function cm(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function lm(e){return!!e&&"mapValue"in e}function fm(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Cv(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=fm(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=fm(e.arrayValue.values[r]);return n}return Object.assign({},e)}function hm(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function dm(e){return"nullValue"in e?Xv:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?am(Hv.empty(),ev.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Np()}function pm(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?am(Hv.empty(),ev.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?$v:Np()}function vm(e,t){var n=tm(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function mm(e,t){var n=tm(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var ym=function(){function e(t){Te(this,e),this.value=t}return Ne(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!lm(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=fm(t)}},{key:"setAll",value:function(e){var t=this,n=Zp.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=fm(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());lm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Zv(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];lm(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Cv(t,(function(t,n){return e[t]=n}));var r,i=Ae(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(fm(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function gm(e){var t=[];return Cv(e.fields,(function(e,n){var r=new Zp([e]);if(lm(n)){var i=gm(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=Ae(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new Mv(t)}var km=function(){function e(t,n,r,i,a,o){Te(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return Ne(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=ym.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=ym.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=Yp.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Yp.min(),Yp.min(),ym.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,Yp.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Yp.min(),ym.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Yp.min(),ym.empty(),2)}}]),e}(),bm=Ne((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;Te(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.ht=null}));function wm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new bm(e,t,n,r,i,a,o)}function xm(e){var t=Rp(e);if(null===t.ht){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+rm(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Wv(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return rm(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return rm(e)})).join(",")),t.ht=n}return t.ht}function _m(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!jm(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!Zv(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Bm(e.startAt,t.startAt)&&Bm(e.endAt,t.endAt)}function Im(e){return ev.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Sm(e,t){return e.filters.filter((function(e){return e instanceof Cm&&e.field.isEqual(t)}))}function Em(e,t,n){var r,i=Xv,a=!0,o=Ae(Sm(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Xv,c=!0;switch(u.op){case"<":case"<=":s=dm(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=Xv}vm({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];vm({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function Tm(e,t,n){var r,i=$v,a=!0,o=Ae(Sm(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=$v,c=!0;switch(u.op){case">=":case">":s=pm(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=$v}mm({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];mm({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var Cm=function(e){Pe(n,e);var t=Ue(n);function n(e,r,i){var a;return Te(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return Ne(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(tm(t,this.value)):null!==t&&Jv(this.value)===Jv(t)&&this.ft(tm(t,this.value))}},{key:"ft",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Np()}}},{key:"dt",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new Nm(e,t,r):"array-contains"===t?new Pm(e,r):"in"===t?new Om(e,r):"not-in"===t?new Lm(e,r):"array-contains-any"===t?new Mm(e,r):new n(e,t,r)}},{key:"lt",value:function(e,t,n){return"in"===t?new Am(e,n):new Rm(e,n)}}]),n}(function(){return Ne((function e(){Te(this,e)}))}()),Nm=function(e){Pe(n,e);var t=Ue(n);function n(e,r,i){var a;return Te(this,n),(a=t.call(this,e,r,i)).key=ev.fromName(i.referenceValue),a}return Ne(n,[{key:"matches",value:function(e){var t=ev.comparator(e.key,this.key);return this.ft(t)}}]),n}(Cm),Am=function(e){Pe(n,e);var t=Ue(n);function n(e,r){var i;return Te(this,n),(i=t.call(this,e,"in",r)).keys=Dm("in",r),i}return Ne(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Cm),Rm=function(e){Pe(n,e);var t=Ue(n);function n(e,r){var i;return Te(this,n),(i=t.call(this,e,"not-in",r)).keys=Dm("not-in",r),i}return Ne(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Cm);function Dm(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return ev.fromName(e.referenceValue)}))}var Pm=function(e){Pe(n,e);var t=Ue(n);function n(e,r){return Te(this,n),t.call(this,e,"array-contains",r)}return Ne(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return um(t)&&em(t.arrayValue,this.value)}}]),n}(Cm),Om=function(e){Pe(n,e);var t=Ue(n);function n(e,r){return Te(this,n),t.call(this,e,"in",r)}return Ne(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&em(this.value.arrayValue,t)}}]),n}(Cm),Lm=function(e){Pe(n,e);var t=Ue(n);function n(e,r){return Te(this,n),t.call(this,e,"not-in",r)}return Ne(n,[{key:"matches",value:function(e){if(em(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!em(this.value.arrayValue,t)}}]),n}(Cm),Mm=function(e){Pe(n,e);var t=Ue(n);function n(e,r){return Te(this,n),t.call(this,e,"array-contains-any",r)}return Ne(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!um(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return em(t.value.arrayValue,e)}))}}]),n}(Cm),Fm=Ne((function e(t,n){Te(this,e),this.position=t,this.inclusive=n})),Um=Ne((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";Te(this,e),this.field=t,this.dir=n}));function jm(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Vm(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?ev.comparator(ev.fromName(o.referenceValue),n.key):tm(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Bm(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Zv(e.position[n],t.position[n]))return!1;return!0}var zm=Ne((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;Te(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this._t=null,this.wt=null,this.startAt,this.endAt}));function qm(e,t,n,r,i,a,o,u){return new zm(e,t,n,r,i,a,o,u)}function Gm(e){return new zm(e)}function Km(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Hm(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Wm(e){var t,n=Ae(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.dt())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function Qm(e){return null!==e.collectionGroup}function Ym(e){var t=Rp(e);if(null===t._t){t._t=[];var n=Wm(t),r=Hm(t);if(null!==n&&null===r)n.isKeyField()||t._t.push(new Um(n)),t._t.push(new Um(Zp.keyField(),"asc"));else{var i,a=!1,o=Ae(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t._t.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t._t.push(new Um(Zp.keyField(),s))}}}return t._t}function $m(e){var t=Rp(e);if(!t.wt)if("F"===t.limitType)t.wt=wm(t.path,t.collectionGroup,Ym(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=Ae(Ym(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new Um(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new Fm(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Fm(t.startAt.position,t.startAt.inclusive):null;t.wt=wm(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.wt}function Xm(e,t,n){return new zm(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Jm(e,t){return _m($m(e),$m(t))&&e.limitType===t.limitType}function Zm(e){return"".concat(xm($m(e)),"|lt:").concat(e.limitType)}function ey(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(rm(t.value));var t})).join(", "),"]")),Wv(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return rm(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return rm(e)})).join(",")),"Target(".concat(t,")")}($m(e)),"; limitType=").concat(e.limitType,")")}function ty(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ev.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=Ae(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=Ae(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=Vm(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Ym(e),t))&&!(e.endAt&&!function(e,t,n){var r=Vm(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Ym(e),t))}(e,t)}function ny(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function ry(e){return function(t,n){var r,i=!1,a=Ae(Ym(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=iy(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function iy(e,t,n){var r=e.field.isKeyField()?ev.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?tm(r,i):Np()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Np()}}function ay(e,t){if(e.gt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qv(t)?"-0":t}}function oy(e){return{integerValue:""+e}}function uy(e,t){return Yv(t)?oy(t):ay(e,t)}var sy=Ne((function e(){Te(this,e),this._=void 0}));function cy(e,t,n){return e instanceof hy?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof dy?py(e,t):e instanceof vy?my(e,t):function(e,t){var n=fy(e,t),r=gy(n)+gy(e.yt);return om(n)&&om(e.yt)?oy(r):ay(e.It,r)}(e,t)}function ly(e,t,n){return e instanceof dy?py(e,t):e instanceof vy?my(e,t):n}function fy(e,t){return e instanceof yy?om(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var hy=function(e){Pe(n,e);var t=Ue(n);function n(){return Te(this,n),t.apply(this,arguments)}return Ne(n)}(sy),dy=function(e){Pe(n,e);var t=Ue(n);function n(e){var r;return Te(this,n),(r=t.call(this)).elements=e,r}return Ne(n)}(sy);function py(e,t){var n,r=ky(t),i=Ae(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Zv(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var vy=function(e){Pe(n,e);var t=Ue(n);function n(e){var r;return Te(this,n),(r=t.call(this)).elements=e,r}return Ne(n)}(sy);function my(e,t){var n,r=ky(t),i=Ae(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Zv(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var yy=function(e){Pe(n,e);var t=Ue(n);function n(e,r){var i;return Te(this,n),(i=t.call(this)).It=e,i.yt=r,i}return Ne(n)}(sy);function gy(e){return Vv(e.integerValue||e.doubleValue)}function ky(e){return um(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var by=Ne((function e(t,n){Te(this,e),this.field=t,this.transform=n}));var wy=Ne((function e(t,n){Te(this,e),this.version=t,this.transformResults=n})),xy=function(){function e(t,n){Te(this,e),this.updateTime=t,this.exists=n}return Ne(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function _y(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Iy=Ne((function e(){Te(this,e)}));function Sy(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Fy(e.key,xy.none()):new Ay(e.key,e.data,xy.none());var n,r=e.data,i=ym.empty(),a=new Pv(Zp.comparator),o=Ae(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new Ry(e.key,i,new Mv(a.toArray()),xy.none())}function Ey(e,t,n){e instanceof Ay?function(e,t,n){var r=e.value.clone(),i=Py(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Ry?function(e,t,n){if(_y(e.precondition,t)){var r=Py(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Dy(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Ty(e,t,n,r){return e instanceof Ay?function(e,t,n,r){if(!_y(e.precondition,t))return n;var i=e.value.clone(),a=Oy(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Ry?function(e,t,n,r){if(!_y(e.precondition,t))return n;var i=Oy(e.fieldTransforms,r,t),a=t.data;return a.setAll(Dy(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return _y(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Cy(e,t){var n,r=null,i=Ae(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=fy(a.transform,o||null);null!=u&&(null===r&&(r=ym.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function Ny(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Hp(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof dy&&t instanceof dy||e instanceof vy&&t instanceof vy?Hp(e.elements,t.elements,Zv):e instanceof yy&&t instanceof yy?Zv(e.yt,t.yt):e instanceof hy&&t instanceof hy}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var Ay=function(e){Pe(n,e);var t=Ue(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return Te(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return Ne(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Iy),Ry=function(e){Pe(n,e);var t=Ue(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return Te(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return Ne(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(Iy);function Dy(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Py(e,t,n){var r=new Map;Ap(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,ly(o,u,n[i]))}return r}function Oy(e,t,n){var r,i=new Map,a=Ae(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,cy(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Ly,My,Fy=function(e){Pe(n,e);var t=Ue(n);function n(e,r){var i;return Te(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return Ne(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Iy),Uy=function(e){Pe(n,e);var t=Ue(n);function n(e,r){var i;return Te(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return Ne(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Iy),jy=Ne((function e(t){Te(this,e),this.count=t}));function Vy(e){switch(e){default:return Np();case Dp.CANCELLED:case Dp.UNKNOWN:case Dp.DEADLINE_EXCEEDED:case Dp.RESOURCE_EXHAUSTED:case Dp.INTERNAL:case Dp.UNAVAILABLE:case Dp.UNAUTHENTICATED:return!1;case Dp.INVALID_ARGUMENT:case Dp.NOT_FOUND:case Dp.ALREADY_EXISTS:case Dp.PERMISSION_DENIED:case Dp.FAILED_PRECONDITION:case Dp.ABORTED:case Dp.OUT_OF_RANGE:case Dp.UNIMPLEMENTED:case Dp.DATA_LOSS:return!0}}function By(e){if(void 0===e)return Ep("GRPC error has no .code"),Dp.UNKNOWN;switch(e){case Ly.OK:return Dp.OK;case Ly.CANCELLED:return Dp.CANCELLED;case Ly.UNKNOWN:return Dp.UNKNOWN;case Ly.DEADLINE_EXCEEDED:return Dp.DEADLINE_EXCEEDED;case Ly.RESOURCE_EXHAUSTED:return Dp.RESOURCE_EXHAUSTED;case Ly.INTERNAL:return Dp.INTERNAL;case Ly.UNAVAILABLE:return Dp.UNAVAILABLE;case Ly.UNAUTHENTICATED:return Dp.UNAUTHENTICATED;case Ly.INVALID_ARGUMENT:return Dp.INVALID_ARGUMENT;case Ly.NOT_FOUND:return Dp.NOT_FOUND;case Ly.ALREADY_EXISTS:return Dp.ALREADY_EXISTS;case Ly.PERMISSION_DENIED:return Dp.PERMISSION_DENIED;case Ly.FAILED_PRECONDITION:return Dp.FAILED_PRECONDITION;case Ly.ABORTED:return Dp.ABORTED;case Ly.OUT_OF_RANGE:return Dp.OUT_OF_RANGE;case Ly.UNIMPLEMENTED:return Dp.UNIMPLEMENTED;case Ly.DATA_LOSS:return Dp.DATA_LOSS;default:return Np()}}(My=Ly||(Ly={}))[My.OK=0]="OK",My[My.CANCELLED=1]="CANCELLED",My[My.UNKNOWN=2]="UNKNOWN",My[My.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",My[My.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",My[My.NOT_FOUND=5]="NOT_FOUND",My[My.ALREADY_EXISTS=6]="ALREADY_EXISTS",My[My.PERMISSION_DENIED=7]="PERMISSION_DENIED",My[My.UNAUTHENTICATED=16]="UNAUTHENTICATED",My[My.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",My[My.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",My[My.ABORTED=10]="ABORTED",My[My.OUT_OF_RANGE=11]="OUT_OF_RANGE",My[My.UNIMPLEMENTED=12]="UNIMPLEMENTED",My[My.INTERNAL=13]="INTERNAL",My[My.UNAVAILABLE=14]="UNAVAILABLE",My[My.DATA_LOSS=15]="DATA_LOSS";var zy=function(){function e(t,n){Te(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return Ne(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=Ae(n);try{for(i.s();!(r=i.n()).done;){var a=c(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Cv(this.inner,(function(t,n){var r,i=Ae(n);try{for(i.s();!(r=i.n()).done;){var a=c(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Nv(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),qy=new Av(ev.comparator);function Gy(){return qy}var Ky=new Av(ev.comparator);function Hy(){for(var e=Ky,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function Wy(e){var t=Ky;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function Qy(){return $y()}function Yy(){return $y()}function $y(){return new zy((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var Xy=new Av(ev.comparator),Jy=new Pv(ev.comparator);function Zy(){for(var e=Jy,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var eg=new Pv(Kp);function tg(){return eg}var ng=function(){function e(t,n,r,i,a){Te(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return Ne(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,rg.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(Yp.min(),r,tg(),Gy(),Zy())}}]),e}(),rg=function(){function e(t,n,r,i,a){Te(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return Ne(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(Fv.EMPTY_BYTE_STRING,n,Zy(),Zy(),Zy())}}]),e}(),ig=Ne((function e(t,n,r,i){Te(this,e),this.Tt=t,this.removedTargetIds=n,this.key=r,this.Et=i})),ag=Ne((function e(t,n){Te(this,e),this.targetId=t,this.At=n})),og=Ne((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Fv.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Te(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),ug=function(){function e(){Te(this,e),this.Rt=0,this.bt=lg(),this.Pt=Fv.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}return Ne(e,[{key:"current",get:function(){return this.vt}},{key:"resumeToken",get:function(){return this.Pt}},{key:"St",get:function(){return 0!==this.Rt}},{key:"Dt",get:function(){return this.Vt}},{key:"Ct",value:function(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}},{key:"xt",value:function(){var e=Zy(),t=Zy(),n=Zy();return this.bt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Np()}})),new rg(this.Pt,this.vt,e,t,n)}},{key:"Nt",value:function(){this.Vt=!1,this.bt=lg()}},{key:"kt",value:function(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}},{key:"Mt",value:function(e){this.Vt=!0,this.bt=this.bt.remove(e)}},{key:"Ot",value:function(){this.Rt+=1}},{key:"Ft",value:function(){this.Rt-=1}},{key:"$t",value:function(){this.Vt=!0,this.vt=!0}}]),e}(),sg=function(){function e(t){Te(this,e),this.Bt=t,this.Lt=new Map,this.Ut=Gy(),this.qt=cg(),this.Kt=new Pv(Kp)}return Ne(e,[{key:"Gt",value:function(e){var t,n=Ae(e.Tt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.Et&&e.Et.isFoundDocument()?this.Qt(r,e.Et):this.jt(r,e.key,e.Et)}}catch(u){n.e(u)}finally{n.f()}var i,a=Ae(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.jt(o,e.key,e.Et)}}catch(u){a.e(u)}finally{a.f()}}},{key:"Wt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.zt(n);switch(e.state){case 0:t.Ht(n)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||t.removeTarget(n);break;case 3:t.Ht(n)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:t.Ht(n)&&(t.Jt(n),r.Ct(e.resumeToken));break;default:Np()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((function(e,r){n.Ht(r)&&t(r)}))}},{key:"Yt",value:function(e){var t=e.targetId,n=e.At.count,r=this.Xt(t);if(r){var i=r.target;if(Im(i))if(0===n){var a=new ev(i.path);this.jt(t,a,km.newNoDocument(a,Yp.min()))}else Ap(1===n);else this.Zt(t)!==n&&(this.Jt(t),this.Kt=this.Kt.add(t))}}},{key:"te",value:function(e){var t=this,n=new Map;this.Lt.forEach((function(r,i){var a=t.Xt(i);if(a){if(r.current&&Im(a.target)){var o=new ev(a.target.path);null!==t.Ut.get(o)||t.ee(i,o)||t.jt(i,o,km.newNoDocument(o,e))}r.Dt&&(n.set(i,r.xt()),r.Nt())}}));var r=Zy();this.qt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Xt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.Ut.forEach((function(t,n){return n.setReadTime(e)}));var i=new ng(e,n,this.Kt,this.Ut,r);return this.Ut=Gy(),this.qt=cg(),this.Kt=new Pv(Kp),i}},{key:"Qt",value:function(e,t){if(this.Ht(e)){var n=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,n),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}}},{key:"jt",value:function(e,t,n){if(this.Ht(e)){var r=this.zt(e);this.ee(e,t)?r.kt(t,1):r.Mt(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),n&&(this.Ut=this.Ut.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Lt.delete(e)}},{key:"Zt",value:function(e){var t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Ot",value:function(e){this.zt(e).Ot()}},{key:"zt",value:function(e){var t=this.Lt.get(e);return t||(t=new ug,this.Lt.set(e,t)),t}},{key:"ne",value:function(e){var t=this.qt.get(e);return t||(t=new Pv(Kp),this.qt=this.qt.insert(e,t)),t}},{key:"Ht",value:function(e){var t=null!==this.Xt(e);return t||Sp("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Xt",value:function(e){var t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}},{key:"Jt",value:function(e){var t=this;this.Lt.set(e,new ug),this.Bt.getRemoteKeysForTarget(e).forEach((function(n){t.jt(e,n,null)}))}},{key:"ee",value:function(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}]),e}();function cg(){return new Av(ev.comparator)}function lg(){return new Av(ev.comparator)}var fg={asc:"ASCENDING",desc:"DESCENDING"},hg={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dg=Ne((function e(t,n){Te(this,e),this.databaseId=t,this.gt=n}));function pg(e,t){return e.gt?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function vg(e,t){return e.gt?t.toBase64():t.toUint8Array()}function mg(e,t){return pg(e,t.toTimestamp())}function yg(e){return Ap(!!e),Yp.fromTimestamp(function(e){var t=jv(e);return new Qp(t.seconds,t.nanos)}(e))}function gg(e,t){return function(e){return new Xp(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function kg(e){var t=Xp.fromString(e);return Ap(zg(t)),t}function bg(e,t){return gg(e.databaseId,t.path)}function wg(e,t){var n=kg(t);if(n.get(1)!==e.databaseId.projectId)throw new Pp(Dp.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Pp(Dp.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ev(Sg(n))}function xg(e,t){return gg(e.databaseId,t)}function _g(e){var t=kg(e);return 4===t.length?Xp.emptyPath():Sg(t)}function Ig(e){return new Xp(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Sg(e){return Ap(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Eg(e,t,n){return{name:bg(e,t),fields:n.value.mapValue.fields}}function Tg(e,t,n){var r=wg(e,t.name),i=yg(t.updateTime),a=new ym({mapValue:{fields:t.fields}}),o=km.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Cg(e,t){return"found"in t?function(e,t){Ap(!!t.found),t.found.name,t.found.updateTime;var n=wg(e,t.found.name),r=yg(t.found.updateTime),i=new ym({mapValue:{fields:t.found.fields}});return km.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){Ap(!!t.missing),Ap(!!t.readTime);var n=wg(e,t.missing),r=yg(t.readTime);return km.newNoDocument(n,r)}(e,t):Np()}function Ng(e,t){var n;if(t instanceof Ay)n={update:Eg(e,t.key,t.value)};else if(t instanceof Fy)n={delete:bg(e,t.key)};else if(t instanceof Ry)n={update:Eg(e,t.key,t.data),updateMask:Bg(t.fieldMask)};else{if(!(t instanceof Uy))return Np();n={verify:bg(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof hy)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof dy)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof vy)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof yy)return{fieldPath:t.field.canonicalString(),increment:n.yt};throw Np()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:mg(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Np()}(e,t.precondition)),n}function Ag(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?xy.updateTime(yg(e.updateTime)):void 0!==e.exists?xy.exists(e.exists):xy.none()}(t.currentDocument):xy.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Ap("REQUEST_TIME"===t.setToServerValue),n=new hy;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new dy(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new vy(i)}else"increment"in t?n=new yy(e,t.increment):Np();var a=Zp.fromServerFormat(t.fieldPath);return new by(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=wg(e,t.update.name),a=new ym({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Mv(t.map((function(e){return Zp.fromServerFormat(e)})))}(t.updateMask);return new Ry(i,a,o,n,r)}return new Ay(i,a,n,r)}if(t.delete){var u=wg(e,t.delete);return new Fy(u,n)}if(t.verify){var s=wg(e,t.verify);return new Uy(s,n)}return Np()}function Rg(e,t){return{documents:[xg(e,t.path)]}}function Dg(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=xg(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=xg(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(cm(e.value))return{unaryFilter:{field:Fg(e.field),op:"IS_NAN"}};if(sm(e.value))return{unaryFilter:{field:Fg(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(cm(e.value))return{unaryFilter:{field:Fg(e.field),op:"IS_NOT_NAN"}};if(sm(e.value))return{unaryFilter:{field:Fg(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fg(e.field),op:Mg(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Fg(e.field),direction:Lg(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.gt||Wv(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Pg(e){var t=_g(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Ap(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=Og(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new Um(Ug(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return Wv(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Fm(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Fm(n,t)}(n.endAt)),qm(t,i,u,o,s,"F",c,l)}function Og(e){return e?void 0!==e.unaryFilter?[Vg(e)]:void 0!==e.fieldFilter?[jg(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return Og(e)})).reduce((function(e,t){return e.concat(t)})):Np():[]}function Lg(e){return fg[e]}function Mg(e){return hg[e]}function Fg(e){return{fieldPath:e.canonicalString()}}function Ug(e){return Zp.fromServerFormat(e.fieldPath)}function jg(e){return Cm.create(Ug(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Np()}}(e.fieldFilter.op),e.fieldFilter.value)}function Vg(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Ug(e.unaryFilter.field);return Cm.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Ug(e.unaryFilter.field);return Cm.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Ug(e.unaryFilter.field);return Cm.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Ug(e.unaryFilter.field);return Cm.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Np()}}function Bg(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function zg(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function qg(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Kg(t)),t=Gg(e.get(n),t);return Kg(t)}function Gg(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function Kg(e){return e+"\x01\x01"}function Hg(e){var t=e.length;if(Ap(t>=2),2===t)return Ap("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Xp.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&Np(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:Np()}a=o+2}return new Xp(r)}var Wg=["userId","batchId"];function Qg(e,t){return[e,qg(t)]}function Yg(e,t,n){return[e,qg(t),n]}var $g={},Xg=["prefixPath","collectionGroup","readTime","documentId"],Jg=["prefixPath","collectionGroup","documentId"],Zg=["collectionGroup","readTime","prefixPath","documentId"],ek=["canonicalId","targetId"],tk=["targetId","path"],nk=["path","targetId"],rk=["collectionId","parent"],ik=["indexId","uid"],ak=["uid","sequenceNumber"],ok=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],uk=["indexId","uid","orderedDocumentKey"],sk=["userId","collectionPath","documentId"],ck=["userId","collectionPath","largestBatchId"],lk=["userId","collectionGroup","largestBatchId"],fk=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),hk=[].concat(yt(fk),["documentOverlays"]),dk=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],pk=dk,vk=[].concat(pk,["indexConfiguration","indexState","indexEntries"]),mk=function(e){Pe(n,e);var t=Ue(n);function n(e,r){var i;return Te(this,n),(i=t.call(this)).ie=e,i.currentSequenceNumber=r,i}return Ne(n)}(fv);function yk(e,t){var n=Rp(e);return mv.O(n.ie,t)}var gk=function(){function e(t,n,r,i){Te(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return Ne(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Ey(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=Ae(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=Ty(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=Ae(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=Ty(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=Yy();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=Sy(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(Yp.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Zy())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Hp(this.mutations,e.mutations,(function(e,t){return Ny(e,t)}))&&Hp(this.baseMutations,e.baseMutations,(function(e,t){return Ny(e,t)}))}}]),e}(),kk=function(){function e(t,n,r,i){Te(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return Ne(e,null,[{key:"from",value:function(t,n,r){Ap(t.mutations.length===r.length);for(var i=Xy,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),bk=function(){function e(t,n){Te(this,e),this.largestBatchId=t,this.mutation=n}return Ne(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),wk=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Yp.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Yp.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Fv.EMPTY_BYTE_STRING;Te(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return Ne(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),xk=Ne((function e(t){Te(this,e),this.re=t}));function _k(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Ik(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:bg(e,t.key),fields:t.data.value.mapValue.fields,updateTime:pg(e,t.version.toTimestamp())}}(e.re,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Sk(t.version)};else{if(!t.isUnknownDocument())return Np();r.unknownDocument={path:n.path.toArray(),version:Sk(t.version)}}return r}function Ik(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Sk(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Ek(e){var t=new Qp(e.seconds,e.nanoseconds);return Yp.fromTimestamp(t)}function Tk(e,t){for(var n=(t.baseMutations||[]).map((function(t){return Ag(e.re,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return Ag(e.re,t)})),u=Qp.fromMillis(t.localWriteTimeMs);return new gk(t.batchId,u,n,o)}function Ck(e){var t,n,r=Ek(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?Ek(e.lastLimboFreeSnapshotVersion):Yp.min();return void 0!==e.query.documents?(Ap(1===(n=e.query).documents.length),t=$m(Gm(_g(n.documents[0])))):t=function(e){return $m(Pg(e))}(e.query),new wk(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Fv.fromBase64String(e.resumeToken))}function Nk(e,t){var n,r=Sk(t.snapshotVersion),i=Sk(t.lastLimboFreeSnapshotVersion);n=Im(t.target)?Rg(e.re,t.target):Dg(e.re,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:xm(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function Ak(e){var t=Pg({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Xm(t,t.limit,"L"):t}function Rk(e,t){return new bk(t.largestBatchId,Ag(e.re,t.overlayMutation))}function Dk(e,t){var n=t.path.lastSegment();return[e,qg(t.path.popLast()),n]}function Pk(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Sk(r.readTime),documentKey:qg(r.documentKey.path),largestBatchId:r.largestBatchId}}var Ok=function(){function e(){Te(this,e)}return Ne(e,[{key:"getBundleMetadata",value:function(e,t){return Lk(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:Ek(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return Lk(e).put({bundleId:(n=t).id,createTime:Sk(yg(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return Mk(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:Ak(t.bundledQuery),readTime:Ek(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return Mk(e).put(function(e){return{name:e.name,readTime:Sk(yg(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function Lk(e){return yk(e,"bundles")}function Mk(e){return yk(e,"namedQueries")}var Fk=function(){function e(t,n){Te(this,e),this.It=t,this.userId=n}return Ne(e,[{key:"getOverlay",value:function(e,t){var n=this;return Uk(e).get(Dk(this.userId,t)).next((function(e){return e?Rk(n.It,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=Qy();return pv.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new bk(t,a);i.push(r.ue(e,o))})),pv.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(qg(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(Uk(e).Y("collectionPathOverlayIndex",i))})),pv.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=Qy(),a=qg(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Uk(e).W("collectionPathOverlayIndex",o).next((function(e){var t,n=Ae(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=Rk(r.It,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=Qy(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Uk(e).Z({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=Rk(a.It,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"ue",value:function(e,t){return Uk(e).put(function(e,t,n){var r=c(Dk(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Ng(e.re,n.mutation)}}(this.It,this.userId,t))}}],[{key:"oe",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function Uk(e){return yk(e,"documentOverlays")}var jk=function(){function e(){Te(this,e)}return Ne(e,[{key:"ce",value:function(e,t){this.ae(e,t),t.he()}},{key:"ae",value:function(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(Vv(e.integerValue));else if("doubleValue"in e){var n=Vv(e.doubleValue);isNaN(n)?this.le(t,13):(this.le(t,15),Qv(n)?t.fe(0):t.fe(n))}else if("timestampValue"in e){var r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de("".concat(r.seconds||"")),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(Bv(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.le(t,45),t.fe(i.latitude||0),t.fe(i.longitude||0)}else"mapValue"in e?hm(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):Np()}},{key:"_e",value:function(e,t){this.le(t,25),this.Ie(e,t)}},{key:"Ie",value:function(e,t){t.de(e)}},{key:"ye",value:function(e,t){var n=e.fields||{};this.le(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this._e(a,t),this.ae(n[a],t)}}},{key:"pe",value:function(e,t){var n=e.values||[];this.le(t,50);var r,i=Ae(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.ae(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ge",value:function(e,t){var n=this;this.le(t,37),ev.fromName(e).path.forEach((function(e){n.le(t,60),n.Ie(e,t)}))}},{key:"le",value:function(e,t){e.fe(t)}},{key:"we",value:function(e){e.fe(2)}}]),e}();function Vk(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Bk(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=Vk(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}jk.Te=new jk;var zk=function(){function e(){Te(this,e),this.buffer=new Uint8Array(1024),this.position=0}return Ne(e,[{key:"Ee",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ae(n.value),n=t.next();this.Re()}},{key:"be",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Pe(n.value),n=t.next();this.ve()}},{key:"Ve",value:function(e){var t,n=Ae(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ae(i);else if(i<2048)this.Ae(960|i>>>6),this.Ae(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ae(480|i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i);else{var a=r.codePointAt(0);this.Ae(240|a>>>18),this.Ae(128|63&a>>>12),this.Ae(128|63&a>>>6),this.Ae(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Re()}},{key:"Se",value:function(e){var t,n=Ae(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Pe(i);else if(i<2048)this.Pe(960|i>>>6),this.Pe(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Pe(480|i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i);else{var a=r.codePointAt(0);this.Pe(240|a>>>18),this.Pe(128|63&a>>>12),this.Pe(128|63&a>>>6),this.Pe(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ve()}},{key:"De",value:function(e){var t=this.Ce(e),n=Bk(t);this.xe(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Ne",value:function(e){var t=this.Ce(e),n=Bk(t);this.xe(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"ke",value:function(){this.Me(255),this.Me(255)}},{key:"Oe",value:function(){this.Fe(255),this.Fe(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"$e",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ce",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Ae",value:function(e){var t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}},{key:"Pe",value:function(e){var t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}},{key:"Re",value:function(){this.Me(0),this.Me(1)}},{key:"ve",value:function(){this.Fe(0),this.Fe(1)}},{key:"Me",value:function(e){this.xe(1),this.buffer[this.position++]=e}},{key:"Fe",value:function(e){this.xe(1),this.buffer[this.position++]=~e}},{key:"xe",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),qk=function(){function e(t){Te(this,e),this.Be=t}return Ne(e,[{key:"me",value:function(e){this.Be.Ee(e)}},{key:"de",value:function(e){this.Be.Ve(e)}},{key:"fe",value:function(e){this.Be.De(e)}},{key:"he",value:function(){this.Be.ke()}}]),e}(),Gk=function(){function e(t){Te(this,e),this.Be=t}return Ne(e,[{key:"me",value:function(e){this.Be.be(e)}},{key:"de",value:function(e){this.Be.Se(e)}},{key:"fe",value:function(e){this.Be.Ne(e)}},{key:"he",value:function(){this.Be.Oe()}}]),e}(),Kk=function(){function e(){Te(this,e),this.Be=new zk,this.Le=new qk(this.Be),this.Ue=new Gk(this.Be)}return Ne(e,[{key:"seed",value:function(e){this.Be.seed(e)}},{key:"qe",value:function(e){return 0===e?this.Le:this.Ue}},{key:"$e",value:function(){return this.Be.$e()}},{key:"reset",value:function(){this.Be.reset()}}]),e}(),Hk=function(){function e(t,n,r,i){Te(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return Ne(e,[{key:"Ke",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function Wk(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=Qk(e.arrayValue,t.arrayValue))?n:0!==(n=Qk(e.directionalValue,t.directionalValue))?n:ev.comparator(e.documentKey,t.documentKey)}function Qk(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var Yk=function(){function e(t){Te(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ge=t.orderBy,this.Qe=[];var n,r=Ae(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.dt()?this.je=i:this.Qe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return Ne(e,[{key:"We",value:function(e){var t=nv(e);if(void 0!==t&&!this.ze(t))return!1;for(var n=rv(e),r=0,i=0;r<n.length&&this.ze(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.je){var a=n[r];if(!this.He(this.je,a)||!this.Je(this.Ge[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Ge.length||!this.Je(this.Ge[i++],o))return!1}return!0}},{key:"ze",value:function(e){var t,n=Ae(this.Qe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.He(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"He",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"Je",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),$k=function(){function e(){Te(this,e),this.Ye=new Xk}return Ne(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.Ye.add(t),pv.resolve()}},{key:"getCollectionParents",value:function(e,t){return pv.resolve(this.Ye.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return pv.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return pv.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return pv.resolve(null)}},{key:"getIndexType",value:function(e,t){return pv.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return pv.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return pv.resolve(null)}},{key:"getMinOffset",value:function(e,t){return pv.resolve(sv.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return pv.resolve(sv.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return pv.resolve()}},{key:"updateIndexEntries",value:function(e,t){return pv.resolve()}}]),e}(),Xk=function(){function e(){Te(this,e),this.index={}}return Ne(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Pv(Xp.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Pv(Xp.comparator)).toArray()}}]),e}(),Jk=new Uint8Array(0),Zk=function(){function e(t,n){Te(this,e),this.user=t,this.databaseId=n,this.Xe=new Xk,this.Ze=new zy((function(e){return xm(e)}),(function(e,t){return _m(e,t)})),this.uid=t.uid||""}return Ne(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Xe.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Xe.add(t)}));var a={collectionId:r,parent:qg(i)};return eb(e).put(a)}return pv.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Wp(t),""],!1,!0);return eb(e).W(r).next((function(e){var r,i=Ae(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(Hg(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=nb(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=rb(e);return a.next((function(e){o.put(Pk(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=nb(e),r=rb(e),i=tb(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=tb(e),i=!0,a=new Map;return pv.forEach(this.tn(t),(function(t){return n.en(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=Zy(),o=[];return pv.forEach(a,(function(i,a){var u;Sp("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(xm(t)));var s=function(e,t){var n=nv(t);if(void 0===n)return null;var r,i=Ae(Sm(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=Ae(rv(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=Ae(Sm(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=Ae(rv(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Em(e,o.fieldPath,e.startAt):Tm(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Fm(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=Ae(rv(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Tm(e,o.fieldPath,e.endAt):Em(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Fm(r,i)}(a,i),h=n.nn(i,a,l),d=n.nn(i,a,f),p=n.sn(i,a,c),v=n.rn(i.indexId,s,h,l.inclusive,d,f.inclusive,p);return pv.forEach(v,(function(n){return r.J(n,t.limit).next((function(t){t.forEach((function(t){var n=ev.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return pv.resolve(null)}))}},{key:"tn",value:function(e){var t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}},{key:"rn",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(s){var f=t?u.on(t[s/c]):Jk,h=u.un(e,f,n[s%c],r),d=u.cn(e,f,i[s%c],a),p=o.map((function(t){return u.un(e,f,t,!0)}));l.push.apply(l,yt(u.createRange(h,d,p)))},h=0;h<s;++h)f(h);return l}},{key:"un",value:function(e,t,n,r){var i=new Hk(e,ev.empty(),t,n);return r?i:i.Ke()}},{key:"cn",value:function(e,t,n,r){var i=new Hk(e,ev.empty(),t,n);return r?i.Ke():i}},{key:"en",value:function(e,t){var n=new Yk(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=Ae(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.We(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2;return pv.forEach(this.tn(t),(function(t){return n.en(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new Pv(Zp.comparator),r=!1,i=Ae(e.filters);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.field.isKeyField()||("array-contains"===a.op||"array-contains-any"===a.op?r=!0:n=n.add(a.field))}}catch(c){i.e(c)}finally{i.f()}var o,u=Ae(e.orderBy);try{for(u.s();!(o=u.n()).done;){var s=o.value;s.field.isKeyField()||(n=n.add(s.field))}}catch(c){u.e(c)}finally{u.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return r}))}},{key:"an",value:function(e,t){var n,r=new Kk,i=Ae(rv(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.qe(a.kind);jk.Te.ce(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.$e()}},{key:"on",value:function(e){var t=new Kk;return jk.Te.ce(e,t.qe(0)),t.$e()}},{key:"hn",value:function(e,t){var n=new Kk;return jk.Te.ce(am(this.databaseId,t),n.qe(function(e){var t=rv(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.$e()}},{key:"sn",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new Kk);var i,a=0,o=Ae(rv(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=Ae(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.ln(t,s.fieldPath)&&um(c))r=this.fn(r,s,c);else{var h=f.qe(s.kind);jk.Te.ce(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.dn(r)}},{key:"nn",value:function(e,t,n){return this.sn(e,t,n.position)}},{key:"dn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].$e();return t}},{key:"fn",value:function(e,t,n){var r,i=yt(e),a=[],o=Ae(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=Ae(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new Kk;f.seed(l.$e()),jk.Te.ce(s,f.qe(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"ln",value:function(e,t){return!!e.filters.find((function(e){return e instanceof Cm&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=nb(e),i=rb(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next((function(e){var t=[];return pv.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new av(t.sequenceNumber,new sv(Ek(t.readTime),new ev(Hg(t.documentKey)),t.largestBatchId)):av.empty(),r=e.fields.map((function(e){var t=c(e,2),n=t[0],r=t[1];return new iv(Zp.fromServerFormat(n),r)}));return new tv(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Kp(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=nb(e),a=rb(e);return this._n(e).next((function(e){return i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return pv.forEach(t,(function(t){return a.put(Pk(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return pv.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?pv.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),pv.forEach(a,(function(r){return n.wn(e,t,r).next((function(t){var a=n.mn(i,r);return t.isEqual(a)?pv.resolve():n.gn(e,i,r,t,a)}))}))}))}))}},{key:"yn",value:function(e,t,n,r){return tb(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.hn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"pn",value:function(e,t,n,r){return tb(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.hn(n,t.key),t.key.path.toArray()])}},{key:"wn",value:function(e,t,n){var r=tb(e),i=new Pv(Wk);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.hn(n,t)])},(function(e,r){i=i.add(new Hk(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"mn",value:function(e,t){var n=new Pv(Wk),r=this.an(t,e);if(null==r)return n;var i=nv(t);if(null!=i){var a=e.data.field(i.fieldPath);if(um(a)){var o,u=Ae(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new Hk(t.indexId,e.key,this.on(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new Hk(t.indexId,e.key,Jk,r));return n}},{key:"gn",value:function(e,t,n,r,i){var a=this;Sp("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=Lv(a),s=Lv(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=Lv(o)):l?(i(u),u=Lv(a)):(u=Lv(a),s=Lv(o))}}(r,i,Wk,(function(r){o.push(a.yn(e,t,n,r))}),(function(r){o.push(a.pn(e,t,n,r))})),pv.waitFor(o)}},{key:"_n",value:function(e){var t=1;return rb(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return Wk(e,t)})).filter((function(e,t,n){return!t||0!==Wk(e,n[t-1])}));var r=[];r.push(e);var i,a=Ae(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=Wk(o,e),s=Wk(o,t);if(0===u)r[0]=e.Ke();else if(u>0&&s<0)r.push(o),r.push(o.Ke());else if(s>0)break}}catch(f){a.e(f)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,Jk,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,Jk,[]]));return c}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(ib)}},{key:"getMinOffset",value:function(e,t){var n=this;return pv.mapArray(this.tn(t),(function(t){return n.en(e,t).next((function(e){return e||Np()}))})).next(ib)}}]),e}();function eb(e){return yk(e,"collectionParents")}function tb(e){return yk(e,"indexEntries")}function nb(e){return yk(e,"indexConfiguration")}function rb(e){return yk(e,"indexState")}function ib(e){Ap(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;cv(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new sv(t.readTime,t.documentKey,n)}var ab={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ob=function(){function e(t,n,r){Te(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return Ne(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function ub(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Z({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){Ap(1===u)})));var c,l=[],f=Ae(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=Yg(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return pv.waitFor(a).next((function(){return l}))}function sb(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Np();t=e.noDocument}return JSON.stringify(t).length}ob.DEFAULT_COLLECTION_PERCENTILE=10,ob.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ob.DEFAULT=new ob(41943040,ob.DEFAULT_COLLECTION_PERCENTILE,ob.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ob.DISABLED=new ob(-1,0,0);var cb=function(){function e(t,n,r,i){Te(this,e),this.userId=t,this.It=n,this.indexManager=r,this.referenceDelegate=i,this.In={}}return Ne(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return fb(e).Z({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=hb(e),o=fb(e);return o.add({}).next((function(u){Ap("number"==typeof u);var s,c=new gk(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return Ng(e.re,t)})),i=n.mutations.map((function(t){return Ng(e.re,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.It,i.userId,c),f=[],h=new Pv((function(e,t){return Kp(e.canonicalString(),t.canonicalString())})),d=Ae(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=Yg(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,$g))}}catch(m){d.e(m)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.In[u]=c.keys()})),pv.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return fb(e).get(t).next((function(e){return e?(Ap(e.userId===n.userId),Tk(n.It,e)):null}))}},{key:"Tn",value:function(e,t){var n=this;return this.In[t]?pv.resolve(this.In[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.In[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return fb(e).Z({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(Ap(t.batchId>=r),a=Tk(n.It,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return fb(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return fb(e).W("userMutationsIndex",n).next((function(e){return e.map((function(e){return Tk(t.It,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=Qg(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return hb(e).Z({range:i},(function(r,i,o){var u=c(r,3),s=u[0],l=u[1],f=u[2],h=Hg(l);if(s===n.userId&&t.path.isEqual(h))return fb(e).get(f).next((function(e){if(!e)throw Np();Ap(e.userId===n.userId),a.push(Tk(n.It,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Pv(Kp),i=[];return t.forEach((function(t){var a=Qg(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=hb(e).Z({range:o},(function(e,i,a){var o=c(e,3),u=o[0],s=o[1],l=o[2],f=Hg(s);u===n.userId&&t.path.isEqual(f)?r=r.add(l):a.done()}));i.push(u)})),pv.waitFor(i).next((function(){return n.En(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=Qg(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new Pv(Kp);return hb(e).Z({range:o},(function(e,t,a){var o=c(e,3),s=o[0],l=o[1],f=o[2],h=Hg(l);s===n.userId&&r.isPrefixOf(h)?h.length===i&&(u=u.add(f)):a.done()})).next((function(){return n.En(e,u)}))}},{key:"En",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(fb(e).get(t).next((function(e){if(null===e)throw Np();Ap(e.userId===n.userId),r.push(Tk(n.It,e))})))})),pv.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return ub(e.ie,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.An(t.batchId)})),pv.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"An",value:function(e){delete this.In[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return pv.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return hb(e).Z({range:r},(function(e,n,r){if(e[0]===t.userId){var a=Hg(e[1]);i.push(a)}else r.done()})).next((function(){Ap(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return lb(e,this.userId,t)}},{key:"Rn",value:function(e){var t=this;return db(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"oe",value:function(t,n,r,i){return Ap(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function lb(e,t,n){var r=Qg(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return hb(e).Z({range:a,X:!0},(function(e,n,r){var a=c(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function fb(e){return yk(e,"mutations")}function hb(e){return yk(e,"documentMutations")}function db(e){return yk(e,"mutationQueues")}var pb=function(){function e(t){Te(this,e),this.bn=t}return Ne(e,[{key:"next",value:function(){return this.bn+=2,this.bn}}],[{key:"Pn",value:function(){return new e(0)}},{key:"vn",value:function(){return new e(-1)}}]),e}(),vb=function(){function e(t,n){Te(this,e),this.referenceDelegate=t,this.It=n}return Ne(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Vn(e).next((function(n){var r=new pb(n.highestTargetId);return n.highestTargetId=r.next(),t.Sn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Vn(e).next((function(e){return Yp.fromTimestamp(new Qp(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.Vn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Vn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Sn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Dn(e,t).next((function(){return n.Vn(e).next((function(r){return r.targetCount+=1,n.Cn(t,r),n.Sn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Dn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return mb(e).delete(t.targetId)})).next((function(){return n.Vn(e)})).next((function(t){return Ap(t.targetCount>0),t.targetCount-=1,n.Sn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return mb(e).Z((function(o,u){var s=Ck(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return pv.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return mb(e).Z((function(e,n){var r=Ck(n);t(r)}))}},{key:"Vn",value:function(e){return yb(e).get("targetGlobalKey").next((function(e){return Ap(null!==e),e}))}},{key:"Sn",value:function(e,t){return yb(e).put("targetGlobalKey",t)}},{key:"Dn",value:function(e,t){return mb(e).put(Nk(this.It,t))}},{key:"Cn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Vn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=xm(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return mb(e).Z({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=Ck(n);_m(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=gb(e);return t.forEach((function(t){var o=qg(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),pv.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=gb(e);return pv.forEach(t,(function(t){var a=qg(t.path);return pv.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=gb(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=gb(e),i=Zy();return r.Z({range:n,X:!0},(function(e,t,n){var r=Hg(e[1]),a=new ev(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=qg(t.path),r=IDBKeyRange.bound([n],[Wp(n)],!1,!0),i=0;return gb(e).Z({index:"documentTargetsIndex",X:!0,range:r},(function(e,t,n){var r=c(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"se",value:function(e,t){return mb(e).get(t).next((function(e){return e?Ck(e):null}))}}]),e}();function mb(e){return yk(e,"targets")}function yb(e){return yk(e,"targetGlobal")}function gb(e){return yk(e,"targetDocuments")}function kb(e,t){var n=c(e,2),r=n[0],i=n[1],a=c(t,2),o=a[0],u=a[1],s=Kp(r,o);return 0===s?Kp(i,u):s}var bb=function(){function e(t){Te(this,e),this.xn=t,this.buffer=new Pv(kb),this.Nn=0}return Ne(e,[{key:"kn",value:function(){return++this.Nn}},{key:"Mn",value:function(e){var t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();kb(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),wb=function(){function e(t,n,r){Te(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.On=null}return Ne(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}},{key:"stop",value:function(){this.On&&(this.On.cancel(),this.On=null)}},{key:"started",get:function(){return null!==this.On}},{key:"Fn",value:function(e){var t=this;Sp("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,kt(vt().mark((function e(){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.On=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!kv(e.t0)){e.next=12;break}Sp("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,hv(e.t0);case 14:return e.next=16,t.Fn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),xb=function(){function e(t,n){Te(this,e),this.$n=t,this.params=n}return Ne(e,[{key:"calculateTargetCount",value:function(e,t){return this.$n.Bn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return pv.resolve(Ev.at);var r=new bb(t);return this.$n.forEachTarget(e,(function(e){return r.Mn(e.sequenceNumber)})).next((function(){return n.$n.Ln(e,(function(e){return r.Mn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.$n.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.$n.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Sp("LruGarbageCollector","Garbage collection skipped; disabled"),pv.resolve(ab)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Sp("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),ab):n.Un(e,t)}))}},{key:"getCacheSize",value:function(e){return this.$n.getCacheSize(e)}},{key:"Un",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(Sp("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),Ip()<=It.DEBUG&&Sp("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),pv.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),_b=function(){function e(t,n){Te(this,e),this.db=t,this.garbageCollector=function(e,t){return new xb(e,t)}(this,n)}return Ne(e,[{key:"Bn",value:function(e){var t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"qn",value:function(e){var t=0;return this.Ln(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Ln",value:function(e,t){return this.Kn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return Ib(e,n)}},{key:"removeReference",value:function(e,t,n){return Ib(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return Ib(e,t)}},{key:"Gn",value:function(e,t){return function(e,t){var n=!1;return db(e).tt((function(r){return lb(e,r,t).next((function(e){return e&&(n=!0),pv.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Kn(e,(function(o,u){if(u<=t){var s=n.Gn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Yp.min()),gb(e).delete([0,qg(o.path)])}))}));i.push(s)}})).next((function(){return pv.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return Ib(e,t)}},{key:"Kn",value:function(e,t){var n,r=gb(e),i=Ev.at;return r.Z({index:"documentTargetsIndex"},(function(e,r){var a=c(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==Ev.at&&t(new ev(Hg(n)),i),i=s,n=u):i=Ev.at})).next((function(){i!==Ev.at&&t(new ev(Hg(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function Ib(e,t){return gb(e).put(function(e,t){return{targetId:0,path:qg(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var Sb=function(){function e(){Te(this,e),this.changes=new zy((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return Ne(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,km.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?pv.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),Eb=function(){function e(t){Te(this,e),this.It=t}return Ne(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return Ab(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return Ab(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Ik(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Qn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=km.newInvalidDocument(t);return Ab(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Rb(t))},(function(e,i){r=n.jn(t,i)})).next((function(){return r}))}},{key:"Wn",value:function(e,t){var n=this,r={size:0,document:km.newInvalidDocument(t)};return Ab(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Rb(t))},(function(e,i){r={document:n.jn(t,i),size:sb(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=Gy();return this.zn(e,t,(function(e,t){var i=n.jn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Hn",value:function(e,t){var n=this,r=Gy(),i=new Av(ev.comparator);return this.zn(e,t,(function(e,t){var a=n.jn(e,t);r=r.insert(e,a),i=i.insert(e,sb(t))})).next((function(){return{documents:r,Jn:i}}))}},{key:"zn",value:function(e,t,n){if(t.isEmpty())return pv.resolve();var r=new Pv(Pb);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(Rb(r.first()),Rb(r.last())),a=r.getIterator(),o=a.getNext();return Ab(e).Z({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=ev.fromSegments([].concat(yt(t.prefixPath),[t.collectionGroup,t.documentId]));o&&Pb(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.j(Rb(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),Ik(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ab(e).W(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=Gy(),i=Ae(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.jn(ev.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(u){i.e(u)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=Gy(),o=Db(t,n),u=Db(t,sv.max());return Ab(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.jn(ev.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new Cb(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return Nb(e).get("remoteDocumentGlobalKey").next((function(e){return Ap(!!e),e}))}},{key:"Qn",value:function(e,t){return Nb(e).put("remoteDocumentGlobalKey",t)}},{key:"jn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=Tg(e.re,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=ev.fromSegments(t.noDocument.path),i=Ek(t.noDocument.readTime);n=km.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Np();var a=ev.fromSegments(t.unknownDocument.path),o=Ek(t.unknownDocument.version);n=km.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new Qp(e[0],e[1]);return Yp.fromTimestamp(t)}(t.readTime)),n}(this.It,t);if(!n.isNoDocument()||!n.version.isEqual(Yp.min()))return n}return km.newInvalidDocument(e)}}]),e}();function Tb(e){return new Eb(e)}var Cb=function(e){Pe(n,e);var t=Ue(n);function n(e,r){var i;return Te(this,n),(i=t.call(this)).Yn=e,i.trackRemovals=r,i.Xn=new zy((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return Ne(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Pv((function(e,t){return Kp(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Xn.get(a);if(n.push(t.Yn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=_k(t.Yn.It,o);i=i.add(a.path.popLast());var c=sb(s);r+=c-u.size,n.push(t.Yn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=_k(t.Yn.It,o.convertToNoDocument(Yp.min()));n.push(t.Yn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.Yn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Yn.updateMetadata(e,r)),pv.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Yn.Wn(e,t).next((function(e){return n.Xn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Yn.Hn(e,t).next((function(e){var t=e.documents;return e.Jn.forEach((function(e,r){n.Xn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(Sb);function Nb(e){return yk(e,"remoteDocumentGlobal")}function Ab(e){return yk(e,"remoteDocumentsV14")}function Rb(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Db(e,t){var n=t.documentKey.path.toArray();return[e,Ik(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Pb(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Kp(n[a],r[a]))return i;return(i=Kp(n.length,r.length))||((i=Kp(n[n.length-2],r[r.length-2]))||Kp(n[n.length-1],r[r.length-1]))}var Ob=Ne((function e(t,n){Te(this,e),this.overlayedDocument=t,this.mutatedFields=n})),Lb=function(){function e(t,n,r,i){Te(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return Ne(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.getBaseDocument(e,t,r)})).next((function(e){return null!==r&&Ty(r.mutation,e,Mv.empty(),Qp.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,Zy()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Zy(),i=Qy();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=Hy();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=Qy();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,Zy())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=Gy(),a=$y(),o=$y();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Ry)?i=i.insert(t.key,t):void 0!==o&&(a.set(t.key,o.mutation.getFieldMask()),Ty(o.mutation,t,o.mutation.getFieldMask(),Qp.now()))})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new Ob(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=$y(),i=new Av((function(e,t){return e-t})),a=Zy();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=Ae(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||Mv.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||Zy()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=Yy();c.forEach((function(e){if(!a.has(e)){var n=Sy(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return pv.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return ev.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Qm(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):pv.resolve(Qy()),u=-1,s=a;return o.next((function(t){return pv.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?pv.resolve():i.getBaseDocument(e,t,n).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,Zy())})).next((function(e){return{batchId:u,changes:Wy(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new ev(t)).next((function(e){var t=Hy();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=Hy();return this.indexManager.getCollectionParents(e,i).next((function(o){return pv.forEach(o,(function(o){var u=function(e,t){return new zm(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.remoteDocumentCache.getAllFromCollection(e,t.path,n).next((function(a){return r=a,i.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId)})).next((function(e){e.forEach((function(e,t){var n=t.getKey();null===r.get(n)&&(r=r.insert(n,km.newInvalidDocument(n)))}));var n=Hy();return r.forEach((function(r,i){var a=e.get(r);void 0!==a&&Ty(a.mutation,i,Mv.empty(),Qp.now()),ty(t,i)&&(n=n.insert(r,i))})),n}))}},{key:"getBaseDocument",value:function(e,t,n){return null===n||1===n.mutation.type?this.remoteDocumentCache.getEntry(e,t):pv.resolve(km.newInvalidDocument(t))}}]),e}(),Mb=function(){function e(t){Te(this,e),this.It=t,this.Zn=new Map,this.ts=new Map}return Ne(e,[{key:"getBundleMetadata",value:function(e,t){return pv.resolve(this.Zn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Zn.set(t.id,{id:(n=t).id,version:n.version,createTime:yg(n.createTime)}),pv.resolve()}},{key:"getNamedQuery",value:function(e,t){return pv.resolve(this.ts.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.ts.set(t.name,function(e){return{name:e.name,query:Ak(e.bundledQuery),readTime:yg(e.readTime)}}(t)),pv.resolve()}}]),e}(),Fb=function(){function e(){Te(this,e),this.overlays=new Av(ev.comparator),this.es=new Map}return Ne(e,[{key:"getOverlay",value:function(e,t){return pv.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=Qy();return pv.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.ue(e,t,i)})),pv.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.es.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.es.delete(n)),pv.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Qy(),i=t.length+1,a=new ev(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return pv.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Av((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=Qy(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=Qy(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return pv.resolve(s)}},{key:"ue",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.es.get(r.largestBatchId).delete(n.key);this.es.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new bk(t,n));var a=this.es.get(t);void 0===a&&(a=Zy(),this.es.set(t,a)),this.es.set(t,a.add(n.key))}}]),e}(),Ub=function(){function e(){Te(this,e),this.ns=new Pv(jb.ss),this.rs=new Pv(jb.os)}return Ne(e,[{key:"isEmpty",value:function(){return this.ns.isEmpty()}},{key:"addReference",value:function(e,t){var n=new jb(e,t);this.ns=this.ns.add(n),this.rs=this.rs.add(n)}},{key:"us",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.cs(new jb(e,t))}},{key:"hs",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"ls",value:function(e){var t=this,n=new ev(new Xp([])),r=new jb(n,e),i=new jb(n,e+1),a=[];return this.rs.forEachInRange([r,i],(function(e){t.cs(e),a.push(e.key)})),a}},{key:"fs",value:function(){var e=this;this.ns.forEach((function(t){return e.cs(t)}))}},{key:"cs",value:function(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}},{key:"ds",value:function(e){var t=new ev(new Xp([])),n=new jb(t,e),r=new jb(t,e+1),i=Zy();return this.rs.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new jb(e,0),n=this.ns.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),jb=function(){function e(t,n){Te(this,e),this.key=t,this._s=n}return Ne(e,null,[{key:"ss",value:function(e,t){return ev.comparator(e.key,t.key)||Kp(e._s,t._s)}},{key:"os",value:function(e,t){return Kp(e._s,t._s)||ev.comparator(e.key,t.key)}}]),e}(),Vb=function(){function e(t,n){Te(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this.gs=new Pv(jb.ss)}return Ne(e,[{key:"checkEmpty",value:function(e){return pv.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new gk(i,t,n,r);this.mutationQueue.push(a);var o,u=Ae(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.gs=this.gs.add(new jb(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return pv.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return pv.resolve(this.ys(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ps(n),i=r<0?0:r;return pv.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return pv.resolve(0===this.mutationQueue.length?-1:this.ws-1)}},{key:"getAllMutationBatches",value:function(e){return pv.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new jb(t,0),i=new jb(t,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([r,i],(function(e){var t=n.ys(e._s);a.push(t)})),pv.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Pv(Kp);return t.forEach((function(e){var t=new jb(e,0),i=new jb(e,Number.POSITIVE_INFINITY);n.gs.forEachInRange([t,i],(function(e){r=r.add(e._s)}))})),pv.resolve(this.Is(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;ev.isDocumentKey(i)||(i=i.child(""));var a=new jb(new ev(i),0),o=new Pv(Kp);return this.gs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e._s)),!0)}),a),pv.resolve(this.Is(o))}},{key:"Is",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.ys(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Ap(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();var r=this.gs;return pv.forEach(t.mutations,(function(i){var a=new jb(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.gs=r}))}},{key:"An",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new jb(t,0),r=this.gs.firstAfterOrEqual(n);return pv.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,pv.resolve()}},{key:"Ts",value:function(e,t){return this.ps(e)}},{key:"ps",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"ys",value:function(e){var t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),Bb=function(){function e(t){Te(this,e),this.Es=t,this.docs=new Av(ev.comparator),this.size=0}return Ne(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Es(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return pv.resolve(n?n.document.mutableCopy():km.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Gy();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():km.newInvalidDocument(e))})),pv.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=Gy(),i=new ev(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||cv(uv(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return pv.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Np()}},{key:"As",value:function(e,t){return pv.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new zb(this)}},{key:"getSize",value:function(e){return pv.resolve(this.size)}}]),e}(),zb=function(e){Pe(n,e);var t=Ue(n);function n(e){var r;return Te(this,n),(r=t.call(this)).Yn=e,r}return Ne(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Yn.addEntry(e,i)):t.Yn.removeEntry(r)})),pv.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Yn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Yn.getEntries(e,t)}}]),n}(Sb),qb=function(){function e(t){Te(this,e),this.persistence=t,this.Rs=new zy((function(e){return xm(e)}),_m),this.lastRemoteSnapshotVersion=Yp.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Ub,this.targetCount=0,this.vs=pb.Pn()}return Ne(e,[{key:"forEachTarget",value:function(e,t){return this.Rs.forEach((function(e,n){return t(n)})),pv.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return pv.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return pv.resolve(this.bs)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.vs.next(),pv.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.bs&&(this.bs=t),pv.resolve()}},{key:"Dn",value:function(e){this.Rs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.vs=new pb(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Dn(t),this.targetCount+=1,pv.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Dn(t),pv.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,pv.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Rs.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Rs.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),pv.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return pv.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Rs.get(t)||null;return pv.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Ps.us(t,n),pv.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Ps.hs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),pv.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Ps.ls(t),pv.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Ps.ds(t);return pv.resolve(n)}},{key:"containsKey",value:function(e,t){return pv.resolve(this.Ps.containsKey(t))}}]),e}(),Gb=function(){function e(t,n){var r=this;Te(this,e),this.Vs={},this.overlays={},this.Ss=new Ev(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=t(this),this.Cs=new qb(this),this.indexManager=new $k,this.remoteDocumentCache=new Bb((function(e){return r.referenceDelegate.xs(e)})),this.It=new xk(n),this.Ns=new Mb(this.It)}return Ne(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Ds=!1,Promise.resolve()}},{key:"started",get:function(){return this.Ds}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Fb,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Vs[e.toKey()];return n||(n=new Vb(t,this.referenceDelegate),this.Vs[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Cs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ns}},{key:"runTransaction",value:function(e,t,n){var r=this;Sp("MemoryPersistence","Starting transaction:",e);var i=new Kb(this.Ss.next());return this.referenceDelegate.ks(),n(i).next((function(e){return r.referenceDelegate.Ms(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Os",value:function(e,t){return pv.or(Object.values(this.Vs).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Kb=function(e){Pe(n,e);var t=Ue(n);function n(e){var r;return Te(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return Ne(n)}(fv),Hb=function(){function e(t){Te(this,e),this.persistence=t,this.Fs=new Ub,this.$s=null}return Ne(e,[{key:"Ls",get:function(){if(this.$s)return this.$s;throw Np()}},{key:"addReference",value:function(e,t,n){return this.Fs.addReference(n,t),this.Ls.delete(n.toString()),pv.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Fs.removeReference(n,t),this.Ls.add(n.toString()),pv.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Ls.add(t.toString()),pv.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Fs.ls(t.targetId).forEach((function(e){return n.Ls.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Ls.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"ks",value:function(){this.$s=new Set}},{key:"Ms",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return pv.forEach(this.Ls,(function(r){var i=ev.fromPath(r);return t.Us(e,i).next((function(e){e||n.removeEntry(i,Yp.min())}))})).next((function(){return t.$s=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Us(e,t).next((function(e){e?n.Ls.delete(t.toString()):n.Ls.add(t.toString())}))}},{key:"xs",value:function(e){return 0}},{key:"Us",value:function(e,t){var n=this;return pv.or([function(){return pv.resolve(n.Fs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Os(e,t)}])}}],[{key:"Bs",value:function(t){return new e(t)}}]),e}(),Wb=function(){function e(t){Te(this,e),this.It=t}return Ne(e,[{key:"$",value:function(e,t,n,r){var i=this,a=new vv("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Wg,{unique:!0}),e.createObjectStore("documentMutations")}(e),Qb(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=pv.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Qb(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Yp.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").W().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Wg,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return pv.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.qs(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Ks(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Gs(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.Qs(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.js(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:sk});t.createIndex("collectionPathOverlayIndex",ck,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",lk,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:Xg});t.createIndex("documentKeyIndex",Jg),t.createIndex("collectionGroupIndex",Zg)}(e)})).next((function(){return i.Ws(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.zs(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:ik}).createIndex("sequenceNumberIndex",ak,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:ok}).createIndex("documentKeyIndex",uk,{unique:!1})}(e)}))),o}},{key:"Ks",value:function(e){var t=0;return e.store("remoteDocuments").Z((function(e,n){t+=sb(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"qs",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next((function(n){return pv.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",i).next((function(r){return pv.forEach(r,(function(r){Ap(r.userId===n.userId);var i=Tk(t.It,r);return ub(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Gs",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Z((function(n,i){var a=new Xp(n),o=function(e){return[0,qg(e)]}(a);r.push(t.get(o).next((function(n){return n?pv.resolve():function(n){return t.put({targetId:0,path:qg(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return pv.waitFor(r)}))}))}},{key:"Qs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:rk});var n=t.store("collectionParents"),r=new Xk,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:qg(i)})}};return t.store("remoteDocuments").Z({X:!0},(function(e,t){var n=new Xp(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Z({X:!0},(function(e,t){var n=c(e,3),r=(n[0],n[1]),a=(n[2],Hg(r));return i(a.popLast())}))}))}},{key:"js",value:function(e){var t=this,n=e.store("targets");return n.Z((function(e,r){var i=Ck(r),a=Nk(t.It,i);return n.put(a)}))}},{key:"Ws",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Z((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new ev(Xp.fromString(i.document.name).popFirst(5)):i.noDocument?ev.fromSegments(i.noDocument.path):i.unknownDocument?ev.fromSegments(i.unknownDocument.path):Np()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return pv.waitFor(r)}))}},{key:"zs",value:function(e,t){var n=this,r=t.store("mutations"),i=Tb(this.It),a=new Gb(Hb.Bs,this.It.re);return r.W().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:Zy();Tk(n.It,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),pv.forEach(r,(function(e,r){var o=new wp(r),u=Fk.oe(n.It,o),s=a.getIndexManager(o),c=cb.oe(o,n.It,s,a.referenceDelegate);return new Lb(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new mk(t,Ev.at),e).next()}))}))}}]),e}();function Qb(e){e.createObjectStore("targetDocuments",{keyPath:tk}).createIndex("documentTargetsIndex",nk,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ek,{unique:!0}),e.createObjectStore("targetGlobal")}var Yb="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",$b=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(Te(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Hs=a,this.window=o,this.document=u,this.Js=c,this.Ys=l,this.Xs=f,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=function(e){return Promise.resolve()},!e.C())throw new Pp(Dp.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new _b(this,i),this.ii=n+"main",this.It=new xk(s),this.ri=new mv(this.ii,this.Xs,new Wb(this.It)),this.Cs=new vb(this.referenceDelegate,this.It),this.remoteDocumentCache=Tb(this.It),this.Ns=new Ok,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===l&&Ep("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return Ne(e,[{key:"start",value:function(){var e=this;return this.ui().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Pp(Dp.FAILED_PRECONDITION,Yb);return e.ci(),e.ai(),e.hi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Cs.getHighestSequenceNumber(t)}))})).then((function(t){e.Ss=new Ev(t,e.Js)})).then((function(){e.Ds=!0})).catch((function(t){return e.ri&&e.ri.close(),Promise.reject(t)}))}},{key:"li",value:function(e){var t=this;return this.si=function(){var n=kt(vt().mark((function n(r){return vt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ri.L(function(){var t=kt(vt().mark((function t(n){return vt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget(kt(vt().mark((function e(){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.ui();case 4:case"end":return e.stop()}}),e)})))))}},{key:"ui",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return Jb(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.fi(t).next((function(t){t||(e.isPrimary=!1,e.Hs.enqueueRetryable((function(){return e.si(!1)})))}))})).next((function(){return e.di(t)})).next((function(n){return e.isPrimary&&!n?e._i(t).next((function(){return!1})):!!n&&e.wi(t).next((function(){return!0}))}))})).catch((function(t){if(kv(t))return Sp("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Sp("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Hs.enqueueRetryable((function(){return e.si(t)})),e.isPrimary=t}))}},{key:"fi",value:function(e){var t=this;return Xb(e).get("owner").next((function(e){return pv.resolve(t.mi(e))}))}},{key:"gi",value:function(e){return Jb(e).delete(this.clientId)}},{key:"yi",value:function(){var e=kt(vt().mark((function e(){var t,n,r,i,a=this;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.pi(this.ni,18e5)){e.next=6;break}return this.ni=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=yk(e,"clientMetadata");return t.W().next((function(e){var n=a.Ii(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return pv.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.oi){n=Ae(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.oi.removeItem(this.Ti(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"hi",value:function(){var e=this;this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.ui().then((function(){return e.yi()})).then((function(){return e.hi()}))}))}},{key:"mi",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"di",value:function(e){var t=this;return this.Ys?pv.resolve(!0):Xb(e).get("owner").next((function(n){if(null!==n&&t.pi(n.leaseTimestampMs,5e3)&&!t.Ei(n.ownerId)){if(t.mi(n)&&t.networkEnabled)return!0;if(!t.mi(n)){if(!n.allowTabSynchronization)throw new Pp(Dp.FAILED_PRECONDITION,Yb);return!1}}return!(!t.networkEnabled||!t.inForeground)||Jb(e).W().next((function(e){return void 0===t.Ii(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Sp("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=kt(vt().mark((function e(){var t=this;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ds=!1,this.Ai(),this.ei&&(this.ei.cancel(),this.ei=null),this.Ri(),this.bi(),e.next=7,this.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new mk(e,Ev.at);return t._i(n).next((function(){return t.gi(n)}))}));case 7:this.ri.close(),this.Pi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ii",value:function(e,t){var n=this;return e.filter((function(e){return n.pi(e.updateTimeMs,t)&&!n.Ei(e.clientId)}))}},{key:"vi",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return Jb(t).W().next((function(t){return e.Ii(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Ds}},{key:"getMutationQueue",value:function(e,t){return cb.oe(e,this.It,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Cs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new Zk(e,this.It.re.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return Fk.oe(this.It,e)}},{key:"getBundleCache",value:function(){return this.Ns}},{key:"runTransaction",value:function(e,t,n){var r=this;Sp("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.Xs)?vk:14===i?pk:13===i?dk:12===i?hk:11===i?fk:void Np();return this.ri.runTransaction(e,o,u,(function(i){return a=new mk(i,r.Ss?r.Ss.next():Ev.at),"readwrite-primary"===t?r.fi(a).next((function(e){return!!e||r.di(a)})).next((function(t){if(!t)throw Ep("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Hs.enqueueRetryable((function(){return r.si(!1)})),new Pp(Dp.FAILED_PRECONDITION,lv);return n(a)})).next((function(e){return r.wi(a).next((function(){return e}))})):r.Vi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Vi",value:function(e){var t=this;return Xb(e).get("owner").next((function(e){if(null!==e&&t.pi(e.leaseTimestampMs,5e3)&&!t.Ei(e.ownerId)&&!t.mi(e)&&!(t.Ys||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Pp(Dp.FAILED_PRECONDITION,Yb)}))}},{key:"wi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Xb(e).put("owner",t)}},{key:"_i",value:function(e){var t=this,n=Xb(e);return n.get("owner").next((function(e){return t.mi(e)?(Sp("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):pv.resolve()}))}},{key:"pi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(Ep("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ci",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=function(){e.Hs.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.ui()}))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ri",value:function(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}},{key:"ai",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=function(){t.Ai(),!$e()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Hs.enterRestrictedMode(!0),t.Hs.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.Zs))}},{key:"bi",value:function(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}},{key:"Ei",value:function(e){var t;try{var n=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Sp("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Ep("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ai",value:function(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(bl){Ep("Failed to set zombie client id.",bl)}}},{key:"Pi",value:function(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(bl){}}},{key:"Ti",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"C",value:function(){return mv.C()}}]),e}();function Xb(e){return yk(e,"owner")}function Jb(e){return yk(e,"clientMetadata")}function Zb(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var ew=function(){function e(t,n,r,i){Te(this,e),this.targetId=t,this.fromCache=n,this.Si=r,this.Di=i}return Ne(e,null,[{key:"Ci",value:function(t,n){var r,i=Zy(),a=Zy(),o=Ae(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),tw=function(){function e(){Te(this,e),this.xi=!1}return Ne(e,[{key:"initialize",value:function(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.ki(e,t).next((function(a){return a||i.Mi(e,t,r,n)})).next((function(n){return n||i.Oi(e,t)}))}},{key:"ki",value:function(e,t){var n=this;if(Km(t))return pv.resolve(null);var r=$m(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=Xm(t,null,"F"),r=$m(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=Zy.apply(void 0,yt(i));return n.Ni.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.Fi(t,i);return n.$i(t,o,a,r.readTime)?n.ki(e,Xm(t,null,"F")):n.Bi(e,o,t,r)}))}))})))}))}},{key:"Mi",value:function(e,t,n,r){var i=this;return Km(t)||r.isEqual(Yp.min())?this.Oi(e,t):this.Ni.getDocuments(e,n).next((function(a){var o=i.Fi(t,a);return i.$i(t,o,n,r)?i.Oi(e,t):(Ip()<=It.DEBUG&&Sp("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ey(t)),i.Bi(e,o,t,ov(r,-1)))}))}},{key:"Fi",value:function(e,t){var n=new Pv(ry(e));return t.forEach((function(t,r){ty(e,r)&&(n=n.add(r))})),n}},{key:"$i",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Oi",value:function(e,t){return Ip()<=It.DEBUG&&Sp("QueryEngine","Using full collection scan to execute query:",ey(t)),this.Ni.getDocumentsMatchingQuery(e,t,sv.min())}},{key:"Bi",value:function(e,t,n,r){return this.Ni.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),nw=function(){function e(t,n,r,i){Te(this,e),this.persistence=t,this.Li=n,this.It=i,this.Ui=new Av(Kp),this.qi=new zy((function(e){return xm(e)}),_m),this.Ki=new Map,this.Gi=t.getRemoteDocumentCache(),this.Cs=t.getTargetCache(),this.Ns=t.getBundleCache(),this.Qi(r)}return Ne(e,[{key:"Qi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Lb(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Ui)}))}}]),e}();function rw(e,t,n,r){return new nw(e,t,n,r)}function iw(e,t){return aw.apply(this,arguments)}function aw(){return aw=kt(vt().mark((function e(t,n){var r;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Rp(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.Qi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=Zy(),s=Ae(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=Ae(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=Ae(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,y=Ae(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;u=u.add(g.key)}}catch(k){y.e(k)}finally{y.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{ji:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),aw.apply(this,arguments)}function ow(e,t){var n=Rp(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Gi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=pv.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Ap(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=Zy(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function uw(e){var t=Rp(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Cs.getLastRemoteSnapshotVersion(e)}))}function sw(e,t){var n=Rp(e),r=t.snapshotVersion,i=n.Ui;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Gi.newChangeBuffer({trackRemovals:!0});i=n.Ui;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Cs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Cs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(Fv.EMPTY_BYTE_STRING,Yp.min()).withLastLimboFreeSnapshotVersion(Yp.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Cs.updateTargetData(e,c))}}));var u=Gy(),s=Zy();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(cw(e,a,t.documentUpdates).next((function(e){u=e.Wi,s=e.zi}))),!r.isEqual(Yp.min())){var c=n.Cs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Cs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return pv.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.Ui=i,e}))}function cw(e,t,n){var r=Zy(),i=Zy();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=Gy();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(Yp.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):Sp("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{Wi:r,zi:i}}))}function lw(e,t){var n=Rp(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function fw(e,t){var n=Rp(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Cs.getTargetData(e,t).next((function(i){return i?(r=i,pv.resolve(r)):n.Cs.allocateTargetId(e).next((function(i){return r=new wk(t,i,0,e.currentSequenceNumber),n.Cs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Ui.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ui=n.Ui.insert(e.targetId,e),n.qi.set(t,e.targetId)),e}))}function hw(e,t,n){return dw.apply(this,arguments)}function dw(){return dw=kt(vt().mark((function e(t,n,r){var i,a,o;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Rp(t),a=i.Ui.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),kv(e.t1)){e.next=12;break}throw e.t1;case 12:Sp("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Ui=i.Ui.remove(n),i.qi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),dw.apply(this,arguments)}function pw(e,t,n){var r=Rp(e),i=Yp.min(),a=Zy();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Rp(e),i=r.qi.get(n);return void 0!==i?pv.resolve(r.Ui.get(i)):r.Cs.getTargetData(t,n)}(r,e,$m(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Li.getDocumentsMatchingQuery(e,t,n?i:Yp.min(),n?a:Zy())})).next((function(e){return yw(r,ny(t),e),{documents:e,Hi:a}}))}))}function vw(e,t){var n=Rp(e),r=Rp(n.Cs),i=n.Ui.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.se(e,t).next((function(e){return e?e.target:null}))}))}function mw(e,t){var n=Rp(e),r=n.Ki.get(t)||Yp.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Gi.getAllFromCollectionGroup(e,t,ov(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return yw(n,t,e),e}))}function yw(e,t,n){var r=Yp.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Ki.set(t,r)}function gw(e,t,n,r){return kw.apply(this,arguments)}function kw(){return kw=kt(vt().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Rp(t),o=Zy(),u=Gy(),s=Ae(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.Ji(l.metadata.name),l.document&&(o=o.add(f)),(h=n.Yi(l)).setReadTime(n.Xi(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a.Gi.newChangeBuffer({trackRemovals:!0}),e.next=7,fw(a,function(e){return $m(Gm(Xp.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return cw(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.Cs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Cs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.Wi,t.zi)})).next((function(){return t.Wi}))}))})));case 9:case"end":return e.stop()}}),e)}))),kw.apply(this,arguments)}function bw(e,t){return ww.apply(this,arguments)}function ww(){return ww=kt(vt().mark((function e(t,n){var r,i,a,o=arguments;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:Zy(),e.next=3,fw(t,$m(Ak(n.bundledQuery)));case 3:return i=e.sent,a=Rp(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=yg(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Ns.saveNamedQuery(e,n);var o=i.withResumeToken(Fv.EMPTY_BYTE_STRING,t);return a.Ui=a.Ui.insert(o.targetId,o),a.Cs.updateTargetData(e,o).next((function(){return a.Cs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Cs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Ns.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),ww.apply(this,arguments)}function xw(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function _w(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Iw(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Sw=function(){function e(t,n,r,i){Te(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return Ne(e,[{key:"tr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new Pp(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(Ep("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),Ew=function(){function e(t,n,r){Te(this,e),this.targetId=t,this.state=n,this.error=r}return Ne(e,[{key:"tr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Pp(i.error.code,i.error.message))),a?new e(t,i.state,r):(Ep("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),Tw=function(){function e(t,n){Te(this,e),this.clientId=t,this.activeTargetIds=n}return Ne(e,null,[{key:"Zi",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=tg(),o=0;i&&o<r.activeTargetIds.length;++o)i=Yv(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(Ep("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),Cw=function(){function e(t,n){Te(this,e),this.clientId=t,this.onlineState=n}return Ne(e,null,[{key:"Zi",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Ep("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),Nw=function(){function e(){Te(this,e),this.activeTargetIds=tg()}return Ne(e,[{key:"er",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"nr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"tr",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Aw=function(){function e(t,n,r,i,a){Te(this,e),this.window=t,this.Hs=n,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Av(Kp),this.started=!1,this.cr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ar=xw(this.persistenceKey,this.sr),this.hr=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ur=this.ur.insert(this.sr,new Nw),this.lr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.dr=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this._r=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.wr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.mr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}return Ne(e,[{key:"start",value:function(){var e=kt(vt().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.vi();case 2:t=e.sent,n=Ae(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.sr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(xw(this.persistenceKey,i)))&&(o=Tw.Zi(i,a))&&(this.ur=this.ur.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.gr(),(u=this.storage.getItem(this.wr))&&(s=this.yr(u))&&this.pr(s),c=Ae(this.cr);try{for(c.s();!(l=c.n()).done;)f=l.value,this.rr(f)}catch(d){c.e(d)}finally{c.f()}this.cr=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.hr,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Ir(this.ur)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ur.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Tr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Tr(e,t,n),this.Er(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Iw(this.persistenceKey,e));if(n){var r=Ew.Zi(e,n);r&&(t=r.state)}}return this.Ar.er(e),this.gr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Ar.nr(e),this.gr()}},{key:"isLocalQueryTarget",value:function(e){return this.Ar.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Iw(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Rr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Er(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.br(e)}},{key:"notifyBundleLoaded",value:function(e){this.Pr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return Sp("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){Sp("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){Sp("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"rr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Sp("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ar)return void Ep("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable(kt(vt().mark((function e(){var r,i,a,o,u,s,c;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.lr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.vr(n.key),e.abrupt("return",t.Vr(r,null));case 6:if(!(i=t.Sr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Vr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.dr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Dr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Cr(a));case 16:e.next=41;break;case 18:if(!t._r.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Nr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.kr(o));case 23:e.next=41;break;case 25:if(n.key!==t.wr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.yr(n.newValue))){e.next=30;break}return e.abrupt("return",t.pr(u));case 30:e.next=41;break;case 32:if(n.key!==t.hr){e.next=37;break}s=function(e){var t=Ev.at;if(null!=e)try{var n=JSON.parse(e);Ap("number"==typeof n),t=n}catch(e){Ep("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==Ev.at&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.mr){e.next=41;break}return c=t.Mr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Or(e)})));case 41:e.next=44;break;case 43:t.cr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Ar",get:function(){return this.ur.get(this.sr)}},{key:"gr",value:function(){this.setItem(this.ar,this.Ar.tr())}},{key:"Tr",value:function(e,t,n){var r=new Sw(this.currentUser,e,t,n),i=_w(this.persistenceKey,this.currentUser,e);this.setItem(i,r.tr())}},{key:"Er",value:function(e){var t=_w(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"br",value:function(e){var t={clientId:this.sr,onlineState:e};this.storage.setItem(this.wr,JSON.stringify(t))}},{key:"Rr",value:function(e,t,n){var r=Iw(this.persistenceKey,e),i=new Ew(e,t,n);this.setItem(r,i.tr())}},{key:"Pr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}},{key:"vr",value:function(e){var t=this.lr.exec(e);return t?t[1]:null}},{key:"Sr",value:function(e,t){var n=this.vr(e);return Tw.Zi(n,t)}},{key:"Dr",value:function(e,t){var n=this.dr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Sw.Zi(new wp(i),r,t)}},{key:"Nr",value:function(e,t){var n=this._r.exec(e),r=Number(n[1]);return Ew.Zi(r,t)}},{key:"yr",value:function(e){return Cw.Zi(e)}},{key:"Mr",value:function(e){return JSON.parse(e)}},{key:"Cr",value:function(){var e=kt(vt().mark((function e(t){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Fr(t.batchId,t.state,t.error));case 2:Sp("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"kr",value:function(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}},{key:"Vr",value:function(e,t){var n=this,r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),a=this.Ir(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Br(o,u).then((function(){n.ur=r}))}},{key:"pr",value:function(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Ir",value:function(e){var t=tg();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"C",value:function(e){return!(!e||!e.localStorage)}}]),e}(),Rw=function(){function e(){Te(this,e),this.Lr=new Nw,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return Ne(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Lr.er(e),this.Ur[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Ur[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Lr.nr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Lr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Ur[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Lr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Lr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Lr=new Nw,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Dw=function(){function e(){Te(this,e)}return Ne(e,[{key:"qr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Pw=function(){function e(){var t=this;Te(this,e),this.Kr=function(){return t.Gr()},this.Qr=function(){return t.jr()},this.Wr=[],this.zr()}return Ne(e,[{key:"qr",value:function(e){this.Wr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}},{key:"zr",value:function(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}},{key:"Gr",value:function(){Sp("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=Ae(this.Wr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"jr",value:function(){Sp("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=Ae(this.Wr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"C",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),Ow={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Lw=function(){function e(t){Te(this,e),this.Hr=t.Hr,this.Jr=t.Jr}return Ne(e,[{key:"Yr",value:function(e){this.Xr=e}},{key:"Zr",value:function(e){this.eo=e}},{key:"onMessage",value:function(e){this.no=e}},{key:"close",value:function(){this.Jr()}},{key:"send",value:function(e){this.Hr(e)}},{key:"so",value:function(){this.Xr()}},{key:"io",value:function(e){this.eo(e)}},{key:"ro",value:function(e){this.no(e)}}]),e}(),Mw=function(e){Pe(n,e);var t=Ue(n);function n(e){var r;return Te(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return Ne(n,[{key:"lo",value:function(e,t,n,r){return new Promise((function(i,a){var o=new kp;o.listenOnce(pp.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case dp.NO_ERROR:var t=o.getResponseJson();Sp("Connection","XHR received:",JSON.stringify(t)),i(t);break;case dp.TIMEOUT:Sp("Connection",'RPC "'+e+'" timed out'),a(new Pp(Dp.DEADLINE_EXCEEDED,"Request time out"));break;case dp.HTTP_ERROR:var n=o.getStatus();if(Sp("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Dp).indexOf(t)>=0?t:Dp.UNKNOWN}(r.status);a(new Pp(u,r.message))}else a(new Pp(Dp.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Pp(Dp.UNAVAILABLE,"Connection failed."));break;default:Np()}}finally{Sp("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"_o",value:function(e,t,n){var r=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=fp(),a=hp(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new yp({})),this.ho(o.initMessageHeaders,t,n),Ye()||Je()||Qe().indexOf("Electron/")>=0||Ze()||Qe().indexOf("MSAppHost/")>=0||Xe()||(o.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");Sp("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new Lw({Hr:function(e){l?Sp("Connection","Not sending because WebChannel is closed:",e):(c||(Sp("Connection","Opening WebChannel transport."),s.open(),c=!0),Sp("Connection","WebChannel sending:",e),s.send(e))},Jr:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,gp.EventType.OPEN,(function(){l||Sp("Connection","WebChannel transport opened.")})),h(s,gp.EventType.CLOSE,(function(){l||(l=!0,Sp("Connection","WebChannel transport closed"),f.io())})),h(s,gp.EventType.ERROR,(function(e){l||(l=!0,Tp("Connection","WebChannel transport errored:",e),f.io(new Pp(Dp.UNAVAILABLE,"The operation could not be completed")))})),h(s,gp.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];Ap(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){Sp("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=Ly[e];if(void 0!==t)return By(t)}(a),u=i.message;void 0===o&&(o=Dp.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.io(new Pp(o,u)),s.close()}else Sp("Connection","WebChannel received:",n),f.ro(n)}})),h(a,vp.STAT_EVENT,(function(e){e.stat===mp.PROXY?Sp("Connection","Detected buffering proxy"):e.stat===mp.NOPROXY&&Sp("Connection","Detected no buffering proxy")})),setTimeout((function(){f.so()}),0),f}}]),n}(function(){function e(t){Te(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.oo=n+"://"+t.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return Ne(e,[{key:"co",value:function(e,t,n,r,i){var a=this.ao(e,t);Sp("RestConnection","Sending: ",a,n);var o={};return this.ho(o,r,i),this.lo(e,a,o,n).then((function(e){return Sp("RestConnection","Received: ",e),e}),(function(t){throw Tp("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"fo",value:function(e,t,n,r,i,a){return this.co(e,t,n,r,i)}},{key:"ho",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+xp,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"ao",value:function(e,t){var n=Ow[e];return"".concat(this.oo,"/v1/").concat(t,":").concat(n)}}]),e}());function Fw(){return"undefined"!=typeof window?window:null}function Uw(){return"undefined"!=typeof document?document:null}function jw(e){return new dg(e,!0)}var Vw=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;Te(this,e),this.Hs=t,this.timerId=n,this.wo=r,this.mo=i,this.yo=a,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}return Ne(e,[{key:"reset",value:function(){this.po=0}},{key:"Eo",value:function(){this.po=this.yo}},{key:"Ao",value:function(e){var t=this;this.cancel();var n=Math.floor(this.po+this.Ro()),r=Math.max(0,Date.now()-this.To),i=Math.max(0,n-r);i>0&&Sp("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.po," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Io=this.Hs.enqueueAfterDelay(this.timerId,i,(function(){return t.To=Date.now(),e()})),this.po*=this.mo,this.po<this.wo&&(this.po=this.wo),this.po>this.yo&&(this.po=this.yo)}},{key:"bo",value:function(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}},{key:"cancel",value:function(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}},{key:"Ro",value:function(){return(Math.random()-.5)*this.po}}]),e}(),Bw=function(){function e(t,n,r,i,a,o,u,s){Te(this,e),this.Hs=t,this.Po=r,this.vo=i,this.Vo=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new Vw(t,n)}return Ne(e,[{key:"No",value:function(){return 1===this.state||5===this.state||this.ko()}},{key:"ko",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Mo()}},{key:"stop",value:function(){var e=kt(vt().mark((function e(){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.No(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Oo",value:function(){this.state=0,this.xo.reset()}},{key:"Fo",value:function(){var e=this;this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.Po,6e4,(function(){return e.$o()})))}},{key:"Bo",value:function(e){this.Lo(),this.stream.send(e)}},{key:"$o",value:function(){var e=kt(vt().mark((function e(){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.ko()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Lo",value:function(){this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"Uo",value:function(){this.Co&&(this.Co.cancel(),this.Co=null)}},{key:"close",value:function(){var e=kt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Lo(),this.Uo(),this.xo.cancel(),this.So++,4!==t?this.xo.reset():n&&n.code===Dp.RESOURCE_EXHAUSTED?(Ep(n.toString()),Ep("Using maximum backoff delay to prevent overloading the backend."),this.xo.Eo()):n&&n.code===Dp.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.qo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Zr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"qo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Ko(this.So),n=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=c(t,2),i=r[0],a=r[1];e.So===n&&e.Go(i,a)}),(function(n){t((function(){var t=new Pp(Dp.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Qo(t)}))}))}},{key:"Go",value:function(e,t){var n=this,r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr((function(){r((function(){return n.state=2,n.Co=n.Hs.enqueueAfterDelay(n.vo,1e4,(function(){return n.ko()&&(n.state=3),Promise.resolve()})),n.listener.Yr()}))})),this.stream.Zr((function(e){r((function(){return n.Qo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Mo",value:function(){var e=this;this.state=5,this.xo.Ao(kt(vt().mark((function t(){return vt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Qo",value:function(e){return Sp("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Ko",value:function(e){var t=this;return function(n){t.Hs.enqueueAndForget((function(){return t.So===e?n():(Sp("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),zw=function(e){Pe(n,e);var t=Ue(n);function n(e,r,i,a,o,u){var s;return Te(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).It=o,s}return Ne(n,[{key:"jo",value:function(e,t){return this.Vo._o("Listen",e,t)}},{key:"onMessage",value:function(e){this.xo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Np()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.gt?(Ap(void 0===t||"string"==typeof t),Fv.fromBase64String(t||"")):(Ap(void 0===t||t instanceof Uint8Array),Fv.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?Dp.UNKNOWN:By(e.code);return new Pp(t,e.message||"")}(o);n=new og(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=wg(e,s.document.name),l=yg(s.document.updateTime),f=new ym({mapValue:{fields:s.document.fields}}),h=km.newFoundDocument(c,l,f),d=s.targetIds||[],p=s.removedTargetIds||[];n=new ig(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var m=wg(e,v.document),y=v.readTime?yg(v.readTime):Yp.min(),g=km.newNoDocument(m,y),k=v.removedTargetIds||[];n=new ig([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var b=t.documentRemove;b.document;var w=wg(e,b.document),x=b.removedTargetIds||[];n=new ig([],x,w,null)}else{if(!("filter"in t))return Np();t.filter;var _=t.filter;_.targetId;var I=_.count||0,S=new jy(I),E=_.targetId;n=new ag(E,S)}return n}(this.It,e),n=function(e){if(!("targetChange"in e))return Yp.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Yp.min():t.readTime?yg(t.readTime):Yp.min()}(e);return this.listener.Wo(t,n)}},{key:"zo",value:function(e){var t={};t.database=Ig(this.It),t.addTarget=function(e,t){var n,r=t.target;return(n=Im(r)?{documents:Rg(e,r)}:{query:Dg(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=vg(e,t.resumeToken):t.snapshotVersion.compareTo(Yp.min())>0&&(n.readTime=pg(e,t.snapshotVersion.toTimestamp())),n}(this.It,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Np()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.It,e);n&&(t.labels=n),this.Bo(t)}},{key:"Ho",value:function(e){var t={};t.database=Ig(this.It),t.removeTarget=e,this.Bo(t)}}]),n}(Bw),qw=function(e){Pe(n,e);var t=Ue(n);function n(e,r,i,a,o,u){var s;return Te(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).It=o,s.Jo=!1,s}return Ne(n,[{key:"Yo",get:function(){return this.Jo}},{key:"start",value:function(){this.Jo=!1,this.lastStreamToken=void 0,Hn(Oe(n.prototype),"start",this).call(this)}},{key:"qo",value:function(){this.Jo&&this.Xo([])}},{key:"jo",value:function(e,t){return this.Vo._o("Write",e,t)}},{key:"onMessage",value:function(e){if(Ap(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();var t=function(e,t){return e&&e.length>0?(Ap(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?yg(e.updateTime):yg(t);return n.isEqual(Yp.min())&&(n=yg(t)),new wy(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=yg(e.commitTime);return this.listener.Zo(n,t)}return Ap(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}},{key:"eu",value:function(){var e={};e.database=Ig(this.It),this.Bo(e)}},{key:"Xo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Ng(t.It,e)}))};this.Bo(n)}}]),n}(Bw),Gw=function(e){Pe(n,e);var t=Ue(n);function n(e,r,i,a){var o;return Te(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.Vo=i,o.It=a,o.nu=!1,o}return Ne(n,[{key:"su",value:function(){if(this.nu)throw new Pp(Dp.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"co",value:function(e,t,n){var r=this;return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=c(i,2),o=a[0],u=a[1];return r.Vo.co(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Dp.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Pp(Dp.UNKNOWN,e.toString())}))}},{key:"fo",value:function(e,t,n,r){var i=this;return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=c(a,2),u=o[0],s=o[1];return i.Vo.fo(e,t,n,u,s,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Dp.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new Pp(Dp.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.nu=!0}}]),n}(function(){return Ne((function e(){Te(this,e)}))}()),Kw=function(){function e(t,n){Te(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}return Ne(e,[{key:"uu",value:function(){var e=this;0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.ru=null,e.au("Backend didn't respond within 10 seconds."),e.cu("Offline"),Promise.resolve()})))}},{key:"hu",value:function(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.cu("Offline")))}},{key:"set",value:function(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}},{key:"cu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"au",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.ou?(Ep(t),this.ou=!1):Sp("OnlineStateTracker",t)}},{key:"lu",value:function(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}]),e}(),Hw=Ne((function e(t,n,r,i,a){var o=this;Te(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=a,this.mu.qr((function(e){r.enqueueAndForget(kt(vt().mark((function e(){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=rx(o),!e.t0){e.next=5;break}return Sp("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=kt(vt().mark((function e(t){var n;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Rp(t))._u.add(4),e.next=4,Yw(n);case 4:return n.gu.set("Unknown"),n._u.delete(4),e.next=8,Ww(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.gu=new Kw(r,i)}));function Ww(e){return Qw.apply(this,arguments)}function Qw(){return Qw=kt(vt().mark((function e(t){var n,r,i;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!rx(t)){e.next=18;break}n=Ae(t.wu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),Qw.apply(this,arguments)}function Yw(e){return $w.apply(this,arguments)}function $w(){return $w=kt(vt().mark((function e(t){var n,r,i;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Ae(t.wu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),$w.apply(this,arguments)}function Xw(e,t){var n=Rp(e);n.du.has(t.targetId)||(n.du.set(t.targetId,t),nx(n)?tx(n):Dx(n).ko()&&Zw(n,t))}function Jw(e,t){var n=Rp(e),r=Dx(n);n.du.delete(t),r.ko()&&ex(n,t),0===n.du.size&&(r.ko()?r.Fo():rx(n)&&n.gu.set("Unknown"))}function Zw(e,t){e.yu.Ot(t.targetId),Dx(e).zo(t)}function ex(e,t){e.yu.Ot(t),Dx(e).Ho(t)}function tx(e){e.yu=new sg({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},se:function(t){return e.du.get(t)||null}}),Dx(e).start(),e.gu.uu()}function nx(e){return rx(e)&&!Dx(e).No()&&e.du.size>0}function rx(e){return 0===Rp(e)._u.size}function ix(e){e.yu=void 0}function ax(e){return ox.apply(this,arguments)}function ox(){return ox=kt(vt().mark((function e(t){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.du.forEach((function(e,n){Zw(t,e)}));case 1:case"end":return e.stop()}}),e)}))),ox.apply(this,arguments)}function ux(e,t){return sx.apply(this,arguments)}function sx(){return sx=kt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ix(t),nx(t)?(t.gu.hu(n),tx(t)):t.gu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),sx.apply(this,arguments)}function cx(e,t,n){return lx.apply(this,arguments)}function lx(){return lx=kt(vt().mark((function e(t,n,r){var i;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.gu.set("Online"),!(n instanceof og&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=kt(vt().mark((function e(t,n){var r,i,a,o;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=Ae(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.du.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.du.delete(o),t.yu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Sp("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,fx(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof ig?t.yu.Gt(n):n instanceof ag?t.yu.Yt(n):t.yu.Wt(n),r.isEqual(Yp.min())){e.next=29;break}return e.prev=14,e.next=17,uw(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.yu.te(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.du.get(r);i&&e.du.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.du.get(t);if(n){e.du.set(t,n.withResumeToken(Fv.EMPTY_BYTE_STRING,n.snapshotVersion)),ex(e,t);var r=new wk(n.target,t,1,n.sequenceNumber);Zw(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Sp("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,fx(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),lx.apply(this,arguments)}function fx(e,t,n){return hx.apply(this,arguments)}function hx(){return hx=kt(vt().mark((function e(t,n,r){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(kv(n)){e.next=2;break}throw n;case 2:return t._u.add(1),e.next=5,Yw(t);case 5:t.gu.set("Offline"),r||(r=function(){return uw(t.localStore)}),t.asyncQueue.enqueueRetryable(kt(vt().mark((function e(){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Sp("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t._u.delete(1),e.next=6,Ww(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),hx.apply(this,arguments)}function dx(e,t){return t().catch((function(n){return fx(e,n,t)}))}function px(e){return vx.apply(this,arguments)}function vx(){return vx=kt(vt().mark((function e(t){var n,r,i,a;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Rp(t),r=Px(n),i=n.fu.length>0?n.fu[n.fu.length-1].batchId:-1;case 2:if(!mx(n)){e.next=19;break}return e.prev=3,e.next=6,lw(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.fu.length&&r.Fo(),e.abrupt("break",19);case 10:i=a.batchId,yx(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,fx(n,e.t0);case 17:e.next=2;break;case 19:gx(n)&&kx(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),vx.apply(this,arguments)}function mx(e){return rx(e)&&e.fu.length<10}function yx(e,t){e.fu.push(t);var n=Px(e);n.ko()&&n.Yo&&n.Xo(t.mutations)}function gx(e){return rx(e)&&!Px(e).No()&&e.fu.length>0}function kx(e){Px(e).start()}function bx(e){return wx.apply(this,arguments)}function wx(){return wx=kt(vt().mark((function e(t){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Px(t).eu();case 1:case"end":return e.stop()}}),e)}))),wx.apply(this,arguments)}function xx(e){return _x.apply(this,arguments)}function _x(){return _x=kt(vt().mark((function e(t){var n,r,i,a;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Px(t),r=Ae(t.fu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Xo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),_x.apply(this,arguments)}function Ix(e,t,n){return Sx.apply(this,arguments)}function Sx(){return Sx=kt(vt().mark((function e(t,n,r){var i,a;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.fu.shift(),a=kk.from(i,n,r),e.next=3,dx(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,px(t);case 5:case"end":return e.stop()}}),e)}))),Sx.apply(this,arguments)}function Ex(e,t){return Tx.apply(this,arguments)}function Tx(){return Tx=kt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&Px(t).Yo,!e.t0){e.next=4;break}return e.next=4,function(){var e=kt(vt().mark((function e(t,n){var r,i;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Vy(i=n.code)||i===Dp.ABORTED){e.next=7;break}return r=t.fu.shift(),Px(t).Oo(),e.next=5,dx(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,px(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:gx(t)&&kx(t);case 5:case"end":return e.stop()}}),e)}))),Tx.apply(this,arguments)}function Cx(e,t){return Nx.apply(this,arguments)}function Nx(){return Nx=kt(vt().mark((function e(t,n){var r,i;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Rp(t)).asyncQueue.verifyOperationInProgress(),Sp("RemoteStore","RemoteStore received new credentials"),i=rx(r),r._u.add(3),e.next=6,Yw(r);case 6:return i&&r.gu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r._u.delete(3),e.next=12,Ww(r);case 12:case"end":return e.stop()}}),e)}))),Nx.apply(this,arguments)}function Ax(e,t){return Rx.apply(this,arguments)}function Rx(){return Rx=kt(vt().mark((function e(t,n){var r;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Rp(t),!n){e.next=7;break}return r._u.delete(2),e.next=5,Ww(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r._u.add(2),e.next=12,Yw(r);case 12:r.gu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),Rx.apply(this,arguments)}function Dx(e){return e.pu||(e.pu=function(e,t,n){var r=Rp(e);return r.su(),new zw(t,r.Vo,r.authCredentials,r.appCheckCredentials,r.It,n)}(e.datastore,e.asyncQueue,{Yr:ax.bind(null,e),Zr:ux.bind(null,e),Wo:cx.bind(null,e)}),e.wu.push(function(){var t=kt(vt().mark((function t(n){return vt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.pu.Oo(),nx(e)?tx(e):e.gu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.pu.stop();case 6:ix(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.pu}function Px(e){return e.Iu||(e.Iu=function(e,t,n){var r=Rp(e);return r.su(),new qw(t,r.Vo,r.authCredentials,r.appCheckCredentials,r.It,n)}(e.datastore,e.asyncQueue,{Yr:bx.bind(null,e),Zr:Ex.bind(null,e),tu:xx.bind(null,e),Zo:Ix.bind(null,e)}),e.wu.push(function(){var t=kt(vt().mark((function t(n){return vt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Iu.Oo(),t.next=4,px(e);case 4:t.next=9;break;case 6:return t.next=8,e.Iu.stop();case 8:e.fu.length>0&&(Sp("RemoteStore","Stopping write stream with ".concat(e.fu.length," pending writes")),e.fu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Iu}var Ox=function(){function e(t,n,r,i,a){Te(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Op,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return Ne(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Pp(Dp.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function Lx(e,t){if(Ep("AsyncQueue","".concat(t,": ").concat(e)),kv(e))return new Pp(Dp.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var Mx=function(){function e(t){Te(this,e),this.comparator=t?function(e,n){return t(e,n)||ev.comparator(e.key,n.key)}:function(e,t){return ev.comparator(e.key,t.key)},this.keyedMap=Hy(),this.sortedSet=new Av(this.comparator)}return Ne(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),Fx=function(){function e(){Te(this,e),this.Tu=new Av(ev.comparator)}return Ne(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Tu.get(t);n?0!==e.type&&3===n.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==n.type?this.Tu=this.Tu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Tu=this.Tu.remove(t):1===e.type&&2===n.type?this.Tu=this.Tu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):Np():this.Tu=this.Tu.insert(t,e)}},{key:"Eu",value:function(){var e=[];return this.Tu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),Ux=function(){function e(t,n,r,i,a,o,u,s){Te(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s}return Ne(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Jm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,Mx.emptySet(n),a,r,i,!0,!1)}}]),e}(),jx=Ne((function e(){Te(this,e),this.Au=void 0,this.listeners=[]})),Vx=Ne((function e(){Te(this,e),this.queries=new zy((function(e){return Zm(e)}),Jm),this.onlineState="Unknown",this.Ru=new Set}));function Bx(e,t){return zx.apply(this,arguments)}function zx(){return zx=kt(vt().mark((function e(t,n){var r,i,a,o,u;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Rp(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new jx),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Au=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=Lx(e.t0,"Initialization of query '".concat(ey(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.bu(r.onlineState),o.Au&&n.Pu(o.Au)&&Wx(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),zx.apply(this,arguments)}function qx(e,t){return Gx.apply(this,arguments)}function Gx(){return Gx=kt(vt().mark((function e(t,n){var r,i,a,o,u;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Rp(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),Gx.apply(this,arguments)}function Kx(e,t){var n,r=Rp(e),i=!1,a=Ae(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=Ae(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Pu(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Au=o}}}catch(f){a.e(f)}finally{a.f()}i&&Wx(r)}function Hx(e,t,n){var r=Rp(e),i=r.queries.get(t);if(i){var a,o=Ae(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function Wx(e){e.Ru.forEach((function(e){e.next()}))}var Qx=function(){function e(t,n,r){Te(this,e),this.query=t,this.vu=n,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}return Ne(e,[{key:"Pu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=Ae(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new Ux(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),a=!0):this.Cu(e,this.onlineState)&&(this.xu(e),a=!0),this.Su=e,a}},{key:"onError",value:function(e){this.vu.error(e)}},{key:"bu",value:function(e){this.onlineState=e;var t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}},{key:"Cu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Nu||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"Du",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"xu",value:function(e){e=Ux.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Vu=!0,this.vu.next(e)}}]),e}(),Yx=function(){function e(t,n){Te(this,e),this.payload=t,this.byteLength=n}return Ne(e,[{key:"ku",value:function(){return"metadata"in this.payload}}]),e}(),$x=function(){function e(t){Te(this,e),this.It=t}return Ne(e,[{key:"Ji",value:function(e){return wg(this.It,e)}},{key:"Yi",value:function(e){return e.metadata.exists?Tg(this.It,e.document,!1):km.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}},{key:"Xi",value:function(e){return yg(e)}}]),e}(),Xx=function(){function e(t,n,r){Te(this,e),this.Mu=t,this.localStore=n,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Jx(t)}return Ne(e,[{key:"Ou",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;var n=Xp.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"Fu",value:function(e){var t,n=new Map,r=new $x(this.It),i=Ae(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Ji(a.metadata.name),s=Ae(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||Zy()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=kt(vt().mark((function e(){var t,n,r,i,a;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gw(this.localStore,new $x(this.It),this.documents,this.Mu.id);case 2:t=e.sent,n=this.Fu(this.documents),r=Ae(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,bw(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,$u:this.collectionGroups,Bu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function Jx(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var Zx=Ne((function e(t){Te(this,e),this.key=t})),e_=Ne((function e(t){Te(this,e),this.key=t})),t_=function(){function e(t,n){Te(this,e),this.query=t,this.Lu=n,this.Uu=null,this.current=!1,this.qu=Zy(),this.mutatedKeys=Zy(),this.Ku=ry(t),this.Gu=new Mx(this.Ku)}return Ne(e,[{key:"Qu",get:function(){return this.Lu}},{key:"ju",value:function(e,t){var n=this,r=t?t.Wu:new Fx,i=t?t.Gu:this.Gu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=ty(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.zu(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Ku(f,s)>0||c&&n.Ku(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Gu:o,Wu:r,$i:u,mutatedKeys:a}}},{key:"zu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;var a=e.Wu.Eu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Np()}};return n(e)-n(t)}(e.type,t.type)||r.Ku(e.doc,t.doc)})),this.Hu(n);var o=t?this.Ju():[],u=0===this.qu.size&&this.current?1:0,s=u!==this.Uu;return this.Uu=u,0!==a.length||s?{snapshot:new Ux(this.query,e.Gu,i,a,e.mutatedKeys,0===u,s,!1),Yu:o}:{Yu:o}}},{key:"bu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,Wu:new Fx,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Yu:[]}}},{key:"Xu",value:function(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}},{key:"Hu",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Lu=t.Lu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Lu=t.Lu.delete(e)})),this.current=e.current)}},{key:"Ju",value:function(){var e=this;if(!this.current)return[];var t=this.qu;this.qu=Zy(),this.Gu.forEach((function(t){e.Xu(t.key)&&(e.qu=e.qu.add(t.key))}));var n=[];return t.forEach((function(t){e.qu.has(t)||n.push(new e_(t))})),this.qu.forEach((function(e){t.has(e)||n.push(new Zx(e))})),n}},{key:"Zu",value:function(e){this.Lu=e.Hi,this.qu=Zy();var t=this.ju(e.documents);return this.applyChanges(t,!0)}},{key:"tc",value:function(){return Ux.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.Uu)}}]),e}(),n_=Ne((function e(t,n,r){Te(this,e),this.query=t,this.targetId=n,this.view=r})),r_=Ne((function e(t){Te(this,e),this.key=t,this.ec=!1})),i_=function(){function e(t,n,r,i,a,o){Te(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.nc={},this.sc=new zy((function(e){return Zm(e)}),Jm),this.ic=new Map,this.rc=new Set,this.oc=new Av(ev.comparator),this.uc=new Map,this.cc=new Ub,this.ac={},this.hc=new Map,this.lc=pb.vn(),this.onlineState="Unknown",this.fc=void 0}return Ne(e,[{key:"isPrimaryClient",get:function(){return!0===this.fc}}]),e}();function a_(e,t){return o_.apply(this,arguments)}function o_(){return o_=kt(vt().mark((function e(t,n){var r,i,a,o,u,s;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=J_(t),!(o=r.sc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.tc(),e.next=15;break;case 6:return e.next=8,fw(r.localStore,$m(n));case 8:return u=e.sent,r.isPrimaryClient&&Xw(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,u_(r,n,i,"current"===s);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),o_.apply(this,arguments)}function u_(e,t,n,r){return s_.apply(this,arguments)}function s_(){return s_=kt(vt().mark((function e(t,n,r,i){var a,o,u,s,c,l;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.dc=function(e,n,r){return function(){var e=kt(vt().mark((function e(t,n,r,i){var a,o,u;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.ju(r),e.t0=a.$i,!e.t0){e.next=6;break}return e.next=5,pw(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.ju(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(C_(t,n.targetId,u.Yu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,pw(t.localStore,n,!0);case 3:return a=e.sent,o=new t_(n,a.Hi),u=o.ju(a.documents),s=rg.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(u,t.isPrimaryClient,s),C_(t,r,c.Yu),l=new n_(n,r,o),e.abrupt("return",(t.sc.set(n,l),t.ic.has(r)?t.ic.get(r).push(n):t.ic.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),s_.apply(this,arguments)}function c_(e,t){return l_.apply(this,arguments)}function l_(){return l_=kt(vt().mark((function e(t,n){var r,i,a;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Rp(t),i=r.sc.get(n),!((a=r.ic.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ic.set(i.targetId,a.filter((function(e){return!Jm(e,n)}))),void r.sc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,hw(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),Jw(r.remoteStore,i.targetId),E_(r,i.targetId)})).catch(hv);case 9:e.next=14;break;case 11:return E_(r,i.targetId),e.next=14,hw(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),l_.apply(this,arguments)}function f_(e,t,n){return h_.apply(this,arguments)}function h_(){return h_=kt(vt().mark((function e(t,n,r){var i,a,o;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Z_(t),e.prev=1,e.next=4,function(e,t){var n,r,i=Rp(e),a=Qp.now(),o=t.reduce((function(e,t){return e.add(t.key)}),Zy());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=Gy(),s=Zy();return i.Gi.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=Ae(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=Cy(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new Ry(c.key,l,gm(l.value.mapValue),xy.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:Wy(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.ac[e.currentUser.toKey()];r||(r=new Av(Kp)),r=r.insert(t,n),e.ac[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,R_(i,a.changes);case 9:return e.next=11,px(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=Lx(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),h_.apply(this,arguments)}function d_(e,t){return p_.apply(this,arguments)}function p_(){return p_=kt(vt().mark((function e(t,n){var r,i;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Rp(t),e.prev=1,e.next=4,sw(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.uc.get(t);n&&(Ap(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.ec=!0:e.modifiedDocuments.size>0?Ap(n.ec):e.removedDocuments.size>0&&(Ap(n.ec),n.ec=!1))})),e.next=8,R_(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,hv(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),p_.apply(this,arguments)}function v_(e,t,n){var r=Rp(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.sc.forEach((function(e,n){var r=n.view.bu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Rp(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=Ae(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.bu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&Wx(n)}(r.eventManager,t),i.length&&r.nc.Wo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function m_(e,t,n){return y_.apply(this,arguments)}function y_(){return y_=kt(vt().mark((function e(t,n,r){var i,a,o,u,s,c;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Rp(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.uc.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new Av(ev.comparator)).insert(o,km.newNoDocument(o,Yp.min())),s=Zy().add(o),c=new ng(Yp.min(),new Map,new Pv(Kp),u,s),e.next=9,d_(i,c);case 9:i.oc=i.oc.remove(o),i.uc.delete(n),A_(i),e.next=16;break;case 14:return e.next=16,hw(i.localStore,n,!1).then((function(){return E_(i,n,r)})).catch(hv);case 16:case"end":return e.stop()}}),e)}))),y_.apply(this,arguments)}function g_(e,t){return k_.apply(this,arguments)}function k_(){return k_=kt(vt().mark((function e(t,n){var r,i,a;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Rp(t),i=n.batch.batchId,e.prev=1,e.next=4,ow(r.localStore,n);case 4:return a=e.sent,S_(r,i,null),I_(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,R_(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,hv(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),k_.apply(this,arguments)}function b_(e,t,n){return w_.apply(this,arguments)}function w_(){return w_=kt(vt().mark((function e(t,n,r){var i,a;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Rp(t),e.prev=1,e.next=4,function(e,t){var n=Rp(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return Ap(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,S_(i,n,r),I_(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,R_(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,hv(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),w_.apply(this,arguments)}function x_(e,t){return __.apply(this,arguments)}function __(){return __=kt(vt().mark((function e(t,n){var r,i,a,o;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return rx((r=Rp(t)).remoteStore)||Sp("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=Rp(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.hc.get(i)||[]).push(n),r.hc.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=Lx(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),__.apply(this,arguments)}function I_(e,t){(e.hc.get(t)||[]).forEach((function(e){e.resolve()})),e.hc.delete(t)}function S_(e,t,n){var r=Rp(e),i=r.ac[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.ac[r.currentUser.toKey()]=i}}function E_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=Ae(e.ic.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.sc.delete(a),n&&e.nc._c(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ic.delete(t),e.isPrimaryClient&&e.cc.ls(t).forEach((function(t){e.cc.containsKey(t)||T_(e,t)}))}function T_(e,t){e.rc.delete(t.path.canonicalString());var n=e.oc.get(t);null!==n&&(Jw(e.remoteStore,n),e.oc=e.oc.remove(t),e.uc.delete(n),A_(e))}function C_(e,t,n){var r,i=Ae(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof Zx?(e.cc.addReference(a.key,t),N_(e,a)):a instanceof e_?(Sp("SyncEngine","Document no longer in limbo: "+a.key),e.cc.removeReference(a.key,t),e.cc.containsKey(a.key)||T_(e,a.key)):Np()}}catch(o){i.e(o)}finally{i.f()}}function N_(e,t){var n=t.key,r=n.path.canonicalString();e.oc.get(n)||e.rc.has(r)||(Sp("SyncEngine","New document in limbo: "+n),e.rc.add(r),A_(e))}function A_(e){for(;e.rc.size>0&&e.oc.size<e.maxConcurrentLimboResolutions;){var t=e.rc.values().next().value;e.rc.delete(t);var n=new ev(Xp.fromString(t)),r=e.lc.next();e.uc.set(r,new r_(n)),e.oc=e.oc.insert(n,r),Xw(e.remoteStore,new wk($m(Gm(n.path)),r,2,Ev.at))}}function R_(e,t,n){return D_.apply(this,arguments)}function D_(){return D_=kt(vt().mark((function e(t,n,r){var i,a,o,u;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Rp(t),a=[],o=[],u=[],e.t0=i.sc.isEmpty(),e.t0){e.next=9;break}return i.sc.forEach((function(e,t){u.push(i.dc(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=ew.Ci(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.nc.Wo(a),e.next=9,function(){var e=kt(vt().mark((function e(t,n){var r,i,a,o,u,s,c,l;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Rp(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return pv.forEach(n,(function(t){return pv.forEach(t.Si,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return pv.forEach(t.Di,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),kv(e.t0)){e.next=10;break}throw e.t0;case 10:Sp("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=Ae(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.Ui.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.Ui=r.Ui.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),D_.apply(this,arguments)}function P_(e,t){return O_.apply(this,arguments)}function O_(){return O_=kt(vt().mark((function e(t,n){var r,i;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Rp(t)).currentUser.isEqual(n)){e.next=11;break}return Sp("SyncEngine","User change. New user:",n.toKey()),e.next=5,iw(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.hc.forEach((function(e){e.forEach((function(e){e.reject(new Pp(Dp.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.hc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,R_(r,i.ji);case 11:case"end":return e.stop()}}),e)}))),O_.apply(this,arguments)}function L_(e,t){var n=Rp(e),r=n.uc.get(t);if(r&&r.ec)return Zy().add(r.key);var i=Zy(),a=n.ic.get(t);if(!a)return i;var o,u=Ae(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.sc.get(s);i=i.unionWith(c.view.Qu)}}catch(l){u.e(l)}finally{u.f()}return i}function M_(e,t){return F_.apply(this,arguments)}function F_(){return F_=kt(vt().mark((function e(t,n){var r,i,a;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Rp(t),e.next=3,pw(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.Zu(i),e.abrupt("return",(r.isPrimaryClient&&C_(r,n.targetId,a.Yu),a));case 6:case"end":return e.stop()}}),e)}))),F_.apply(this,arguments)}function U_(e,t){return j_.apply(this,arguments)}function j_(){return j_=kt(vt().mark((function e(t,n){var r;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Rp(t),e.abrupt("return",mw(r.localStore,n).then((function(e){return R_(r,e)})));case 2:case"end":return e.stop()}}),e)}))),j_.apply(this,arguments)}function V_(e,t,n,r){return B_.apply(this,arguments)}function B_(){return B_=kt(vt().mark((function e(t,n,r,i){var a,o;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Rp(t),e.next=3,function(e,t){var n=Rp(e),r=Rp(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Tn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):pv.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,px(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(S_(a,n,i||null),I_(a,n),function(e,t){Rp(Rp(e).mutationQueue).An(t)}(a.localStore,n)):Np();case 11:return e.next=13,R_(a,o);case 13:e.next=16;break;case 15:Sp("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),B_.apply(this,arguments)}function z_(e,t){return q_.apply(this,arguments)}function q_(){return q_=kt(vt().mark((function e(t,n){var r,i,a,o,u,s,c,l;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(J_(r=Rp(t)),Z_(r),!0!==n||!0===r.fc){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,G_(r,i.toArray());case 5:return a=e.sent,r.fc=!0,e.next=9,Ax(r.remoteStore,!0);case 9:o=Ae(a);try{for(o.s();!(u=o.n()).done;)s=u.value,Xw(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.fc){e.next=25;break}return c=[],l=Promise.resolve(),r.ic.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return E_(r,t),hw(r.localStore,t,!0)})),Jw(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,G_(r,c);case 21:return function(e){var t=Rp(e);t.uc.forEach((function(e,n){Jw(t.remoteStore,n)})),t.cc.fs(),t.uc=new Map,t.oc=new Av(ev.comparator)}(r),r.fc=!1,e.next=25,Ax(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),q_.apply(this,arguments)}function G_(e,t,n){return K_.apply(this,arguments)}function K_(){return K_=kt(vt().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,m,y;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Rp(t),a=[],o=[],u=Ae(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.ic.get(c))||0===f.length){e.next=34;break}return e.next=11,fw(i.localStore,$m(f[0]));case 11:l=e.sent,h=Ae(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.sc.get(p),e.next=20,M_(i,v);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,vw(i.localStore,c);case 36:return y=e.sent,e.next=39,fw(i.localStore,y);case 39:return l=e.sent,e.next=42,u_(i,H_(y),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.nc.Wo(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),K_.apply(this,arguments)}function H_(e){return qm(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function W_(e){var t=Rp(e);return Rp(Rp(t.localStore).persistence).vi()}function Q_(e,t,n,r){return Y_.apply(this,arguments)}function Y_(){return Y_=kt(vt().mark((function e(t,n,r,i){var a,o,u,s;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Rp(t)).fc){e.next=3;break}return e.abrupt("return",void Sp("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.ic.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,mw(a.localStore,ny(o[0]));case 10:return u=e.sent,s=ng.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=14,R_(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,hw(a.localStore,n,!0);case 17:return E_(a,n,i),e.abrupt("break",20);case 19:Np();case 20:case"end":return e.stop()}}),e)}))),Y_.apply(this,arguments)}function $_(e,t,n){return X_.apply(this,arguments)}function X_(){return X_=kt(vt().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=J_(t)).fc){e.next=45;break}a=Ae(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.ic.has(u)){e.next=10;break}return Sp("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,vw(i.localStore,u);case 12:return s=e.sent,e.next=15,fw(i.localStore,s);case 15:return c=e.sent,e.next=18,u_(i,H_(s),c.targetId,!1);case 18:Xw(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=Ae(r),e.prev=30,h=vt().mark((function e(){var t;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.ic.has(t),!e.t0){e.next=5;break}return e.next=5,hw(i.localStore,t,!1).then((function(){Jw(i.remoteStore,t),E_(i,t)})).catch(hv);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),X_.apply(this,arguments)}function J_(e){var t=Rp(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=d_.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=L_.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=m_.bind(null,t),t.nc.Wo=Kx.bind(null,t.eventManager),t.nc._c=Hx.bind(null,t.eventManager),t}function Z_(e){var t=Rp(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=g_.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=b_.bind(null,t),t}function eI(e,t,n){var r=Rp(e);(function(){var e=kt(vt().mark((function e(t,n,r){var i,a,o,u,s;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=Rp(e),r=yg(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ns.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(Jx(i)),a=new Xx(i,t.localStore,n.It),e.next=15,n.wc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Ou(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.wc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,R_(t,s.Bu,void 0);case 31:return e.next=33,function(e,t){var n=Rp(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ns.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.$u));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(Tp("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var tI=function(){function e(){Te(this,e),this.synchronizeTabs=!1}return Ne(e,[{key:"initialize",value:function(){var e=kt(vt().mark((function e(t){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.It=jw(t.databaseInfo.databaseId),this.sharedClientState=this.mc(t),this.persistence=this.gc(t),e.next=5,this.persistence.start();case 5:this.localStore=this.yc(t),this.gcScheduler=this.Ic(t,this.localStore),this.indexBackfillerScheduler=this.Tc(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ic",value:function(e,t){return null}},{key:"Tc",value:function(e,t){return null}},{key:"yc",value:function(e){return rw(this.persistence,new tw,e.initialUser,this.It)}},{key:"gc",value:function(e){return new Gb(Hb.Bs,this.It)}},{key:"mc",value:function(e){return new Rw}},{key:"terminate",value:function(){var e=kt(vt().mark((function e(){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),nI=function(e){Pe(n,e);var t=Ue(n);function n(e,r,i){var a;return Te(this,n),(a=t.call(this)).Ec=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return Ne(n,[{key:"initialize",value:function(){var e=kt(vt().mark((function e(t){var r=this;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hn(Oe(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Ec.initialize(this,t);case 4:return e.next=6,Z_(this.Ec.syncEngine);case 6:return e.next=8,px(this.Ec.remoteStore);case 8:return e.next=10,this.persistence.li((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"yc",value:function(e){return rw(this.persistence,new tw,e.initialUser,this.It)}},{key:"Ic",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new wb(n,e.asyncQueue,t)}},{key:"Tc",value:function(e,t){var n=new Sv(t,this.persistence);return new Iv(e.asyncQueue,n)}},{key:"gc",value:function(e){var t=Zb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?ob.withCacheSize(this.cacheSizeBytes):ob.DEFAULT;return new $b(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Fw(),Uw(),this.It,this.sharedClientState,!!this.forceOwnership)}},{key:"mc",value:function(e){return new Rw}}]),n}(tI),rI=function(e){Pe(n,e);var t=Ue(n);function n(e,r){var i;return Te(this,n),(i=t.call(this,e,r,!1)).Ec=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return Ne(n,[{key:"initialize",value:function(){var e=kt(vt().mark((function e(t){var r,i=this;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hn(Oe(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Ec.syncEngine,e.t0=this.sharedClientState instanceof Aw,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Fr:V_.bind(null,r),$r:Q_.bind(null,r),Br:$_.bind(null,r),vi:W_.bind(null,r),Or:U_.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.li(function(){var e=kt(vt().mark((function e(t){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z_(i.Ec.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"mc",value:function(e){var t=Fw();if(!Aw.C(t))throw new Pp(Dp.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Zb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Aw(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(nI),iI=function(){function e(){Te(this,e)}return Ne(e,[{key:"initialize",value:function(){var e=kt(vt().mark((function e(t,n){var r=this;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return v_(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=P_.bind(null,this.syncEngine),e.next=12,Ax(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new Vx}},{key:"createDatastore",value:function(e){var t,n=jw(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new Mw(t));return function(e,t,n,r){return new Gw(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return v_(o.syncEngine,e,0)},a=Pw.C()?new Pw:new Dw,new Hw(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new i_(e,t,n,r,i,a);return o&&(u.fc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=kt(vt().mark((function e(t){var n;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Rp(t),Sp("RemoteStore","RemoteStore shutting down."),n._u.add(5),e.next=5,Yw(n);case 5:n.mu.shutdown(),n.gu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function aI(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return kt(vt().mark((function r(){var i;return vt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return kt(vt().mark((function e(){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var oI=function(){function e(t){Te(this,e),this.observer=t,this.muted=!1}return Ne(e,[{key:"next",value:function(e){this.observer.next&&this.Ac(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Ac(this.observer.error,e):Ep("Uncaught Error in snapshot listener:",e)}},{key:"Rc",value:function(){this.muted=!0}},{key:"Ac",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),uI=function(){function e(t,n){var r=this;Te(this,e),this.bc=t,this.It=n,this.metadata=new Op,this.buffer=new Uint8Array,this.Pc=new TextDecoder("utf-8"),this.vc().then((function(e){e&&e.ku()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return Ne(e,[{key:"close",value:function(){return this.bc.cancel()}},{key:"getMetadata",value:function(){var e=kt(vt().mark((function e(){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"wc",value:function(){var e=kt(vt().mark((function e(){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.vc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"vc",value:function(){var e=kt(vt().mark((function e(){var t,n,r,i;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Vc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Pc.decode(t),r=Number(n),isNaN(r)&&this.Sc("length string (".concat(n,") is not valid number")),e.next=9,this.Dc(r);case 9:return i=e.sent,e.abrupt("return",new Yx(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Cc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Vc",value:function(){var e=kt(vt().mark((function e(){var t,n;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Cc()<0)){e.next=7;break}return e.next=3,this.xc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Cc())<0&&this.Sc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Dc",value:function(){var e=kt(vt().mark((function e(t){var n;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.xc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Sc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Pc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Sc",value:function(e){throw this.bc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"xc",value:function(){var e=kt(vt().mark((function e(){var t,n;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.bc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),sI=function(){function e(t){Te(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return Ne(e,[{key:"lookup",value:function(){var e=kt(vt().mark((function e(t){var n,r=this;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new Pp(Dp.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=kt(vt().mark((function e(t,n){var r,i,a,o,u,s;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Rp(t),i=Ig(r.It)+"/documents",a={documents:n.map((function(e){return bg(r.It,e)}))},e.next=5,r.fo("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=Cg(r.It,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());Ap(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Fy(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=kt(vt().mark((function e(){var t,n=this;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=ev.fromPath(t);n.mutations.push(new Uy(r,n.precondition(r)))})),e.next=7,function(){var e=kt(vt().mark((function e(t,n){var r,i,a;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Rp(t),i=Ig(r.It)+"/documents",a={writes:n.map((function(e){return Ng(r.It,e)}))},e.next=3,r.co("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Np();t=Yp.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Pp(Dp.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Yp.min())?xy.exists(!1):xy.updateTime(t):xy.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Yp.min()))throw new Pp(Dp.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return xy.updateTime(t)}return xy.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),cI=function(){function e(t,n,r,i,a){Te(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Nc=r.maxAttempts,this.xo=new Vw(this.asyncQueue,"transaction_retry")}return Ne(e,[{key:"run",value:function(){this.Nc-=1,this.kc()}},{key:"kc",value:function(){var e=this;this.xo.Ao(kt(vt().mark((function t(){var n,r;return vt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new sI(e.datastore),(r=e.Mc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Oc(t)}))}))})).catch((function(t){e.Oc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Mc",value:function(e){try{var t=this.updateFunction(e);return!Wv(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Oc",value:function(e){var t=this;this.Nc>0&&this.Fc(e)?(this.Nc-=1,this.asyncQueue.enqueueAndForget((function(){return t.kc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Fc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!Vy(t)}return!1}}]),e}(),lI=function(){function e(t,n,r,i){var a=this;Te(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=wp.UNAUTHENTICATED,this.clientId=Gp.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=kt(vt().mark((function e(t){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Sp("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Sp("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return Ne(e,[{key:"getConfiguration",value:function(){var e=kt(vt().mark((function e(){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Pp(Dp.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Op;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(kt(vt().mark((function n(){var r;return vt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=Lx(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function fI(e,t){return hI.apply(this,arguments)}function hI(){return hI=kt(vt().mark((function e(t,n){var r,i;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Sp("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=kt(vt().mark((function e(t){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,iw(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),hI.apply(this,arguments)}function dI(e,t){return pI.apply(this,arguments)}function pI(){return pI=kt(vt().mark((function e(t,n){var r,i;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,vI(t);case 3:return r=e.sent,Sp("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return Cx(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Cx(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),pI.apply(this,arguments)}function vI(e){return mI.apply(this,arguments)}function mI(){return mI=kt(vt().mark((function e(t){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return Sp("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,fI(t,new tI);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),mI.apply(this,arguments)}function yI(e){return gI.apply(this,arguments)}function gI(){return gI=kt(vt().mark((function e(t){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return Sp("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,dI(t,new iI);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),gI.apply(this,arguments)}function kI(e){return vI(e).then((function(e){return e.persistence}))}function bI(e){return vI(e).then((function(e){return e.localStore}))}function wI(e){return yI(e).then((function(e){return e.remoteStore}))}function xI(e){return yI(e).then((function(e){return e.syncEngine}))}function _I(e){return II.apply(this,arguments)}function II(){return II=kt(vt().mark((function e(t){var n,r;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yI(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=a_.bind(null,n.syncEngine),r.onUnlisten=c_.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),II.apply(this,arguments)}function SI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Op;return e.asyncQueue.enqueueAndForget(kt(vt().mark((function i(){return vt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new oI({next:function(a){t.enqueueAndForget((function(){return qx(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new Pp(Dp.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new Pp(Dp.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new Qx(Gm(n.path),a,{includeMetadataChanges:!0,Nu:!0});return Bx(e,o)},i.next=3,_I(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function EI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Op;return e.asyncQueue.enqueueAndForget(kt(vt().mark((function i(){return vt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new oI({next:function(n){t.enqueueAndForget((function(){return qx(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Pp(Dp.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new Qx(n,a,{includeMetadataChanges:!0,Nu:!0});return Bx(e,o)},i.next=3,_I(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var TI=new Map;function CI(e,t,n){if(!n)throw new Pp(Dp.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function NI(e,t,n,r){if(!0===t&&!0===r)throw new Pp(Dp.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function AI(e){if(!ev.isDocumentKey(e))throw new Pp(Dp.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function RI(e){if(ev.isDocumentKey(e))throw new Pp(Dp.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function DI(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Np()}function PI(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Pp(Dp.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=DI(e);throw new Pp(Dp.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function OI(e,t){if(t<=0)throw new Pp(Dp.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var LI=function(){function e(t){var n;if(Te(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Pp(Dp.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Pp(Dp.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,NI("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return Ne(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),MI=function(){function e(t,n,r,i){Te(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new LI({}),this._settingsFrozen=!1}return Ne(e,[{key:"app",get:function(){if(!this._app)throw new Pp(Dp.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Pp(Dp.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new LI(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Mp;switch(e.type){case"gapi":var t=e.client;return new Vp(t,e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Pp(Dp.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=TI.get(e);t&&(Sp("ComponentProvider","Removing Datastore"),TI.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function FI(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=PI(e,MI))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&Tp("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=wp.MOCK_USER;else{o=We(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new Pp(Dp.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new wp(s)}e._authCredentials=new Fp(new Lp(o,u))}}var UI=function(){function e(t,n,r){Te(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return Ne(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new VI(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),jI=function(){function e(t,n,r){Te(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return Ne(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),VI=function(e){Pe(n,e);var t=Ue(n);function n(e,r,i){var a;return Te(this,n),(a=t.call(this,e,r,Gm(i)))._path=i,a.type="collection",a}return Ne(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new UI(this.firestore,null,new ev(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(jI);function BI(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=pt(e),CI("collection","path",t),e instanceof MI){var a=Xp.fromString.apply(Xp,[t].concat(r));return RI(a),new VI(e,null,a)}if(!(e instanceof UI||e instanceof VI))throw new Pp(Dp.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Xp.fromString.apply(Xp,[t].concat(r)));return RI(o),new VI(e.firestore,null,o)}function zI(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=pt(e),1===arguments.length&&(t=Gp.R()),CI("doc","path",t),e instanceof MI){var a=Xp.fromString.apply(Xp,[t].concat(r));return AI(a),new UI(e,null,new ev(a))}if(!(e instanceof UI||e instanceof VI))throw new Pp(Dp.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Xp.fromString.apply(Xp,[t].concat(r)));return AI(o),new UI(e.firestore,e instanceof VI?e.converter:null,new ev(o))}function qI(e,t){return e=pt(e),t=pt(t),(e instanceof UI||e instanceof VI)&&(t instanceof UI||t instanceof VI)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function GI(e,t){return e=pt(e),t=pt(t),e instanceof jI&&t instanceof jI&&e.firestore===t.firestore&&Jm(e._query,t._query)&&e.converter===t.converter}var KI=function(){function e(){var t=this;Te(this,e),this.$c=Promise.resolve(),this.Bc=[],this.Lc=!1,this.Uc=[],this.qc=null,this.Kc=!1,this.Gc=!1,this.Qc=[],this.xo=new Vw(this,"async_queue_retry"),this.jc=function(){var e=Uw();e&&Sp("AsyncQueue","Visibility state changed to "+e.visibilityState),t.xo.bo()};var n=Uw();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.jc)}return Ne(e,[{key:"isShuttingDown",get:function(){return this.Lc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Wc(),this.zc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Lc){this.Lc=!0,this.Gc=e||!1;var t=Uw();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.jc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Wc(),this.Lc)return new Promise((function(){}));var n=new Op;return this.zc((function(){return t.Lc&&t.Gc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Bc.push(e),t.Hc()}))}},{key:"Hc",value:function(){var e=kt(vt().mark((function e(){var t=this;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Bc.length){e.next=14;break}return e.prev=1,e.next=4,this.Bc[0]();case 4:this.Bc.shift(),this.xo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),kv(e.t0)){e.next=12;break}throw e.t0;case 12:Sp("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Bc.length>0&&this.xo.Ao((function(){return t.Hc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"zc",value:function(e){var t=this,n=this.$c.then((function(){return t.Kc=!0,e().catch((function(e){t.qc=e,t.Kc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Ep("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Kc=!1,e}))}));return this.$c=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Wc(),this.Qc.indexOf(e)>-1&&(t=0);var i=Ox.createAndSchedule(this,e,t,n,(function(e){return r.Jc(e)}));return this.Uc.push(i),i}},{key:"Wc",value:function(){this.qc&&Np()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Yc",value:function(){var e=kt(vt().mark((function e(){var t;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.$c,e.next=3,t;case 3:if(t!==this.$c){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Xc",value:function(e){var t,n=Ae(this.Uc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Zc",value:function(e){var t=this;return this.Yc().then((function(){t.Uc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=Ae(t.Uc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Yc()}))}},{key:"ta",value:function(e){this.Qc.push(e)}},{key:"Jc",value:function(e){var t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}]),e}();function HI(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=Ae(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var WI=function(){function e(){Te(this,e),this._progressObserver={},this._taskCompletionResolver=new Op,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return Ne(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),QI=function(e){Pe(n,e);var t=Ue(n);function n(e,r,i,a){var o;return Te(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new KI,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return Ne(n,[{key:"_terminate",value:function(){return this._firestoreClient||$I(this),this._firestoreClient.terminate()}}]),n}(MI);function YI(e){return e._firestoreClient||$I(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function $I(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new Kv(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new lI(e._authCredentials,e._appCheckCredentials,e._queue,r)}function XI(e,t,n){var r=new Op;return e.asyncQueue.enqueue(kt(vt().mark((function i(){var a;return vt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,fI(e,n);case 3:return i.next=5,dI(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===Dp.FAILED_PRECONDITION||e.code===Dp.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(a=i.t0)){i.next=13;break}throw a;case 13:Tp("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function JI(e){return function(e){return e.asyncQueue.enqueue(kt(vt().mark((function t(){var n,r;return vt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,kI(e);case 2:return n=t.sent,t.next=5,wI(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=Rp(e);return t._u.delete(0),Ww(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(YI(e=PI(e,QI)))}function ZI(e){return function(e){return e.asyncQueue.enqueue(kt(vt().mark((function t(){var n,r;return vt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,kI(e);case 2:return n=t.sent,t.next=5,wI(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=kt(vt().mark((function e(t){var n;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Rp(t))._u.add(0),e.next=4,Yw(n);case 4:n.gu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(YI(e=PI(e,QI)))}function eS(e,t){var n=YI(e=PI(e,QI)),r=new WI;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new uI(e,t)}(function(e,t){if(e instanceof Uint8Array)return aI(e,t);if(e instanceof ArrayBuffer)return aI(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,jw(t));e.asyncQueue.enqueueAndForget(kt(vt().mark((function t(){return vt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=eI,t.next=3,xI(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function tS(e,t){return function(e,t){return e.asyncQueue.enqueue(kt(vt().mark((function n(){return vt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=Rp(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ns.getNamedQuery(e,t)}))},n.next=3,bI(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(YI(e=PI(e,QI)),t).then((function(t){return t?new jI(e,null,t.query):null}))}function nS(e){if(e._initialized||e._terminated)throw new Pp(Dp.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var rS=function(){function e(){Te(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Pp(Dp.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zp(n)}return Ne(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var iS=function(){function e(t){Te(this,e),this._byteString=t}return Ne(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Fv.fromBase64String(t))}catch(t){throw new Pp(Dp.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Fv.fromUint8Array(t))}}]),e}(),aS=Ne((function e(t){Te(this,e),this._methodName=t})),oS=function(){function e(t,n){if(Te(this,e),!isFinite(t)||t<-90||t>90)throw new Pp(Dp.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Pp(Dp.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return Ne(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Kp(this._lat,e._lat)||Kp(this._long,e._long)}}]),e}(),uS=/^__.*__$/,sS=function(){function e(t,n,r){Te(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Ne(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Ry(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ay(e,this.data,t,this.fieldTransforms)}}]),e}(),cS=function(){function e(t,n,r){Te(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Ne(e,[{key:"toMutation",value:function(e,t){return new Ry(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function lS(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Np()}}var fS=function(){function e(t,n,r,i,a,o){Te(this,e),this.settings=t,this.databaseId=n,this.It=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ea(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return Ne(e,[{key:"path",get:function(){return this.settings.path}},{key:"na",get:function(){return this.settings.na}},{key:"sa",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ia",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.sa({path:n,ra:!1});return r.oa(e),r}},{key:"ua",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.sa({path:n,ra:!1});return r.ea(),r}},{key:"ca",value:function(e){return this.sa({path:void 0,ra:!0})}},{key:"aa",value:function(e){return RS(e,this.settings.methodName,this.settings.ha||!1,this.path,this.settings.la)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"ea",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.oa(this.path.get(e))}},{key:"oa",value:function(e){if(0===e.length)throw this.aa("Document fields must not be empty");if(lS(this.na)&&uS.test(e))throw this.aa('Document fields cannot begin and end with "__"')}}]),e}(),hS=function(){function e(t,n,r){Te(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.It=r||jw(t)}return Ne(e,[{key:"fa",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new fS({na:e,methodName:t,la:n,path:Zp.emptyPath(),ra:!1,ha:r},this.databaseId,this.It,this.ignoreUndefinedProperties)}}]),e}();function dS(e){var t=e._freezeSettings(),n=jw(e._databaseId);return new hS(e._databaseId,!!t.ignoreUndefinedProperties,n)}function pS(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.fa(a.merge||a.mergeFields?2:0,t,n,i);TS("Data must be an object, but it was:",o,r);var u,s,c=SS(r,o);if(a.merge)u=new Mv(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=Ae(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=CS(t,d,n);if(!o.contains(p))throw new Pp(Dp.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));DS(f,p)||f.push(p)}}catch(v){h.e(v)}finally{h.f()}u=new Mv(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new sS(new ym(c),u,s)}var vS=function(e){Pe(n,e);var t=Ue(n);function n(){return Te(this,n),t.apply(this,arguments)}return Ne(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.na)throw 1===e.na?e.aa("".concat(this._methodName,"() can only appear at the top level of your update data")):e.aa("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(aS);function mS(e,t,n){return new fS({na:3,la:t.settings.la,methodName:e._methodName,ra:n},t.databaseId,t.It,t.ignoreUndefinedProperties)}var yS=function(e){Pe(n,e);var t=Ue(n);function n(){return Te(this,n),t.apply(this,arguments)}return Ne(n,[{key:"_toFieldTransform",value:function(e){return new by(e.path,new hy)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(aS),gS=function(e){Pe(n,e);var t=Ue(n);function n(e,r){var i;return Te(this,n),(i=t.call(this,e)).da=r,i}return Ne(n,[{key:"_toFieldTransform",value:function(e){var t=mS(this,e,!0),n=this.da.map((function(e){return IS(e,t)})),r=new dy(n);return new by(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(aS),kS=function(e){Pe(n,e);var t=Ue(n);function n(e,r){var i;return Te(this,n),(i=t.call(this,e)).da=r,i}return Ne(n,[{key:"_toFieldTransform",value:function(e){var t=mS(this,e,!0),n=this.da.map((function(e){return IS(e,t)})),r=new vy(n);return new by(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(aS),bS=function(e){Pe(n,e);var t=Ue(n);function n(e,r){var i;return Te(this,n),(i=t.call(this,e))._a=r,i}return Ne(n,[{key:"_toFieldTransform",value:function(e){var t=new yy(e.It,uy(e.It,this._a));return new by(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(aS);function wS(e,t,n,r){var i=e.fa(1,t,n);TS("Data must be an object, but it was:",i,r);var a=[],o=ym.empty();Cv(r,(function(e,r){var u=AS(t,e,n);r=pt(r);var s=i.ua(u);if(r instanceof vS)a.push(u);else{var c=IS(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new Mv(a);return new cS(o,u,i.fieldTransforms)}function xS(e,t,n,r,i,a){var o=e.fa(1,t,n),u=[CS(t,r,n)],s=[i];if(a.length%2!=0)throw new Pp(Dp.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(CS(t,a[c])),s.push(a[c+1]);for(var l=[],f=ym.empty(),h=u.length-1;h>=0;--h)if(!DS(l,u[h])){var d=u[h],p=s[h];p=pt(p);var v=o.ua(d);if(p instanceof vS)l.push(d);else{var m=IS(p,v);null!=m&&(l.push(d),f.set(d,m))}}var y=new Mv(l);return new cS(f,y,o.fieldTransforms)}function _S(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return IS(n,e.fa(r?4:3,t))}function IS(e,t){if(ES(e=pt(e)))return TS("Unsupported field value:",t,e),SS(e,t);if(e instanceof aS)return function(e,t){if(!lS(t.na))throw t.aa("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.aa("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ra&&4!==t.na)throw t.aa("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=Ae(e);try{for(a.s();!(n=a.n()).done;){var o=IS(n.value,t.ca(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=pt(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return uy(t.It,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Qp.fromDate(e);return{timestampValue:pg(t.It,n)}}if(e instanceof Qp){var r=new Qp(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:pg(t.It,r)}}if(e instanceof oS)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof iS)return{bytesValue:vg(t.It,e._byteString)};if(e instanceof UI){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.aa("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:gg(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.aa("Unsupported field value: ".concat(DI(e)))}(e,t)}function SS(e,t){var n={};return Nv(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Cv(e,(function(e,r){var i=IS(r,t.ia(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function ES(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Qp||e instanceof oS||e instanceof iS||e instanceof UI||e instanceof aS)}function TS(e,t,n){if(!ES(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=DI(n);throw"an object"===r?t.aa(e+" a custom object"):t.aa(e+" "+r)}}function CS(e,t,n){if((t=pt(t))instanceof rS)return t._internalPath;if("string"==typeof t)return AS(e,t);throw RS("Field path arguments must be of type string or ",e,!1,void 0,n)}var NS=new RegExp("[~\\*/\\[\\]]");function AS(e,t,n){if(t.search(NS)>=0)throw RS("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return je(rS,yt(t.split(".")))._internalPath}catch(r){throw RS("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function RS(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new Pp(Dp.INVALID_ARGUMENT,u+e+s)}function DS(e,t){return e.some((function(e){return e.isEqual(t)}))}var PS=function(){function e(t,n,r,i,a){Te(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return Ne(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new UI(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new OS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(LS("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),OS=function(e){Pe(n,e);var t=Ue(n);function n(){return Te(this,n),t.apply(this,arguments)}return Ne(n,[{key:"data",value:function(){return Hn(Oe(n.prototype),"data",this).call(this)}}]),n}(PS);function LS(e,t){return"string"==typeof t?AS(e,t):t instanceof rS?t._internalPath:t._delegate._internalPath}var MS=function(){function e(t,n){Te(this,e),this.hasPendingWrites=t,this.fromCache=n}return Ne(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),FS=function(e){Pe(n,e);var t=Ue(n);function n(e,r,i,a,o,u){var s;return Te(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return Ne(n,[{key:"exists",value:function(){return Hn(Oe(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new US(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(LS("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(PS),US=function(e){Pe(n,e);var t=Ue(n);function n(){return Te(this,n),t.apply(this,arguments)}return Ne(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Hn(Oe(n.prototype),"data",this).call(this,e)}}]),n}(FS),jS=function(){function e(t,n,r,i){Te(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new MS(i.hasPendingWrites,i.fromCache),this.query=r}return Ne(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new US(n._firestore,n._userDataWriter,r.key,r,new MS(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Pp(Dp.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new US(e._firestore,e._userDataWriter,t.doc.key,t.doc,new MS(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new US(e._firestore,e._userDataWriter,t.doc.key,t.doc,new MS(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:VS(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function VS(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Np()}}function BS(e,t){return e instanceof FS&&t instanceof FS?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof jS&&t instanceof jS&&e._firestore===t._firestore&&GI(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function zS(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Pp(Dp.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var qS=Ne((function e(){Te(this,e)}));function GS(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var KS=function(e){Pe(n,e);var t=Ue(n);function n(e,r,i){var a;return Te(this,n),(a=t.call(this)).wa=e,a.ma=r,a.ga=i,a.type="where",a}return Ne(n,[{key:"_apply",value:function(e){var t=dS(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Pp(Dp.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){nE(o,a);var s,c=[],l=Ae(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(tE(r,e,f))}}catch(d){l.e(d)}finally{l.f()}u={arrayValue:{values:c}}}else u=tE(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||nE(o,a),u=_S(n,"where",o,"in"===a||"not-in"===a);var h=Cm.create(i,a,u);return function(e,t){if(t.dt()){var n=Wm(e);if(null!==n&&!n.isEqual(t.field))throw new Pp(Dp.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=Hm(e);null!==r&&rE(e,t.field,r)}var i=function(e,t){var n,r=Ae(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new Pp(Dp.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Pp(Dp.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this.wa,this.ma,this.ga);return new jI(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new zm(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(qS);var HS=function(e){Pe(n,e);var t=Ue(n);function n(e,r){var i;return Te(this,n),(i=t.call(this)).wa=e,i.ya=r,i.type="orderBy",i}return Ne(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Pp(Dp.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Pp(Dp.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Um(t,n);return function(e,t){if(null===Hm(e)){var n=Wm(e);null!==n&&rE(e,n,t.field)}}(e,r),r}(e._query,this.wa,this.ya);return new jI(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new zm(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(qS);var WS=function(e){Pe(n,e);var t=Ue(n);function n(e,r,i){var a;return Te(this,n),(a=t.call(this)).type=e,a.pa=r,a.Ia=i,a}return Ne(n,[{key:"_apply",value:function(e){return new jI(e.firestore,e.converter,Xm(e._query,this.pa,this.Ia))}}]),n}(qS);var QS=function(e){Pe(n,e);var t=Ue(n);function n(e,r,i){var a;return Te(this,n),(a=t.call(this)).type=e,a.Ta=r,a.Ea=i,a}return Ne(n,[{key:"_apply",value:function(e){var t=eE(e,this.type,this.Ta,this.Ea);return new jI(e.firestore,e.converter,function(e,t){return new zm(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(qS);function YS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new QS("startAt",t,!0)}function $S(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new QS("startAfter",t,!1)}var XS=function(e){Pe(n,e);var t=Ue(n);function n(e,r,i){var a;return Te(this,n),(a=t.call(this)).type=e,a.Ta=r,a.Ea=i,a}return Ne(n,[{key:"_apply",value:function(e){var t=eE(e,this.type,this.Ta,this.Ea);return new jI(e.firestore,e.converter,function(e,t){return new zm(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(qS);function JS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new XS("endBefore",t,!1)}function ZS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new XS("endAt",t,!0)}function eE(e,t,n,r){if(n[0]=pt(n[0]),n[0]instanceof PS)return function(e,t,n,r,i){if(!r)throw new Pp(Dp.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=Ae(Ym(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(am(t,r.key));else{var c=r.data.field(s.field);if(zv(c))throw new Pp(Dp.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new Pp(Dp.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new Fm(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=dS(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new Pp(Dp.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new Pp(Dp.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!Qm(e)&&-1!==c.indexOf("/"))throw new Pp(Dp.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Xp.fromString(c));if(!ev.isDocumentKey(l))throw new Pp(Dp.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new ev(l);u.push(am(t,f))}else{var h=_S(n,r,c);u.push(h)}}return new Fm(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function tE(e,t,n){if("string"==typeof(n=pt(n))){if(""===n)throw new Pp(Dp.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Qm(t)&&-1!==n.indexOf("/"))throw new Pp(Dp.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Xp.fromString(n));if(!ev.isDocumentKey(r))throw new Pp(Dp.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return am(e,new ev(r))}if(n instanceof UI)return am(e,n._key);throw new Pp(Dp.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(DI(n),"."))}function nE(e,t){if(!Array.isArray(e)||0===e.length)throw new Pp(Dp.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new Pp(Dp.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function rE(e,t,n){if(!n.isEqual(t))throw new Pp(Dp.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var iE={maxAttempts:5},aE=function(){function e(){Te(this,e)}return Ne(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Jv(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vv(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Bv(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Np()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Cv(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new oS(Vv(e.latitude),Vv(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=qv(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Gv(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=jv(e);return new Qp(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Xp.fromString(e);Ap(zg(n));var r=new Hv(n.get(1),n.get(3)),i=new ev(n.popFirst(5));return r.isEqual(t)||Ep("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function oE(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var uE=function(e){Pe(n,e);var t=Ue(n);function n(e){var r;return Te(this,n),(r=t.call(this)).firestore=e,r}return Ne(n,[{key:"convertBytes",value:function(e){return new iS(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new UI(this.firestore,null,t)}}]),n}(aE),sE=function(){function e(t,n){Te(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=dS(t)}return Ne(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=cE(e,this._firestore),i=oE(r.converter,t,n),a=pS(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,xy.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=cE(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=pt(t))||t instanceof rS?xS(this._dataReader,"WriteBatch.update",i._key,t,n,o):wS(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,xy.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=cE(e,this._firestore);return this._mutations=this._mutations.concat(new Fy(t._key,xy.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Pp(Dp.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function cE(e,t){if((e=pt(e)).firestore!==t)throw new Pp(Dp.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var lE=function(e){Pe(n,e);var t=Ue(n);function n(e){var r;return Te(this,n),(r=t.call(this)).firestore=e,r}return Ne(n,[{key:"convertBytes",value:function(e){return new iS(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new UI(this.firestore,null,t)}}]),n}(aE);function fE(e){e=PI(e,UI);var t=PI(e.firestore,QI),n=YI(t),r=new lE(t);return function(e,t){var n=new Op;return e.asyncQueue.enqueueAndForget(kt(vt().mark((function r(){return vt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=kt(vt().mark((function e(t,n,r){var i,a;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=Rp(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new Pp(Dp.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=Lx(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,bI(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new FS(t,r,e._key,n,new MS(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function hE(e){e=PI(e,jI);var t=PI(e.firestore,QI),n=YI(t),r=new lE(t);return function(e,t){var n=new Op;return e.asyncQueue.enqueueAndForget(kt(vt().mark((function r(){return vt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=kt(vt().mark((function e(t,n,r){var i,a,o,u,s;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pw(t,n,!0);case 3:i=e.sent,a=new t_(n,i.Hi),o=a.ju(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=Lx(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,bI(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new jS(t,r,e,n)}))}function dE(e,t,n){e=PI(e,UI);var r=PI(e.firestore,QI),i=oE(e.converter,t,n);return yE(r,[pS(dS(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,xy.none())])}function pE(e,t,n){e=PI(e,UI);for(var r=PI(e.firestore,QI),i=dS(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return yE(r,[("string"==typeof(t=pt(t))||t instanceof rS?xS(i,"updateDoc",e._key,t,n,o):wS(i,"updateDoc",e._key,t)).toMutation(e._key,xy.exists(!0))])}function vE(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=pt(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||HI(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(HI(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof UI)l=PI(e.firestore,QI),f=Gm(e._key.path),c={next:function(t){n[s]&&n[s](gE(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=PI(e,jI);l=PI(p.firestore,QI),f=p._query;var v=new lE(l);c={next:function(e){n[s]&&n[s](new jS(l,v,p,e))},error:n[s+1],complete:n[s+2]},zS(e._query)}return function(e,t,n,r){var i=new oI(r),a=new Qx(t,i,n);return e.asyncQueue.enqueueAndForget(kt(vt().mark((function t(){return vt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Bx,t.next=3,_I(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Rc(),e.asyncQueue.enqueueAndForget(kt(vt().mark((function t(){return vt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=qx,t.next=3,_I(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(YI(l),f,h,c)}function mE(e,t){return function(e,t){var n=new oI(t);return e.asyncQueue.enqueueAndForget(kt(vt().mark((function t(){return vt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Rp(e).Ru.add(t),t.next()},t.next=3,_I(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Rc(),e.asyncQueue.enqueueAndForget(kt(vt().mark((function t(){return vt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Rp(e).Ru.delete(t)},t.next=3,_I(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(YI(e=PI(e,QI)),HI(t)?t:{next:t})}function yE(e,t){return function(e,t){var n=new Op;return e.asyncQueue.enqueueAndForget(kt(vt().mark((function r(){return vt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=f_,r.next=3,xI(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(YI(e),t)}function gE(e,t,n){var r=n.docs.get(t._key),i=new lE(e);return new FS(e,i,t._key,r,new MS(n.hasPendingWrites,n.fromCache),t.converter)}var kE=function(e){Pe(n,e);var t=Ue(n);function n(e,r){var i;return Te(this,n),(i=t.call(this,e,r))._firestore=e,i}return Ne(n,[{key:"get",value:function(e){var t=this,r=cE(e,this._firestore),i=new lE(this._firestore);return Hn(Oe(n.prototype),"get",this).call(this,e).then((function(e){return new FS(t._firestore,i,r._key,e._document,new MS(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){Te(this,e),this._firestore=t,this._transaction=n,this._dataReader=dS(t)}return Ne(e,[{key:"get",value:function(e){var t=this,n=cE(e,this._firestore),r=new uE(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Np();var i=e[0];if(i.isFoundDocument())return new PS(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new PS(t._firestore,r,n._key,null,n.converter);throw Np()}))}},{key:"set",value:function(e,t,n){var r=cE(e,this._firestore),i=oE(r.converter,t,n),a=pS(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=cE(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=pt(t))||t instanceof rS?xS(this._dataReader,"Transaction.update",i._key,t,n,o):wS(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=cE(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function bE(e,t,n){e=PI(e,QI);var r=Object.assign(Object.assign({},iE),n);return function(e){if(e.maxAttempts<1)throw new Pp(Dp.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new Op;return e.asyncQueue.enqueueAndForget(kt(vt().mark((function i(){var a;return vt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,function(e){return yI(e).then((function(e){return e.datastore}))}(e);case 2:a=i.sent,new cI(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(YI(e),(function(n){return t(new kE(e,n))}),r)}function wE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new gS("arrayUnion",t)}function xE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new kS("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){xp=e}(pn),un(new bt("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new QI(new Up(e.getProvider("auth-internal")),new zp(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Pp(Dp.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hv(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),bn(bp,"3.4.15",e),bn(bp,"3.4.15","esm2017")}();function _E(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Pp("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function IE(){if("undefined"===typeof Uint8Array)throw new Pp("unimplemented","Uint8Arrays are not available in this environment.")}function SE(){if("undefined"==typeof atob)throw new Pp("unimplemented","Blobs are unavailable in Firestore in this environment.")}var EE=function(){function e(t){Te(this,e),this._delegate=t}return Ne(e,[{key:"toBase64",value:function(){return SE(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return IE(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return SE(),new e(iS.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return IE(),new e(iS.fromUint8Array(t))}}]),e}();function TE(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=Ae(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var CE=function(){function e(){Te(this,e)}return Ne(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){nS(e=PI(e,QI));var n=YI(e),r=e._freezeSettings(),i=new iI;return XI(n,i,new nI(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){nS(e=PI(e,QI));var t=YI(e),n=e._freezeSettings(),r=new iI;return XI(t,r,new rI(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new Pp(Dp.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Op;return e._queue.enqueueAndForgetEvenWhileRestricted(kt(vt().mark((function n(){return vt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=kt(vt().mark((function e(t){var n;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(mv.C()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,mv.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(Zb(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),NE=function(){function e(t,n,r){var i=this;Te(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Hv||(this._appCompat=t)}return Ne(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Tp("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};FI(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return JI(this._delegate)}},{key:"disableNetwork",value:function(){return ZI(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&NI("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new Op;return e.asyncQueue.enqueueAndForget(kt(vt().mark((function n(){return vt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=x_,n.next=3,xI(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(YI(e=PI(e,QI)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return mE(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new Pp("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new qE(this,BI(this._delegate,e))}catch(t){throw LE(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new OE(this,zI(this._delegate,e))}catch(t){throw LE(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new VE(this,function(e,t){if(e=PI(e,MI),CI("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Pp(Dp.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new jI(e,null,function(e){return new zm(Xp.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw LE(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return bE(this._delegate,(function(n){return e(new RE(t,n))}))}},{key:"batch",value:function(){var e=this;return YI(this._delegate),new DE(new sE(this._delegate,(function(t){return yE(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return eS(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return tS(this._delegate,e).then((function(e){return e?new VE(t,e):null}))}}]),e}(),AE=function(e){Pe(n,e);var t=Ue(n);function n(e){var r;return Te(this,n),(r=t.call(this)).firestore=e,r}return Ne(n,[{key:"convertBytes",value:function(e){return new EE(new iS(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return OE.forKey(t,this.firestore,null)}}]),n}(aE);var RE=function(){function e(t,n){Te(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new AE(t)}return Ne(e,[{key:"get",value:function(e){var t=this,n=GE(e);return this._delegate.get(n).then((function(e){return new UE(t._firestore,new FS(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=GE(e);return n?(_E("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=GE(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=GE(e);return this._delegate.delete(t),this}}]),e}(),DE=function(){function e(t){Te(this,e),this._delegate=t}return Ne(e,[{key:"set",value:function(e,t,n){var r=GE(e);return n?(_E("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=GE(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=GE(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),PE=function(){function e(t,n,r){Te(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return Ne(e,[{key:"fromFirestore",value:function(e,t){var n=new US(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new jE(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new AE(t),n),i.set(n,a)),a}}]),e}();PE.INSTANCES=new WeakMap;var OE=function(){function e(t,n){Te(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new AE(t)}return Ne(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new qE(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new qE(this.firestore,BI(this._delegate,e))}catch(t){throw LE(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=pt(e))instanceof UI&&qI(this._delegate,e)}},{key:"set",value:function(e,t){t=_E("DocumentReference.set",t);try{return t?dE(this._delegate,e,t):dE(this._delegate,e)}catch(n){throw LE(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?pE(this._delegate,e):pE.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw LE(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return yE(PI(e.firestore,QI),[new Fy(e._key,xy.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=ME(n),a=FE(n,(function(t){return new UE(e.firestore,new FS(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return vE(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?fE(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=PI(e,UI);var t=PI(e.firestore,QI);return SI(YI(t),e._key,{source:"server"}).then((function(n){return gE(t,e,n)}))}(this._delegate):function(e){e=PI(e,UI);var t=PI(e.firestore,QI);return SI(YI(t),e._key).then((function(n){return gE(t,e,n)}))}(this._delegate),t.then((function(e){return new UE(n.firestore,new FS(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(PE.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new Pp("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new UI(n._delegate,r,new ev(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new UI(n._delegate,r,t))}}]),e}();function LE(e,t,n){return e.message=e.message.replace(t,n),e}function ME(e){var t,n=Ae(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!TE(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function FE(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=TE(e[0])?e[0]:TE(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var UE=function(){function e(t,n){Te(this,e),this._firestore=t,this._delegate=n}return Ne(e,[{key:"ref",get:function(){return new OE(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return BS(this._delegate,e._delegate)}}]),e}(),jE=function(e){Pe(n,e);var t=Ue(n);function n(){return Te(this,n),t.apply(this,arguments)}return Ne(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||Np()}(void 0!==t),t}}]),n}(UE),VE=function(){function e(t,n){Te(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new AE(t)}return Ne(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,GS(this._delegate,function(e,t,n){var r=t,i=LS("where",e);return new KS(i,r,n)}(t,n,r)))}catch(i){throw LE(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,GS(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=LS("orderBy",e);return new HS(n,t)}(t,n)))}catch(r){throw LE(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,GS(this._delegate,function(e){return OI("limit",e),new WS("limit",e,"F")}(t)))}catch(n){throw LE(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,GS(this._delegate,function(e){return OI("limitToLast",e),new WS("limitToLast",e,"L")}(t)))}catch(n){throw LE(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,GS(this._delegate,YS.apply(void 0,arguments)))}catch(t){throw LE(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,GS(this._delegate,$S.apply(void 0,arguments)))}catch(t){throw LE(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,GS(this._delegate,JS.apply(void 0,arguments)))}catch(t){throw LE(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,GS(this._delegate,ZS.apply(void 0,arguments)))}catch(t){throw LE(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return GI(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?hE(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=PI(e,jI);var t=PI(e.firestore,QI),n=YI(t),r=new lE(t);return EI(n,e._query,{source:"server"}).then((function(n){return new jS(t,r,e,n)}))}(this._delegate):function(e){e=PI(e,jI);var t=PI(e.firestore,QI),n=YI(t),r=new lE(t);return zS(e._query),EI(n,e._query).then((function(n){return new jS(t,r,e,n)}))}(this._delegate),t.then((function(e){return new zE(n.firestore,new jS(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=ME(n),a=FE(n,(function(t){return new zE(e.firestore,new jS(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return vE(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(PE.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),BE=function(){function e(t,n){Te(this,e),this._firestore=t,this._delegate=n}return Ne(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new jE(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),zE=function(){function e(t,n){Te(this,e),this._firestore=t,this._delegate=n}return Ne(e,[{key:"query",get:function(){return new VE(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new jE(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new BE(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new jE(n._firestore,r))}))}},{key:"isEqual",value:function(e){return BS(this._delegate,e._delegate)}}]),e}(),qE=function(e){Pe(n,e);var t=Ue(n);function n(e,r){var i;return Te(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return Ne(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new OE(this.firestore,e):null}},{key:"doc",value:function(e){try{return new OE(this.firestore,void 0===e?zI(this._delegate):zI(this._delegate,e))}catch(t){throw LE(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=PI(e.firestore,QI),r=zI(e),i=oE(e.converter,t);return yE(n,[pS(dS(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,xy.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new OE(t.firestore,e)}))}},{key:"isEqual",value:function(e){return qI(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(PE.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(VE);function GE(e){return PI(e,UI)}var KE=function(){function e(){Te(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=je(rS,n)}return Ne(e,[{key:"isEqual",value:function(e){return(e=pt(e))instanceof rS&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Zp.keyField().canonicalString())}}]),e}(),HE=function(){function e(t){Te(this,e),this._delegate=t}return Ne(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new yS("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new vS("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=wE.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=xE.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new bS("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),WE={Firestore:NE,GeoPoint:oS,Timestamp:Qp,Blob:EE,Transaction:RE,WriteBatch:DE,DocumentReference:OE,DocumentSnapshot:UE,Query:VE,QueryDocumentSnapshot:jE,QuerySnapshot:zE,CollectionReference:qE,FieldPath:KE,FieldValue:HE,setLogLevel:function(e){!function(e){_p.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new bt("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},WE)))}(e,(function(e,t){return new NE(e,t,new CE)})),e.registerVersion("@firebase/firestore-compat","0.1.24")}(Gn);var QE="firebasestorage.googleapis.com",YE=function(e){Pe(n,e);var t=Ue(n);function n(e,r){var i;return Te(this,n),(i=t.call(this,$E(e),"Firebase Storage: ".concat(r," (").concat($E(e),")"))).customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(Re(i),n.prototype),i}return Ne(n,[{key:"_codeEquals",value:function(e){return $E(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(tt);function $E(e){return"storage/"+e}function XE(){return new YE("unknown","An unknown error occurred, please check the error payload for server response.")}function JE(){return new YE("canceled","User canceled the upload/download.")}function ZE(){return new YE("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function eT(e){return new YE("invalid-argument",e)}function tT(){return new YE("app-deleted","The Firebase app was deleted.")}function nT(e){return new YE("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function rT(e,t){return new YE("invalid-format","String does not match format '"+e+"': "+t)}function iT(e){throw new YE("internal-error","Internal error: "+e)}var aT,oT=function(){function e(t,n){Te(this,e),this.bucket=t,this.path_=n}return Ne(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch(i){return new e(t,"")}if(""===r.path)return r;throw new YE("invalid-default-bucket","Invalid default bucket '"+t+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var u=n.replace(/[.]/g,"\\."),s=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(u,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===QE?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<s.length;c++){var l=s[c],f=l.regex.exec(t);if(f){var h=f[l.indices.bucket],d=f[l.indices.path];d||(d=""),r=new e(h,d),l.postModify(r);break}}if(null==r)throw function(e){return new YE("invalid-url","Invalid URL '"+e+"'.")}(t);return r}}]),e}(),uT=function(){function e(t){Te(this,e),this.promise_=Promise.reject(t)}return Ne(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function sT(e){return"string"===typeof e||e instanceof String}function cT(e){return lT()&&e instanceof Blob}function lT(){return"undefined"!==typeof Blob}function fT(e,t,n,r){if(r<t)throw eT("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw eT("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function hT(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function dT(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(aT||(aT={}));var pT=function(){function e(t,n,r,i,a,o,u,s,c,l,f){var h=this;Te(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=u,this.errorCallback_=s,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return Ne(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(s){i(s)}else if(null!==a){var u=XE();u.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,u)):i(u)}else{if(n.canceled)i(e.appDelete_?tT():JE());else i(new YE("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}};this.canceled_?t(0,new vT(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,u=0;function s(){return 2===u}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function f(t){i=setTimeout((function(){i=null,e(d,s())}),t)}function h(){a&&clearTimeout(a)}function d(e){if(c)h();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void l.call.apply(l,[null,e].concat(n));var a;if(s()||o)return h(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===u?(u=2,a=0):a=1e3*(r+Math.random()),f(a)}}var p=!1;function v(e){p||(p=!0,h(),c||(null!==i?(e||(u=2),clearTimeout(i),f(0)):e||(u=1)))}return f(0),a=setTimeout((function(){o=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new vT(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===aT.NO_ERROR,a=r.getStatus();if(n&&!e.isRetryStatusCode_(a)){var o=-1!==e.successCodes_.indexOf(a);t(!0,new vT(o,r))}else{var u=r.getErrorCode()===aT.ABORT;t(!1,new vT(!1,null,u))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}},{key:"isRetryStatusCode_",value:function(e){var t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r}}]),e}(),vT=Ne((function e(t,n,r){Te(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function mT(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function yT(){for(var e=mT(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(lT())return new Blob(n);throw new YE("unsupported-environment","This browser doesn't seem to support creating Blobs")}var gT={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},kT=Ne((function e(t,n){Te(this,e),this.data=t,this.contentType=n||null}));function bT(e,t){switch(e){case gT.RAW:return new kT(wT(t));case gT.BASE64:case gT.BASE64URL:return new kT(xT(e,t));case gT.DATA_URL:return new kT(function(e){var t=new _T(e);return t.base64?xT(gT.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw rT(gT.DATA_URL,"Malformed data URL.")}return wT(t)}(t.rest)}(t),new _T(t).contentType)}throw XE()}function wT(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function xT(e,t){switch(e){case gT.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw rT(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case gT.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw rT(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=atob(t)}catch(c){throw rT(e,"Invalid character found")}for(var u=new Uint8Array(o.length),s=0;s<o.length;s++)u[s]=o.charCodeAt(s);return u}var _T=Ne((function e(t){Te(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw rT(gT.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}));var IT=function(){function e(t,n){Te(this,e);var r=0,i="";cT(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return Ne(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(cT(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(lT()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(yT.apply(null,i))}var a=n.map((function(e){return sT(e)?bT(gT.RAW,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var u=new Uint8Array(o),s=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)u[s++]=e[t]})),new e(u,!0)}}]),e}();function ST(e){var t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function ET(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function TT(e,t){return t}var CT=Ne((function e(t,n,r,i){Te(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||TT})),NT=null;function AT(){if(NT)return NT;var e=[];e.push(new CT("bucket")),e.push(new CT("generation")),e.push(new CT("metageneration")),e.push(new CT("name","fullPath",!0));var t=new CT("name");t.xform=function(e,t){return function(e){return!sT(e)||e.length<2?e:ET(e)}(t)},e.push(t);var n=new CT("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new CT("timeCreated")),e.push(new CT("updated")),e.push(new CT("md5Hash",null,!0)),e.push(new CT("cacheControl",null,!0)),e.push(new CT("contentDisposition",null,!0)),e.push(new CT("contentEncoding",null,!0)),e.push(new CT("contentLanguage",null,!0)),e.push(new CT("contentType",null,!0)),e.push(new CT("metadata","customMetadata",!0)),NT=e}function RT(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new oT(n,r);return t._makeStorageReference(i)}})}(r,e),r}function DT(e,t,n){var r=ST(t);return null===r?null:RT(e,r,n)}function PT(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}function OT(e,t,n){var r=ST(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes){var i,a=Ae(n.prefixes);try{for(a.s();!(i=a.n()).done;){var o=i.value.replace(/\/$/,""),u=e._makeStorageReference(new oT(t,o));r.prefixes.push(u)}}catch(h){a.e(h)}finally{a.f()}}if(n.items){var s,c=Ae(n.items);try{for(c.s();!(s=c.n()).done;){var l=s.value,f=e._makeStorageReference(new oT(t,l.name));r.items.push(f)}}catch(h){c.e(h)}finally{c.f()}}return r}(e,t,r)}var LT=Ne((function e(t,n,r,i){Te(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function MT(e){if(!e)throw XE()}function FT(e,t){return function(n,r){var i=DT(e,r,t);return MT(null!==i),i}}function UT(e,t){return function(n,r){var i=DT(e,r,t);return MT(null!==i),function(e,t,n,r){var i=ST(t);if(null===i)return null;if(!sT(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return hT("/b/"+o(i)+"/o/"+o(a),n,r)+dT({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function jT(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new YE("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new YE("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new YE("quota-exceeded","Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new YE("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function VT(e){var t=jT(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new YE("object-not-found","Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function BT(e,t,n){var r=hT(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new LT(r,"GET",FT(e,n),i);return a.errorHandler=VT(t),a}function zT(e,t,n,r,i){var a={};t.isRoot?a.prefix="":a.prefix=t.path+"/",n&&n.length>0&&(a.delimiter=n),r&&(a.pageToken=r),i&&(a.maxResults=i);var o=hT(t.bucketOnlyServerUrl(),e.host,e._protocol),u=e.maxOperationRetryTime,s=new LT(o,"GET",function(e,t){return function(n,r){var i=OT(e,t,r);return MT(null!==i),i}}(e,t.bucket),u);return s.urlParams=a,s.errorHandler=jT(t),s}function qT(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function GT(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var u=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+u;var s=qT(t,r,i),c="--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+PT(s,n)+"\r\n--"+u+"\r\nContent-Type: "+s.contentType+"\r\n\r\n",l="\r\n--"+u+"--",f=IT.getBlob(c,r,l);if(null===f)throw ZE();var h={name:s.fullPath},d=hT(a,e.host,e._protocol),p=e.maxUploadRetryTime,v=new LT(d,"POST",FT(e,n),p);return v.urlParams=h,v.headers=o,v.body=f.uploadData(),v.errorHandler=jT(t),v}var KT=Ne((function e(t,n,r,i){Te(this,e),this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null}));function HT(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){MT(!1)}return MT(!!n&&-1!==(t||["active"]).indexOf(n)),n}var WT=262144;function QT(e,t,n,r,i,a,o,u){var s=new KT(0,0);if(o?(s.current=o.current,s.total=o.total):(s.current=0,s.total=r.size()),r.size()!==s.total)throw new YE("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=s.total-s.current,l=c;i>0&&(l=Math.min(l,i));var f=s.current,h=f+l,d={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(s.current)},p=r.slice(f,h);if(null===p)throw ZE();var v=t.maxUploadRetryTime,m=new LT(n,"POST",(function(e,n){var i,o=HT(e,["active","final"]),u=s.current+l,c=r.size();return i="final"===o?FT(t,a)(e,n):null,new KT(u,c,"final"===o,i)}),v);return m.headers=d,m.body=p.uploadData(),m.progressCallback=u||null,m.errorHandler=jT(e),m}var YT={STATE_CHANGED:"state_changed"},$T={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function XT(e){switch(e){case"running":case"pausing":case"canceling":return $T.RUNNING;case"paused":return $T.PAUSED;case"success":return $T.SUCCESS;case"canceled":return $T.CANCELED;default:return $T.ERROR}}var JT=Ne((function e(t,n,r){Te(this,e);var i=function(e){return"function"===typeof e}(t)||null!=n||null!=r;if(i)this.next=t,this.error=null!==n&&void 0!==n?n:void 0,this.complete=null!==r&&void 0!==r?r:void 0;else{var a=t;this.next=a.next,this.error=a.error,this.complete=a.complete}}));function ZT(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((function(){return e.apply(void 0,n)}))}}var eC=function(){function e(){var t=this;Te(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=aT.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=aT.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=aT.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return Ne(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw iT("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw iT("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw iT("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw iT("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw iT("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),tC=function(e){Pe(n,e);var t=Ue(n);function n(){return Te(this,n),t.apply(this,arguments)}return Ne(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(eC);function nC(){return new tC}var rC=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Te(this,e),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=i,this._mappings=AT(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){r._request=void 0,r._chunkMultiplier=1,e._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=e,r._transition("error"))},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals("canceled")?r.completeTransitions_():(r._error=e,r._transition("error"))},this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return Ne(e,[{key:"_makeProgressCallback",value:function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}},{key:"_resolveToken",value:function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=c(n,2),i=r[0],a=r[1];switch(t._state){case"running":e(i,a);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))}},{key:"_createResumable",value:function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o=qT(t,r,i),u={name:o.fullPath},s=hT(a,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=PT(o,n),f=e.maxUploadRetryTime,h=new LT(s,"POST",(function(e){var t;HT(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){MT(!1)}return MT(sT(t)),t}),f);return h.urlParams=u,h.headers=c,h.body=l,h.errorHandler=jT(t),h}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,nC,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))}},{key:"_fetchStatus",value:function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,a=new LT(n,"POST",(function(e){var t=HT(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(a){MT(!1)}n||MT(!1);var i=Number(n);return MT(!isNaN(i)),new KT(i,r.size(),"final"===t)}),i);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=jT(t),a}(e._ref.storage,e._ref._location,t,e._blob),a=e._ref.storage._makeRequest(i,nC,n,r);e._request=a,a.getPromise().then((function(t){e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))}},{key:"_continueUpload",value:function(){var e=this,t=WT*this._chunkMultiplier,n=new KT(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,a){var o;try{o=QT(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(s){return e._error=s,void e._transition("error")}var u=e._ref.storage._makeRequest(o,nC,i,a);e._request=u,u.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))}},{key:"_increaseMultiplier",value:function(){WT*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken((function(t,n){var r=BT(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,nC,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken((function(t,n){var r=GT(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,nC,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))}},{key:"_updateProgress",value:function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=JE(),this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"snapshot",get:function(){var e=XT(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}},{key:"on",value:function(e,t,n,r){var i=this,a=new JT(t||void 0,n||void 0,r||void 0);return this._addObserver(a),function(){i._removeObserver(a)}}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch(XT(this._state)){case $T.SUCCESS:ZT(this._resolve.bind(null,this.snapshot))();break;case $T.CANCELED:case $T.ERROR:ZT(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch(XT(this._state)){case $T.RUNNING:case $T.PAUSED:e.next&&ZT(e.next.bind(e,this.snapshot))();break;case $T.SUCCESS:e.complete&&ZT(e.complete.bind(e))();break;default:e.error&&ZT(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}]),e}(),iC=function(){function e(t,n){Te(this,e),this._service=t,this._location=n instanceof oT?n:oT.makeFromUrl(n,t.host)}return Ne(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new oT(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return ET(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new oT(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw nT(e)}}]),e}();function aC(e,t,n){return oC.apply(this,arguments)}function oC(){return(oC=kt(vt().mark((function e(t,n,r){var i,a,o,u;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={pageToken:r},e.next=3,uC(t,o);case 3:if(u=e.sent,(i=n.prefixes).push.apply(i,yt(u.prefixes)),(a=n.items).push.apply(a,yt(u.items)),null==u.nextPageToken){e.next=9;break}return e.next=9,aC(t,n,u.nextPageToken);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function uC(e,t){null!=t&&"number"===typeof t.maxResults&&fT("options.maxResults",1,1e3,t.maxResults);var n=t||{},r=zT(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,nC)}function sC(e,t){e._throwIfRoot("updateMetadata");var n=function(e,t,n,r){var i=hT(t.fullServerUrl(),e.host,e._protocol),a=PT(n,r),o=e.maxOperationRetryTime,u=new LT(i,"PATCH",FT(e,r),o);return u.headers={"Content-Type":"application/json; charset=utf-8"},u.body=a,u.errorHandler=VT(t),u}(e.storage,e._location,t,AT());return e.storage.makeRequestWithTokens(n,nC)}function cC(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=hT(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new LT(r,"GET",UT(e,n),i);return a.errorHandler=VT(t),a}(e.storage,e._location,AT());return e.storage.makeRequestWithTokens(t,nC).then((function(e){if(null===e)throw new YE("no-download-url","The given file does not have any download URLs.");return e}))}function lC(e){e._throwIfRoot("deleteObject");var t=function(e,t){var n=hT(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new LT(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=VT(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,nC)}function fC(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new oT(e._location.bucket,n);return new iC(e.storage,r)}function hC(e,t){if(e instanceof mC){var n=e;if(null==n._bucket)throw new YE("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new iC(n,n._bucket);return null!=t?hC(r,t):r}return void 0!==t?fC(e,t):e}function dC(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof mC)return new iC(e,t);throw eT("To use ref(service, url), the first argument must be a Storage instance.")}return hC(e,t)}function pC(e,t){var n=null===t||void 0===t?void 0:t.storageBucket;return null==n?null:oT.makeFromBucketSpec(n,e)}function vC(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:We(i,e.app.options.projectId))}var mC=function(){function e(t,n,r,i,a){Te(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=QE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?oT.makeFromBucketSpec(i,this._host):pC(this._host,this.app.options)}return Ne(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=oT.makeFromBucketSpec(this._url,e):this._bucket=pC(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){fT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){fT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=kt(vt().mark((function e(){var t,n;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=kt(vt().mark((function e(){var t,n;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new iC(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this;if(this._deleted)return new uT(tT());var a=function(e,t,n,r,i,a){var o=dT(e.urlParams),u=e.url+o,s=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(s,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(s,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(s,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(s,r),new pT(u,e.method,s,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i)}(e,this._appId,n,r,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then((function(){return i._requests.delete(a)}),(function(){return i._requests.delete(a)})),a}},{key:"makeRequestWithTokens",value:function(){var e=kt(vt().mark((function e(t,n){var r,i,a,o;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=c(r,2),a=i[0],o=i[1],e.abrupt("return",this._makeRequest(t,n,a,o).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),yC="@firebase/storage",gC="0.9.9",kC="storage";function bC(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new rC(e,new IT(t),n)}(e=pt(e),t,n)}function wC(e){return function(e){e._throwIfRoot("getMetadata");var t=BT(e.storage,e._location,AT());return e.storage.makeRequestWithTokens(t,nC)}(e=pt(e))}function xC(e){return function(e){var t={prefixes:[],items:[]};return aC(e,t).then((function(){return t}))}(e=pt(e))}function _C(e,t){return dC(e=pt(e),t)}function IC(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};vC(e,t,n,r)}function SC(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new mC(r,i,a,n,pn)}un(new bt(kC,SC,"PUBLIC").setMultipleInstances(!0)),bn(yC,gC,""),bn(yC,gC,"esm2017");var EC=function(){function e(t,n,r){Te(this,e),this._delegate=t,this.task=n,this.ref=r}return Ne(e,[{key:"bytesTransferred",get:function(){return this._delegate.bytesTransferred}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"state",get:function(){return this._delegate.state}},{key:"totalBytes",get:function(){return this._delegate.totalBytes}}]),e}(),TC=function(){function e(t,n){Te(this,e),this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Ne(e,[{key:"snapshot",get:function(){return new EC(this._delegate.snapshot,this,this._ref)}},{key:"then",value:function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new EC(t,n,n._ref))}),t)}},{key:"on",value:function(e,t,n,r){var i=this,a=void 0;return t&&(a="function"===typeof t?function(e){return t(new EC(e,i,i._ref))}:{next:t.next?function(e){return t.next(new EC(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,n||void 0,r||void 0)}}]),e}(),CC=function(){function e(t,n){Te(this,e),this._delegate=t,this._service=n}return Ne(e,[{key:"prefixes",get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new NC(t,e._service)}))}},{key:"items",get:function(){var e=this;return this._delegate.items.map((function(t){return new NC(t,e._service)}))}},{key:"nextPageToken",get:function(){return this._delegate.nextPageToken||null}}]),e}(),NC=function(){function e(t,n){Te(this,e),this._delegate=t,this.storage=n}return Ne(e,[{key:"name",get:function(){return this._delegate.name}},{key:"bucket",get:function(){return this._delegate.bucket}},{key:"fullPath",get:function(){return this._delegate.fullPath}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"child",value:function(t){var n=function(e,t){return fC(e,t)}(this._delegate,t);return new e(n,this.storage)}},{key:"root",get:function(){return new e(this._delegate.root,this.storage)}},{key:"parent",get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)}},{key:"put",value:function(e,t){return this._throwIfRoot("put"),new TC(bC(this._delegate,e,t),this)}},{key:"putString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:gT.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");var r=bT(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new TC(new rC(this._delegate,new IT(r.data,!0),i),this)}},{key:"listAll",value:function(){var e=this;return xC(this._delegate).then((function(t){return new CC(t,e.storage)}))}},{key:"list",value:function(e){var t=this;return function(e,t){return uC(e=pt(e),t)}(this._delegate,e||void 0).then((function(e){return new CC(e,t.storage)}))}},{key:"getMetadata",value:function(){return wC(this._delegate)}},{key:"updateMetadata",value:function(e){return function(e,t){return sC(e=pt(e),t)}(this._delegate,e)}},{key:"getDownloadURL",value:function(){return cC(pt(this._delegate))}},{key:"delete",value:function(){return this._throwIfRoot("delete"),lC(pt(this._delegate))}},{key:"_throwIfRoot",value:function(e){if(""===this._delegate._location.path)throw nT(e)}}]),e}(),AC=function(){function e(t,n){Te(this,e),this.app=t,this._delegate=n}return Ne(e,[{key:"maxOperationRetryTime",get:function(){return this._delegate.maxOperationRetryTime}},{key:"maxUploadRetryTime",get:function(){return this._delegate.maxUploadRetryTime}},{key:"ref",value:function(e){if(RC(e))throw eT("ref() expected a child path but got a URL, use refFromURL instead.");return new NC(_C(this._delegate,e),this)}},{key:"refFromURL",value:function(e){if(!RC(e))throw eT("refFromURL() expected a full URL but got a child path, use ref() instead.");try{oT.makeFromUrl(e,this._delegate.host)}catch(t){throw eT("refFromUrl() expected a valid full URL but got an invalid one.")}return new NC(_C(this._delegate,e),this)}},{key:"setMaxUploadRetryTime",value:function(e){this._delegate.maxUploadRetryTime=e}},{key:"setMaxOperationRetryTime",value:function(e){this._delegate.maxOperationRetryTime=e}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};IC(this._delegate,e,t,n)}}]),e}();function RC(e){return/^[A-Za-z]+:\/\//.test(e)}function DC(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new AC(r,i)}!function(e){var t={TaskState:$T,TaskEvent:YT,StringFormat:gT,Storage:AC,Reference:NC};e.INTERNAL.registerComponent(new bt("storage-compat",DC,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.1.17")}(Gn);var PC=Gn.initializeApp({apiKey:"AIzaSyCcD8Jjo7wzTYO5CAa-JpqpgIPLG08PPy4",authDomain:"olx--com.firebaseapp.com",databaseURL:"https://olx--com-default-rtdb.firebaseio.com",projectId:"olx--com",storageBucket:"olx--com.appspot.com",messagingSenderId:"313015095751",appId:"1:313015095751:web:b815e08d02a7475da5c9e2",measurementId:"G-L8DE1KERCY"});i.render((0,W.jsx)(Q.Provider,{value:{firebase:PC},children:(0,W.jsx)($,{children:(0,W.jsx)(Ee,{})})}),document.getElementById("root"))}()}();
//# sourceMappingURL=main.bb7201c5.js.map